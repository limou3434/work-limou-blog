<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.20" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.140" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://limou3434.github.io/work-blog-website/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/aj3d1vq7/"><meta property="og:site_name" content="缡墨"><meta property="og:title" content="集群管理软件"><meta property="og:description" content="1.集群管理的历史发展 集群管理最早的知名方案就是 Apche MESOS 了，这是一个开源分布式管理框架，曾经被推特使用。 随着 K8s 的流行，Mesos 不再是唯一的选择。Mesos 作为一种资源调度器，可以与 K8s 结合使用，Mesos 作为一种资源调度器，后者提供了丰富的容器编排功能。 二者结合后，可以有效地在 Mesos 的资源管理框架上..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-19T14:21:17.000Z"><meta property="article:modified_time" content="2025-04-19T14:21:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"集群管理软件","image":[""],"dateModified":"2025-04-19T14:21:17.000Z","author":[]}</script><link rel="icon" type="image/png" href="https://theme-plume.vuejs.press/favicon-32x32.png"><title>集群管理软件 | 缡墨</title><meta name="description" content="1.集群管理的历史发展 集群管理最早的知名方案就是 Apche MESOS 了，这是一个开源分布式管理框架，曾经被推特使用。 随着 K8s 的流行，Mesos 不再是唯一的选择。Mesos 作为一种资源调度器，可以与 K8s 结合使用，Mesos 作为一种资源调度器，后者提供了丰富的容器编排功能。 二者结合后，可以有效地在 Mesos 的资源管理框架上..."><link rel="preload" href="/work-blog-website/assets/style-wRUVlp4M.css" as="style"><link rel="stylesheet" href="/work-blog-website/assets/style-wRUVlp4M.css"><link rel="modulepreload" href="/work-blog-website/assets/app-DcSFSDZX.js"><link rel="modulepreload" href="/work-blog-website/assets/index.html-8yk31enZ.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-f64889e1><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9670677b></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-9670677b> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-f64889e1 data-v-10dcbbec><div class="vp-navbar" vp-navbar data-v-10dcbbec data-v-1ff1b6bf><div class="wrapper" data-v-1ff1b6bf><div class="container" data-v-1ff1b6bf><div class="title" data-v-1ff1b6bf><div class="vp-navbar-title has-sidebar" data-v-1ff1b6bf data-v-f47c30ce><a class="vp-link no-icon link title" href="/work-blog-website/" data-v-f47c30ce data-v-a73080b7><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/work-blog-website/./logo.svg" alt data-v-91c3d102><!--]--><!--[--><img class="vp-image light logo" style="" src="/work-blog-website/./logo.svg" alt data-v-91c3d102><!--]--><!--]--><!--]--><span data-v-f47c30ce>缡墨</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-1ff1b6bf><div class="content-body" data-v-1ff1b6bf><!--[--><!--]--><div class="vp-navbar-search search" data-v-1ff1b6bf><div class="search-wrapper" data-v-8da3ab7d><!----><div id="local-search" data-v-8da3ab7d><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-8da3ab7d><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-1ff1b6bf data-v-fe90eb91><span id="main-nav-aria-label" class="visually-hidden" data-v-fe90eb91>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/blog/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>博客</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/blog/tags/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>标签</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/blog/archives/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>归档</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/1.%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>编程语言</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/2.%E6%95%B0%E6%9E%84%E7%AE%97%E6%B3%95/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>数构算法</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>系统网络</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-fe90eb91 data-v-69e03988><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-69e03988><span class="text" data-v-69e03988><!----><!----><span data-v-69e03988>存储持久</span><span class="vpi-chevron-down text-icon" data-v-69e03988></span></span></button><div class="menu" data-v-69e03988><div class="vp-menu" data-v-69e03988 data-v-23465237><div class="items" data-v-23465237><!--[--><!--[--><div class="vp-menu-link" data-v-23465237 data-v-d0632adc><a class="vp-link no-icon link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/4.%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/mysql/" data-v-d0632adc data-v-a73080b7><!--[--><!----> MySQL<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-23465237 data-v-d0632adc><a class="vp-link no-icon link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/4.%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8/redis/" data-v-d0632adc data-v-a73080b7><!--[--><!----> Redis<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/2.%E4%B8%9A%E5%8A%A1%E5%BC%80%E5%8F%91/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>业务开发</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/work-blog-website/3.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" tabindex="0" data-v-fe90eb91 data-v-c87e8060 data-v-a73080b7><!--[--><!----><span data-v-c87e8060>机器学习</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-1ff1b6bf data-v-77a749e7><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-77a749e7 data-v-065c5f28 data-v-f6a68fd3><span class="check" data-v-f6a68fd3><span class="icon" data-v-f6a68fd3><!--[--><span class="vpi-sun sun" data-v-065c5f28></span><span class="vpi-moon moon" data-v-065c5f28></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-1ff1b6bf data-v-7adb0edc data-v-ff0b2635><!--[--><a class="vp-social-link no-icon" href="https://github.com/limou3434" aria-label="github" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://x.com/3434Limou97685" aria-label="twitter" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-twitter" /></a><a class="vp-social-link no-icon" href="https://www.youtube.com/@3434limou" aria-label="youtube" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-youtube" /></a><a class="vp-social-link no-icon" href="https://space.bilibili.com/356662607?spm_id_from=333.1007.0.0" aria-label="bilibili" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-bilibili" /></a><a class="vp-social-link no-icon" href="https://www.zhihu.com/people/limou3434" aria-label="zhihu" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-zhihu" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-1ff1b6bf data-v-37498925 data-v-69e03988><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-69e03988><span class="vpi-more-horizontal icon" data-v-69e03988></span></button><div class="menu" data-v-69e03988><div class="vp-menu" data-v-69e03988 data-v-23465237><!----><!--[--><!--[--><!----><div class="group" data-v-37498925><div class="item appearance" data-v-37498925><p class="label" data-v-37498925>外观</p><div class="appearance-action" data-v-37498925><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-37498925 data-v-065c5f28 data-v-f6a68fd3><span class="check" data-v-f6a68fd3><span class="icon" data-v-f6a68fd3><!--[--><span class="vpi-sun sun" data-v-065c5f28></span><span class="vpi-moon moon" data-v-065c5f28></span><!--]--></span></span></button></div></div></div><div class="group" data-v-37498925><div class="item social-links" data-v-37498925><div class="vp-social-links social-links-list" data-v-37498925 data-v-ff0b2635><!--[--><a class="vp-social-link no-icon" href="https://github.com/limou3434" aria-label="github" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://x.com/3434Limou97685" aria-label="twitter" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-twitter" /></a><a class="vp-social-link no-icon" href="https://www.youtube.com/@3434limou" aria-label="youtube" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-youtube" /></a><a class="vp-social-link no-icon" href="https://space.bilibili.com/356662607?spm_id_from=333.1007.0.0" aria-label="bilibili" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-bilibili" /></a><a class="vp-social-link no-icon" href="https://www.zhihu.com/people/limou3434" aria-label="zhihu" target="_blank" rel="noopener" data-v-ff0b2635 data-v-2f8e5abd><span class="vpi-social-zhihu" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-1ff1b6bf data-v-7589b4f7><span class="container" data-v-7589b4f7><span class="top" data-v-7589b4f7></span><span class="middle" data-v-7589b4f7></span><span class="bottom" data-v-7589b4f7></span></span></button></div></div></div></div><div class="divider" data-v-1ff1b6bf><div class="divider-line" data-v-1ff1b6bf></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-f64889e1 data-v-ccb875be><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-ccb875be><span class="vpi-align-left menu-icon" data-v-ccb875be></span><span class="menu-text" data-v-ccb875be>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-ccb875be data-v-974e314a><button data-v-974e314a>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-f64889e1 data-v-b31792bb><div class="curtain" data-v-b31792bb></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b31792bb><span id="sidebar-aria-label" class="visually-hidden" data-v-b31792bb> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-32127bb7><section class="vp-sidebar-item sidebar-item level-0 has-active" data-v-32127bb7 data-v-07605bc3><!----><div data-v-07605bc3 data-v-07605bc3><div class="items" data-v-07605bc3><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>系统网络</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/adbi3n98/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>先导课程</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/nhjpj7o1/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>基本指令</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/g4zmcmi0/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>权限管理</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/pp91tz2s/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>编辑器</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/82sbxlhl/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>编译器</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/k1fkvi3c/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>调试器</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/5txmd1gw/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>构建器</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/8ck0qm2i/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>软件管理</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/b1tyyzew/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>进度条程序</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/01ta8n80/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>脚本编程</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/okgrdzg4/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>进程基础</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/cpg60x70/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>环境变量</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/1vogsfkk/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>简易外核</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/spnggbc7/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>磁盘内存</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/4uilxc2v/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>进程通信</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/11ccm048/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>线程开发</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/25ehjxls/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>进程信号</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/z1wywjm1/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>常驻服务</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/2w24bhws/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>网络基础</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/v510ifxo/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>网络编程</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/u9tjrmxs/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>应用层</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/4q3wan58/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>传输层</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/dh22vht2/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>网络层</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/jxzz8513/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>链路层</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/aen10afj/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>物理层</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/7ecvjong/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>其他协议</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/gduhb6so/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>高级 IO</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/l4vcsl0a/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>网络配置</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/v3w6hfe3/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>URL 过程</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/tqi8br7j/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>网络应用演变</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/tgphl3fd/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>版本管理软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/xyzxfhq8/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>远程链接软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/3hoxlbkl/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>内网穿透软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/nl7c2cx1/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>服务管理软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/oqw8t109/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>终端优化软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/n6jvjmt5/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>服务程序软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/tsuvkv27/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>项目部署软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/ukh43e1q/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>容器隔离软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/aj3d1vq7/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>集群管理软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/5567ctbx/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>现代指令软件</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-07605bc3 data-v-07605bc3><div class="item" data-v-07605bc3><div class="indicator" data-v-07605bc3></div><!----><a class="vp-link no-icon link link" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/jr06k8rr/" data-v-07605bc3 data-v-a73080b7><!--[--><p class="text" data-v-07605bc3>面板管理管理</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-f64889e1 data-v-b8e80d86><div class="vp-doc-container has-sidebar has-aside" data-v-b8e80d86 data-v-eccffa44><!--[--><!--]--><div class="container" data-v-eccffa44><div class="aside" vp-outline data-v-eccffa44><div class="aside-curtain" data-v-eccffa44></div><div class="aside-container" data-v-eccffa44><div class="aside-content" data-v-eccffa44><div class="vp-doc-aside" data-v-eccffa44 data-v-55f15f28><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-55f15f28 data-v-6293d33c><div class="content" data-v-6293d33c><div class="outline-marker" data-v-6293d33c></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-6293d33c><span data-v-6293d33c>此页内容</span><span class="vpi-print icon" data-v-6293d33c></span></div><ul class="root" data-v-6293d33c data-v-ab5fb2ff><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-55f15f28></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-eccffa44><div class="content-container" data-v-eccffa44><!--[--><!--]--><main class="main" data-v-eccffa44><nav class="vp-breadcrumb" data-v-eccffa44 data-v-7f0052b8><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-7f0052b8><!--[--><li property="itemListElement" typeof="ListItem" data-v-7f0052b8><a class="vp-link no-icon link breadcrumb" href="/work-blog-website/" property="item" typeof="WebPage" data-v-7f0052b8 data-v-a73080b7><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-7f0052b8></span><meta property="name" content="首页" data-v-7f0052b8><meta property="position" content="1" data-v-7f0052b8></li><li property="itemListElement" typeof="ListItem" data-v-7f0052b8><a class="vp-link no-icon link breadcrumb current" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/aj3d1vq7/" property="item" typeof="WebPage" data-v-7f0052b8 data-v-a73080b7><!--[-->集群管理软件<!--]--><!----></a><!----><meta property="name" content="集群管理软件" data-v-7f0052b8><meta property="position" content="2" data-v-7f0052b8></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-2065b01c>集群管理软件 <!----></h1><div class="vp-doc-meta" data-v-2065b01c><p class="reading-time" data-v-2065b01c><span class="vpi-books icon" data-v-2065b01c></span><span data-v-2065b01c>约 24851 字</span><span data-v-2065b01c>大约 83 分钟</span></p><!----><p class="create-time" data-v-2065b01c><span class="vpi-clock icon" data-v-2065b01c></span><span data-v-2065b01c>2025-04-09</span></p></div><!--]--><div class="_1_%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB_3_%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C_aj3d1vq7_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-eccffa44><div data-v-eccffa44><h2 id="_1-集群管理的历史发展" tabindex="-1"><a class="header-anchor" href="#_1-集群管理的历史发展"><span>1.集群管理的历史发展</span></a></h2><p>集群管理最早的知名方案就是 <code>Apche MESOS</code> 了，这是一个开源分布式管理框架，曾经被推特使用。</p><p>随着 <code>K8s</code> 的流行，<code>Mesos</code> 不再是唯一的选择。<code>Mesos</code> 作为一种资源调度器，可以与 <code>K8s</code> 结合使用，<code>Mesos</code> 作为一种资源调度器，后者提供了丰富的容器编排功能。</p><p>二者结合后，可以有效地在 <code>Mesos</code> 的资源管理框架上，部署 <code>K8s</code> 来管理容器应用。<code>K8s</code> 的出现也让 <code>Mesos</code> 的局限性更加明显。而 <code>Docker</code> 为了和 <code>Google</code> 抢夺对容器编排技术的事实标准也研发了针对 <code>Docker</code> 的编排技术 <code>Docker Swarm</code>。</p><p>尽管 <code>Docker Swarm</code> 非常轻量，专为 <code>Docker</code> 容器准备，但是依旧不如 <code>K8s</code>，功能对于企业过于局限，但是也不算不好用。</p><p>另外 <code>K8s</code> 实际上由谷歌内部的 <code>Borg</code> 使用 <code>Go</code> 语言翻写而来，本身也是轻量级，开源，弹性伸缩，自动负载均衡，支持 <code>IPVS</code>。而 <code>Google</code> 还曾经维护过 <code>Borg</code> 的分支 <code>Omega</code>，因此实际上 <code>Google</code> 贡献了相当多的 <code>Linux</code> 上关于容器管理的代码，而 <code>K8s</code> 实际上是 <code>Google</code> 的第三款产品。</p><p><code>K8s</code> 是开源的，这与 <code>Borg</code> 和 <code>Omega</code> 形成鲜明对比，后两者是纯粹为谷歌内部开发的系统。与 <code>Omega</code> 类似，<code>K8s</code> 的核心是一个共享的持久存储，各组件会监控相关对象的变化。但与 <code>Omega</code> 直接将存 储暴露给受信任的控制平面组件不同，<code>K8s</code> 中的状态只能通过特定领域的 <code>REST API</code> 访问，该 <code>API</code> 应用了更高层次的版本控制、验证、语义和策略，以支持更多样化的客户端。更重要的是，<code>K8s</code> 的开发更注重编写在集群中运行的应用程序的开发人员的体验。其主要设计目标是让部署和管理复杂的分布式系统变得容 易，同时还能受益于容器带来的更高利用率。</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);
--icon-size: 48px;
display: inline-block;
width: var(--icon-size);
height: var(--icon-size);
background-color: currentcolor;
-webkit-mask-image: var(--loading-icon);
mask-image: var(--loading-icon);
"></span></div></div><!--]--><p>这方面的心路历程，可以在 <a href="https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/44843.pdf" target="_blank" rel="noopener noreferrer">这份 .pdf 中</a> 查阅。</p><h2 id="_2-集群管理的相关配置" tabindex="-1"><a class="header-anchor" href="#_2-集群管理的相关配置"><span>2.集群管理的相关配置</span></a></h2><p>您必须先下载 <code>Docker</code> 后再来 <a href="https://K8s.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">根据官方文档下载一些必要工具</a>，统一下载后我们再来进行研究。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载 kubectl 集群管理工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-transport-https</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ca-certificates</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gnupg</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -fsSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://pkgs.K8s.io/core:/stable:/v1.31/deb/Release.key</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gpg</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --dearmor</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/keyrings/K8s-apt-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 644</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/keyrings/K8s-apt-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">deb [signed-by=/etc/apt/keyrings/K8s-apt-keyring.gpg] https://pkgs.K8s.io/core:/stable:/v1.31/deb/ /</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tee</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/sources.list.d/K8s.list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 644</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/sources.list.d/K8s.list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Client</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1.31.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Kustomize</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v5.4.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Error</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (NotFound): the server could not find the requested resource </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 这个只有配置了集群才会显示版本号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载 minikube 集群构建工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -LO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dpkg</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube_latest_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1.34.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">commit:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 210b148df93a80eb872ecbeb7e35281b3c582c61</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载 kind 集群构建工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://golang.org/dl/go1.20.linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/local</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -xzf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> go1.20.linux-amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">export PATH=$PATH:/usr/local/go/bin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 看终端</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> source</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> go</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> go</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sigs.K8s.io/kind@v0.24.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">export PATH=$PATH:$(go env GOPATH)/bin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> source</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kind</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kind</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.24.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载 kubeadm 集群构建工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-transport-https</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ca-certificates</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-key</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> EOF</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tee</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/sources.list.d/K8s.list</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">deb https://apt.K8s.io/ K8s-xenial main</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubeadm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> swapoff</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 永久 sudo nano /etc/fstab 注释掉 &quot;# /swapfile none swap sw 0 0&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubeadm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --pod-network-cidr=10.244.0.0/16</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>简单提及一下，<code>kubectl</code> 仅仅是一个客户端工具，下载后还需要根据 <code>k8s</code> 的架构图来安装组件，<code>minilube、kind、kubeadm</code> 可以提供 <code>K8s</code> 集群环境（相当于集群脚手架），而 <code>kubectl</code> 负责操作和管理该 <code>K8s</code> 集群的资源，是三个不同脚手架的底层工具。</p><ul><li><strong>Minikube</strong>：通常用于学习环境</li><li><strong>Kind</strong>：通常用于开发环境</li><li><strong>Kubeadm</strong>：通常用于生产环境</li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：上述参考 <a href="https://cn.linux-console.net/?p=9791" target="_blank" rel="noopener noreferrer">Linux 中国 | kubeadm 与 minikube 优缺点</a>。除此以外，还有一些别的集群脚手架，例如 <code>K3s、MicroK8s</code>。</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：而还有个比较硬伤的问题，就是学习本文档的过程中物理机器越多越好，我这里有较多的物理机器可以供我实验，并且已被我虚拟化为多台服务器，我也不太喜欢使用 <code>VM Workstation</code> 去模拟这些东西，总觉得不够真实...</p></div><h2 id="_3-集群管理的现代标准" tabindex="-1"><a class="header-anchor" href="#_3-集群管理的现代标准"><span>3.集群管理的现代标准</span></a></h2><h3 id="_3-1-k8s-的前世今生" tabindex="-1"><a class="header-anchor" href="#_3-1-k8s-的前世今生"><span>3.1.K8s 的前世今生</span></a></h3><p><code>K8s</code> 可以说是 <code>Borg</code> 的加强版本，并且使用 <code>Go</code> 重构而来。</p><figure><img src="/work-blog-website/assets/borg-DL1Cimel.png" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>上图就是 <code>Borg</code> 的设计架构图。</p><p><strong>BorgMaster(主节点) 通过 scheduler(调度器)，来进行根据应用的特点将请求分发，调度到具体的机器上去。主节点也负责维护整个集群的状态，并将数据持久化到 Paxos 存储中。而工作的节点就是一系列的 Borglet(工作节点)，这些节点一般都在容器中。（可以看到，每一份组件都有副本，且最好是奇数节点，避免出现“平局”的现象）。</strong></p><p>可以看到整体以数据和服务为中心，而这里有三种访问 <code>BorgMaster(主节点)</code> 的主要方法：</p><ol><li><code>borgcfg</code> 命令行工具搭配配置文件进行读写</li><li>命令行工具进行读写</li><li>浏览器进行读写</li></ol><p>其中 <code>scheduler(调度器)</code> 不会直接访问 <code>Borglet(工作节点)</code>，而是和 <code>Paxos(键值对数据库)</code> 进行交互，<code>Borglet</code> 就会从这个 <code>Paxos(键值对数据库)</code> 取出交给自己的请求进行消费。</p><h3 id="_3-2-k8s-的组件框架" tabindex="-1"><a class="header-anchor" href="#_3-2-k8s-的组件框架"><span>3.2.K8s 的组件框架</span></a></h3><figure><img src="/work-blog-website/assets/image-20250216194753702-Cylkg0sS.png" alt="详细架构图" tabindex="0" loading="lazy"><figcaption>详细架构图</figcaption></figure><figure><img src="/work-blog-website/assets/kubernetes-whole-arch-Bc24eZyK.png" alt="抽象架构图" tabindex="0" loading="lazy"><figcaption>抽象架构图</figcaption></figure><p>上图就是 <code>K8s</code> 的设计架构图，这其中有一些 <code>Borg</code> 的影子。</p><p><strong>scheduler(调度器) 会把任务交给 Api server(接口服务)，Api server(接口服务) 再把请求写入到 Etcd 分布式数据库中，保存整个集群的状态。controller manager 负责维护集群的状态，比如故障检测、自动扩展、滚动更新等（而实际上，每一份组件都有副本，且最好是奇数节点，避免出现“平局”的现象）。</strong></p><p><strong>上述的所有重要组件整体可以看作是 K8s 的主节点，接下来我们来看我们的工作节点。一个工作节点就是一个 Node，多个工作节点加上主节点就是一个 K8s 集群。</strong></p><p><strong>而 Node 内部包含 Kubelet（CRI, 容器/运行时环境/接口）, 会维护 Api server 和 Docker 容器之间的交互和操作，也就是负责维护容器的生命周期，同时也负责存储卷（CSI）和网络（CNI）的管理，是本 Node 节点的管理者。Container runtime 负责镜像管理以及 Pod 和容器的真正运行（CRI），Node 其实直接管理的是多个 Pod，而 Pod 内部是由一个镜像文件运行起来的相同容器副本集合，Container runtime 其实就是提供一个容器运行的环境。此外其实还有一个没有展示出来的 Kube proxy，负责处理集群中部分 Pod 的网络流量, 支持 ipvs 以及多种代理模式, 默认的操作对象是 firewail, 也就是防火墙去实现 Pod 的映射, 以设置 IPTables、IPVS 来实现服务映射访问，以支持某些 Pod 被外部网络所访问。</strong></p><p>可以看到整体以服务为中心，因此这里也有三种访问 <code>api server(接口服务)</code> 的主要方式：</p><ul><li><code>kubectl</code> 命令行工具搭配配置文件进行读写</li><li><code>Etcd</code> 分布式键值对存储系统进行读写</li><li>浏览器进行读写</li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：这里还可以给出关于 <code>Etcd</code> 的架构图。</p><figure><img src="/work-blog-website/assets/image-20241012003048888-Bg5x8Mxl.png" alt="image-20241012003048888" tabindex="0" loading="lazy"><figcaption>image-20241012003048888</figcaption></figure><p><code>Etcd</code> 和 <code>MySQL</code> 一样都是基于 <code>C/S</code> 服务开发。其中，<code>Raft</code> 是分布式的选举算法，通过选举领导的方式来处理写入请求。而为了防止数据损坏，还配备了 <code>WAL</code> 这种日志记录机制，防止数据的意外丢失。<code>Entry</code> 记录日志中的单个条目，包含一个操作或状态变更的具体信息，代表一个对状态机的修改。<code>Snapshot</code> 是状态机在某一时刻的完整快照，包含当前所有数据的状态，可以在系统恢复时避免重放所有的 <code>Entries</code>。最后才实际存储在 <code>Store</code> 中进行持久化。</p><p><code>WAL(Write-Ahead Logging, 预写日志)</code> 是一种用于数据持久化的日志记录机制。在写入数据库之前，首先将数据变更记录到日志中。这种机制确保了在系统崩溃或故障后，可以通过回放日志来恢复数据的完整性。</p><p><code>WAL</code> 的主要优点包括：</p><ul><li><strong>数据安全性</strong> 在数据写入数据库之前，先记录到日志中，即使发生故障，也能通过日志恢复数据</li><li><strong>性能提升</strong> 批量写入时，可以先将日志写入内存，减少磁盘 <code>I/O</code> 操作，提高性能</li><li><strong>一致性</strong> 通过日志，确保数据变更操作的顺序一致，维护数据的一致性</li></ul><p>现在 <code>Etcd</code> 转而使用 <code>v3</code> 以上的版本，前面的版本已经被抛弃（ <code>v2</code> 版本几乎只把数据存储在内存中，<code>v3</code> 版本增加了关于存储卷的持久化方案）...</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：可以看出 <code>K8s</code> 架构里的 <code>api server(接口服务)</code> 非常繁忙（控制器、调度器、命令行工具、浏览器、存储系统、容器运行时接口、网络代理...都需要访问），因此每个组件也可以在本地生成一定的缓存降低 <code>api server(接口服务)</code> 的压力（这种缓存机制可以由多种方案解决，比如设置缓存有效期 <code>TTL</code>，版本号时间戳确认请求，服务器事件驱动机制...）。不过这么讲有些抽象，后面还会细细讲解...</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：<code>IPVS(IP Virtual Server)</code> 是一个 <code>Linux</code> 内核模块，提供基于 <code>IP</code> 的负载均衡功能（也就是传输层级别的负载均衡）。它通过将多个后端服务器（如 <code>Pod</code>）绑定到一个虚拟 <code>IP</code> 地址，实现负载均衡。</p><p>主要特点包括：</p><ol><li><strong>高性能</strong>：<code>IPVS</code> 在内核中实现，能够处理大量并发连接，提供更高的性能和更低的延迟。</li><li><strong>多种负载均衡算法</strong>：支持多种负载均衡算法（如轮询、最少连接、加权轮询等），可以根据不同的场景选择合适的算法。</li><li><strong>集成支持</strong>：<code>K8s</code> 中的 <code>Kube Proxy</code> 可以配置为使用 <code>IPVS</code> 模式，以便更高效地管理服务流量。</li></ol><p>通过这些功能，<code>IPVS</code> 可以在大规模的分布式系统中有效地管理流量，提高应用的可用性和可靠性。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试使用 ipvs 来实现传输层级别的负载均衡</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 准备地址为 10.10.174.101 的主机负责负载均衡</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 确保内核加载了 IPVS 模块</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lsmod</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip_vs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装 ipvsadm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># sudo modprobe ip_vs # 如果没有看到相关的模块可以手动加载</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># sudo modprobe ip_vs_rr # 也可加载不同的调度算法</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建虚拟 ip 后进行查看</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101/24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 注意这个虚拟 IP 是没有办法直接在外部进行访问的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">P</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qdisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fq_codel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> state</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    link/ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 04:7c:16:f3:00:35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    altname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enp0s31f6</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.100/24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.174.255</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dynamic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noprefixroute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 34640sec</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 34640sec</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101/24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> secondary</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fe80::4189:c1a3:5e9e:ab8/64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noprefixroute</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">       </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查虚拟 ip 是否可用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ping</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.174.101</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PING</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.174.101</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (10.10.174.101) 56(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">84</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) bytes of data.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> icmp_seq=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ttl=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.194</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ms</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> icmp_seq=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ttl=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.066</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ms</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> icmp_seq=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ttl=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.066</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ms</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">^C</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.174.101</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ping</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> statistics</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transmitted,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> received,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2038ms</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rtt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> min/avg/max/mdev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0.066/0.108/0.194/0.060</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 配置传输层负载均衡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:8080</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rr</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 添加新的虚拟 IP 地址配置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 将后端服务器重新添加到新的虚拟 IP 地址配置中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:8080</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.46:8080</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:8080</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.77:8080</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Virtual</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.2.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (size=4096)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Prot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LocalAddress:Port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Scheduler</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flags</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">RemoteAddress:Port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           Forward</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Weight</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ActiveConn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> InActConn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">TCP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  10.10.174.101:8080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rr</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10.10.174.46:8080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Masq</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">         </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10.10.174.77:8080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Masq</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 做好负载对象的准备</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &gt;&gt;&gt; 准备负载对象 1 主机 10.10.174.46 &gt;&gt;&gt; ###</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http.server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &lt;&lt;&lt; 准备负载对象 1 主机 10.10.174.46 &lt;&lt;&lt; ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &gt;&gt;&gt; 准备负载对象 2 主机 10.10.174.77 &gt;&gt;&gt; ###</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http.server</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &lt;&lt;&lt; 准备负载对象 2 主机 10.10.174.77 &lt;&lt;&lt; ###</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试用负载均衡服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://10.10.174.101:8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://10.10.174.101:8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://10.10.174.101:8080</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ... 多次访问可以发现 负载对象 1 和 负载对象 2 轮流打印日志, 所以说明负载均衡成功</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除负载均衡服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -D</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101:8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ipvsadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Virtual</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.2.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (size=4096)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Prot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LocalAddress:Port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Scheduler</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flags</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">RemoteAddress:Port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           Forward</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Weight</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ActiveConn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> InActConn</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除虚拟 ip</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> del</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.101/24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">P</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qdisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fq_codel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> state</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    link/ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 04:7c:16:f3:00:35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    altname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enp0s31f6</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.174.100/24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.174.255</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dynamic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noprefixroute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eno1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 32248sec</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 32248sec</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fe80::4189:c1a3:5e9e:ab8/64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noprefixroute</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：主要组件如上，但是还有一些非常重要的插件也值得一提。</p><ul><li><code>CoreDNS</code> 可以为集群中的服务（<code>SVC, service, 服务, 在这里也就是一个 Pod 公开为网络服务</code>）创建一个域名服务器 <code>IP</code> 对应的解析</li><li><code>Dashboard</code> 可以 <code>K8s</code> 提供关于 <code>B/S</code> 架构的支持</li><li><code>Ingress Controller</code> 可以实现七层代理（官方只实现了四层）</li><li><code>Fedetation</code> 可以提供跨集群中心多 <code>K8s</code> 统一管理功能</li><li><code>Prometheus</code> 可以 <code>K8s</code> 集群的日志统一分析平台</li></ul></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：<code>Pod</code> 本身在某些实现中可能会部署到容器中，但是大部分情况下是直接部署到裸机上的，同时每个 <code>Pod</code> 内部一定会包含多个容器, 主要是 <code>Docker</code> 容器。</p></div><h3 id="_3-3-k8s-的分层架构" tabindex="-1"><a class="header-anchor" href="#_3-3-k8s-的分层架构"><span>3.3.K8s 的分层架构</span></a></h3><p><code>K8s</code> 设计理念和功能其实就是一个类似 <code>Linux</code> 的分层架构，如下图所示。</p><figure><img src="/work-blog-website/assets/kubernetes-layers-arch-1739714773422-17-p6fGa9sB.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>核心层：<code>K8s</code> 最核心的功能，对外提供 <code>API</code> 构建高层的应用，对内提供插件式应用执行环境</li><li>应用层：部署（无状态应用、有状态应用、批处理任务、集群应用等）和路由（服务发现、<code>DNS</code> 解析等）、<code>Service Mesh</code>（部分位于应用层）</li><li>管理层：系统度量（如基础设施、容器和网络的度量），自动化（如自动扩展、动态 <code>Provision</code> 等）以及策略管理（<code>RBAC、Quota、PSP、NetworkPolicy</code> 等）、<code>Service Mesh</code>（部分位于管理层）</li><li>接口层：<code>kubectl</code> 命令行工具、客户端 <code>SDK</code> 以及集群联邦</li><li>生态层：在接口层之上的庞大容器集群管理调度的生态系统，可以划分为两个范畴 <ul><li><code>K8s</code> 外部：日志、监控、配置管理、<code>CI/CD</code>、<code>Workflow</code>、<code>FaaS</code>、<code>OTS</code> 应用、<code>ChatOps</code>、<code>GitOps</code>、<code>SecOps</code> 等</li><li><code>K8s</code> 内部：<code>CRI</code>、<code>CNI</code>、<code>CSI</code>、镜像仓库、<code>Cloud Provider</code>、集群自身的配置和管理等</li></ul></li></ul><h3 id="_3-4-k8s-的资源清单" tabindex="-1"><a class="header-anchor" href="#_3-4-k8s-的资源清单"><span>3.4.K8s 的资源清单</span></a></h3><table><thead><tr><th style="text-align:left;">类别</th><th style="text-align:left;">名称</th></tr></thead><tbody><tr><td style="text-align:left;">普通资源对象</td><td style="text-align:left;">Node、Pod、Namespace、Label</td></tr><tr><td style="text-align:left;">控制资源对象</td><td style="text-align:left;">ReplicationController、ReplicaSet、Deployment、HorizontalPodAutoscaling、StatefulSet、DaemonSet、Job、CronJob</td></tr><tr><td style="text-align:left;">网络资源对象</td><td style="text-align:left;">Service、Ingress</td></tr><tr><td style="text-align:left;">身份对象</td><td style="text-align:left;">ServiceAccount、Role、ClusterRole</td></tr><tr><td style="text-align:left;">存储对象</td><td style="text-align:left;">Volume、PersistentVolume、Secret、ConfigMap</td></tr><tr><td style="text-align:left;">策略对象</td><td style="text-align:left;">SecurityContext、ResourceQuota、LimitRange</td></tr><tr><td style="text-align:left;">自定对象</td><td style="text-align:left;">CustomResourceDefinition</td></tr></tbody></table><p>在 <code>K8s</code> 中，<strong>资源清单</strong> 指的是用于描述 <code>K8s</code> 集群中各类资源的声明性配置文件，通常以 <code>YAML</code> 或 <code>JSON</code> 格式编写。资源清单定义了集群中工作负载（如何运行、如何进行网络配置、如何管理存储和资源调度等。我们来一个一个介绍...</p><h4 id="_3-4-1-node" tabindex="-1"><a class="header-anchor" href="#_3-4-1-node"><span>3.4.1.Node</span></a></h4><p>集群中的一个工作机器，可以是物理机或虚拟机（一般在生产环境中直接部署在裸机上）。<code>Node</code> 上运行着一个或多个 <code>Pod</code>，包含必要的组件来确保 <code>Pod</code> 正常运行（也就是我们之前的架构图）。</p><h4 id="_3-4-2-pod" tabindex="-1"><a class="header-anchor" href="#_3-4-2-pod"><span>3.4.2.Pod</span></a></h4><p><code>Pod</code> 是最小的可调度单位，包含一个或多个容器，因此 <code>Pod</code> 也叫做工作负载，可以分为两种：</p><ul><li>自主式 <code>Pod</code>，生命周期结束后没有处理策略</li><li>控制器 <code>Pod</code>，生命周期结束后存在处理策略</li></ul><p>而更加准确来说，<code>Pod</code> 只要运行起来，一定有一个容器被运行起来，而如果后续 <code>Pod</code> 中加入了其他容器（这些容器可能是不同的镜像文件生成的），就必须保证这些容器使用一些相同的资源。这种做法就需要用一个 <code>Pause</code> 父容器来做到，它就相当于其他容器的父进程，可以共享给多个容器自己管理的资源（一般共享网络、共享存储卷）。</p><p>因此默认情况下，一个 <code>Pod</code> 内部的所有容器都共享相同的资源。</p><p>一台主机就视为一个工作节点 <code>Node</code>，内部包含多个 <code>Pod</code> 资源，这种设计也方便一台主机也可以实现分布式架构。</p><h4 id="_3-4-3-controller" tabindex="-1"><a class="header-anchor" href="#_3-4-3-controller"><span>3.4.3.Controller</span></a></h4><p>由于 <code>Pod</code> 有死亡的风险，因此我们需要某些自动化策略，控制 <code>Pod</code> 的生命周期，<a href="https://K8s.io/zh-cn/docs/concepts/workloads/" target="_blank" rel="noopener noreferrer">而 K8s 官方文档中定义的 Pod 的控制器</a> 可以分为以下几种。</p><ul><li><code>ReplicationController</code></li><li><code>ReplicaSet</code></li><li><code>Deployment</code></li><li><code>Horizontal Pod Autoscaler</code></li><li><code>StatefulSet</code></li><li><code>DaemonSet</code></li><li><code>Job</code></li><li><code>Cron Job</code></li></ul><h4 id="_3-4-5-namespace" tabindex="-1"><a class="header-anchor" href="#_3-4-5-namespace"><span>3.4.5.Namespace</span></a></h4><p>命名空间是一种逻辑隔离机制，允许在同一集群内划分多个虚拟集群。每个 <code>Namespace</code> 中可以有独立的资源，如 <code>Pod、Service</code> 等，便于资源管理和资源隔离，让不同团队之间可以合作开发。不过 <code>Node</code> 资源对象是全局资源，不属于任何一个命名空间。</p><h4 id="_3-4-5-service" tabindex="-1"><a class="header-anchor" href="#_3-4-5-service"><span>3.4.5.Service</span></a></h4><p><code>Service</code> 资源在 <code>K8s</code> 中主要是用于集群内部的 <code>Pod</code> 之间的代理和流量转发。它为 <code>Pod</code> 提供了一个稳定的访问入口，确保即使 <code>Pod</code> 的 <code>IP</code> 地址发生变化，外部或者其他 <code>Pod</code> 依然能够通过相同的 <code>Service</code> 访问它们。</p><p><code>K8s</code> 网络模型默认集群中所有的 <code>Pod</code> 内的容器都在一个可以直接连通的扁平化网络中（其实就是一个局域网中），因此我们后续需要保证这个网络假设成立。</p><p>理论上来说一个 <code>K8s</code> 集群中的所有 <code>Pod</code> 都是可以相互 <code>ping</code> 通的，但 <code>K8s</code> 中的 <code>Pod</code> 一般是动态的，会随着调度、扩容、缩容等操作被创建或销毁。因此，<code>Pod</code> 的 <code>IP</code> 地址也是临时的，客户端很难直接依赖 <code>Pod</code> 的 <code>IP</code> 进行访问。<code>Service</code> 通过为一组 <code>Pod</code> 提供一个 <strong>稳定的 IP 地址</strong> 和 <strong>域名</strong>，从而让其他 <code>Pod</code> 不需要关心某组 <code>Pod</code> 的动态变化。</p><p>而 <code>Service</code> 也被称为“服务发现”，会把一组相关的 <code>Pod</code>（同标签或者说由 <code>ReplicaSet</code> 标签管理的）提供一个被外界发现的功能，其他 <code>Pod</code> 可以通过服务发现使用这些 <code>Pod</code>，而不至于由于动态发生服务访问失败。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：上面 <code>Pod</code> 这种管理也被称为“扁平化管理”，在公司中的“扁平化管理”是一种组织管理结构，它的特点是减少管理层级，强调较少的管理层次和更大的员工自主权（也是有的公司规模较小的一种委婉说辞...）。</p><p>这里我们怎么保证多个 <code>Pod</code> 在集群都在一个扁平化网络中呢（毕竟多个 <code>Node</code> 有可能部署在多个裸机上）？首先您要明白多个 <code>Pod</code> 不一定只在一个 <code>Node</code> 上，尽管可以保证 <code>Node</code> 们处于同一个局域网中（由网络工程师来组件 <code>Nodes</code> 局域网，如果 <code>Node</code> 对应一个裸机，那么这些裸机需要人为保证处于同一个局域网中），但由于一个集群的不同 <code>Pod</code> 可能存放在不同的 <code>Node</code> 上，而 <code>Pod</code> 又需要保持在一个局域网中，这该怎么办呢？我们先来研究不同主体间的通信。</p><figure><img src="/work-blog-website/assets/image-20241013150452662-DQ4nk0ay.png" alt="image-20241013150452662" tabindex="0" loading="lazy"><figcaption>image-20241013150452662</figcaption></figure><ul><li><strong>Pod 内的多个容器通信</strong>：多个 <code>Pod</code> 在一个本地网中通信（其实共享的是 <code>Pause</code> 容器的网络栈，也就是 <code>Pause</code> 容器的 <code>lo</code>，这其实还是在容器内部做本地通信，这个简单，可以手动配置）</li><li><strong>Pod 和 Pod 间通信</strong>：<code>Pod</code> 内多个容器在一个局域网中通信，并且保证源头和目的都是 <code>Pod</code> 的 <code>IP</code> 地址（如果是一个物理主机上的，直接通过 <code>Docker</code> 实现的虚拟网卡 <code>docker0</code> 即可完成不同 <code>Pod</code> 的通信；但是如果是不同主机上的 <code>Pod</code> 就需要进一步通过虚拟网卡 <code>Flannel0</code> 来实现，这通常需要物理主机安装一个 <code>Flanneld</code> 的守护进程，<code>Flannel0</code> 负责抓包、封装、转发 <code>docker0</code> 的请求，然后通过 <code>Etcd</code> 获取得到路由表判断到底该使用 <code>Flanneld</code> 转发到物理局域网中的哪一个机器上，由不同物理机上部署的 <code>Flanneld</code> 来处理，而这就是 <code>Overlay Network</code> 的原理）</li><li><strong>Node 和 Node 间通信</strong>：这是由网络工程师保证的，因为 <code>Node</code> 很有可能在生产环境中直接部署在裸机上，要搭建居群本来就需要保证这些裸机处于同一个局域网中，因此 <code>Node</code> 之间直接使用裸机的网卡就可以访问。</li><li><strong>Service 和 Service 间通信</strong>：待补充...</li><li><strong>pod 和 Service 间通信</strong>：待补充...</li><li><strong>外网访问 Pod</strong>：待补充...</li></ul><p>因此我们可以看到有四层局域网，既 <code>Service、Nodes、Pods、Container</code> 四层（不过其实也可以忽略 <code>Container</code> 只剩下三层，毕竟这一层是不一定成立的，要看设置）。</p><p><code>Flannel</code> 使用的是 <code>UDP</code> 来转发报文，在 <code>Flannerl</code> 内部有一个封装栈，可以封装 <code>UDP</code> 报文、<code>源头 Pod IP</code>、<code>目的 Pod IP</code> 等信息为一个新的报文转发出去，有多个物理主机中部署的 <code>Flanneld</code> 来负责相互传递和解包处理。当然这其中的消耗看上去还是有的，并且感觉不少...</p><p><code>Etcd</code> 在这里发挥了很大的作用，它必须能够做到存储管理 <code>Flannel</code> 可以分配的 <code>IP</code> 地址资源，监控每一个 <code>Pod</code> 的地址，并在内存中建立维护集群所有的 <code>Pod</code> 节点路由。</p><figure><img src="/work-blog-website/assets/image-20241013155819811-D3axEQG-.png" alt="image-20241013155819811" tabindex="0" loading="lazy"><figcaption>image-20241013155819811</figcaption></figure></div><h4 id="_3-4-6-ingress" tabindex="-1"><a class="header-anchor" href="#_3-4-6-ingress"><span>3.4.6.Ingress</span></a></h4><p>允许集群外部 <code>HTTP</code> 和 <code>HTTPS</code> 流量访问集群内部的服务。<code>Ingress</code> 可以提供负载均衡、<code>SSL</code> 终结、基于路径或主机名的路由等功能，通常需要与 <code>Ingress Controller</code> 配合使用。</p><h4 id="_3-4-7-label" tabindex="-1"><a class="header-anchor" href="#_3-4-7-label"><span>3.4.7.Label</span></a></h4><p>资源附加的键值对，用于标识、选择和组织资源。通过标签选择器可以选择一组资源，方便进行筛选和管理。例如，您可以为一组 <code>Pod</code> 添加相同的标签，然后通过 <code>Service</code> 或 <code>Deployment</code> 来选择这些 <code>Pod</code>。</p><h4 id="_3-4-8-customresourcedefinition" tabindex="-1"><a class="header-anchor" href="#_3-4-8-customresourcedefinition"><span>3.4.8.CustomResourceDefinition</span></a></h4><p>允许用户扩展 <code>K8s API</code>，定义自定义资源类型。<code>CRD</code> 可以用来管理集群中的自定义应用程序资源，类似于内建资源（如 <code>Pod、Service</code> 等）。一旦定义了 <code>CRD</code>，用户就可以创建和管理这种类型的资源。</p><h3 id="_3-5-k8s-的基本操作" tabindex="-1"><a class="header-anchor" href="#_3-5-k8s-的基本操作"><span>3.5.K8s 的基本操作</span></a></h3><p>总得来说 <code>K8s</code> 是一个管理和调度容器的系统，它的工作原理很像是在“执行目标”。每次您在 <code>K8s</code> 中创建一个资源对象（例如一个 <code>Pod、Service、Deployment</code>），<code>K8s</code> 就会开始努力确保这个对象按您的要求存在和运行。</p><ul><li><strong>K8s 对象是目标</strong>：比如您希望集群中有一个特定数量的 <strong>Pod</strong> 在运行，或者您希望某个服务始终可用。当您在 K8s 中创建这些对象时，您其实是在告诉系统：“我希望这些资源以这种方式存在”。</li><li><strong>K8s 会持续监控</strong>：一旦您创建了这些对象，K8s 就会持续确保它们处于您希望的状态。假如某个 Pod 因为某种原因停止工作，K8s 会自动重新创建它，确保系统始终符合您定义的“期望状态”。</li><li><strong>K8s API</strong>：所有这些操作（比如创建、修改、删除对象）都需要通过 <strong>K8s API</strong> 来进行。您可以使用 <code>kubectl</code> 命令行工具，它会通过 <code>API</code> 与 <code>K8s</code> 集群进行通信，执行您要求的操作（如创建一个新的 Pod，或者修改一个服务的配置）。另外，<code>K8s</code> 还提供了用 <code>Golang</code> 写的客户端库 <a href="https://github.com/kubernetes/client-go" target="_blank" rel="noopener noreferrer">client-go</a>，这让您可以通过编程接口来与 <code>K8s</code> 交互。</li></ul><p>另外，<code>K8s</code> 对象包含一些嵌套的对象字段，它们负责管理对象的配置</p><ul><li><code>metadata</code>：元数据，填写一些用于标识 <code>K8s</code> 对象的关键信息。 <ul><li><strong>name</strong>：对象的唯一标识符，在同一个命名空间内每个对象的名称必须是唯一</li><li><strong>namespace</strong>：对象所属的命名空间，使得资源之间可以相互隔离。大多数情况下，如果没有特别配置，默认放在 <code>default</code> 命名空间中</li><li><strong>labels</strong>：用于为对象打标签（键值对），通过标签，用户可以对多个对象进行分组，并且方便地查询和管理</li><li><strong>annotations</strong>：类似于标签，但通常用于存储非标识性的信息，例如配置或调试信息。与标签不同，<code>Annotations</code> 可以存储更多样的信息，且没有大小限制</li><li><strong>uid</strong>：对象的唯一标识符，在整个集群中是唯一的，通常由 <code>K8s</code> 自动生成，<code>uid</code> 通常用于区分不同版本的同名对象</li><li><strong>creationTimestamp</strong>：对象的创建时间戳，记录该对象在集群中的创建时间</li><li><strong>ownerReferences</strong>：用于描述当前对象的关联对象。通过 <code>ownerReferences</code>，<code>K8s</code> 可以知道哪些对象是依赖于其他对象的，从而进行对象的级联删除等操作</li></ul></li><li><code>spec</code>：规格，是您创建或配置 <code>K8s</code> 对象时所提供的描述，它定义了您希望对象是什么样子的。例如您想让一个 <code>Deployment</code> 控制器对象拥有 <code>3</code> 个副本（<code>Pod</code>），那么在 <code>spec</code> 中您会明确指出这个要求，这个字段是用户自己编写的。</li><li><code>status</code>：状态，描述的是 <code>K8s</code> 系统当前实际管理的状态，它是由 <code>K8s</code> 自动更新的。这意味着，系统会根据 <code>spec</code> 所描述的期望状态来调整实际的运行情况。例如，如果您要求 <code>3</code> 个副本，而由于某些原因其中一个 <code>Pod</code> 没有运行，<code>Kubernetes</code> 会通过启动新的 <code>Pod</code> 来确保 <code>spec</code> 中定义的副本数始终得到满足，这个字段是 <code>K8s</code> 自己管理的。</li></ul><p><code>K8s</code> 控制平面会持续监控 <code>spec</code> 和 <code>status</code> 之间的差异，并自动调整系统状态（比如启动一个新的对象实例来满足需要），确保它符合您的期望。基本的理论知识我们都有了，这里我们简单演示一下关于 <code>K8s</code> 的命令行工具来构建一个可用的 <code>K8s</code> 集群。</p><h4 id="_3-5-1-minikube" tabindex="-1"><a class="header-anchor" href="#_3-5-1-minikube"><span>3.5.1.Minikube</span></a></h4><p>实际上我很推荐您使用 <code>Minikube</code> 进行单机测试学习使用的，<code>Minikube</code> 可以使用容器技术，快速部署一个简单的 <code>K8s</code> 集群在本地，进而可以使用 <code>K8s</code> 的原生命令行客户端工具 <code>kubectl</code> 来操作集群。对比起来，如果直接自己手动部署一个集群，这个学习曲线可能让您感到沮丧...不过万幸的是我们可以利用 <code>Minikube</code> 度过这个难关不是么~</p><h5 id="_3-5-1-1-minikube-的集群创建" tabindex="-1"><a class="header-anchor" href="#_3-5-1-1-minikube-的集群创建"><span>3.5.1.1.Minikube 的集群创建</span></a></h5><p>我们先来设置一些方便您操作的权限配置，以及启动本主机的一个 <code>K8s</code> 集群。</p><ul><li><code>minikube start</code> 初始化并且启动集群</li><li><code>minikube stop</code> 停止集群</li><li><code>minikube delete</code> 删除集群</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 minilube 初始化集群</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 给当前用户设置启动 docker 不需要使用 sudo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> usermod</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -aG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $USER</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 将当前用户添加到 docker 组中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newgrp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 立即更新当前 shell 会话中的用户组, 使得新加入的 docker 组生效</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建 Minikube 集群</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --nodes=3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --docker-env</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTTP_PROXY=http://192.168.101.254:7890</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --docker-env</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTTPS_PROXY=http://192.168.101.254:7890</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --docker-env</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NO_PROXY=localhost,127.0.0.1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 启动 3 个 Node, 默认第一个 Node 为主节点其他为工作节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实际上 minikube start 这个指令拉取了镜像文件(默认使用 Docker 工具拉取)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 sudo docker image ls 来查看拉取的镜像文件如下</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># gcr.io/K8s-minikube/kicbase   v0.0.45   aeed0e1d4642   4 weeks ago   1.28GB</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># gcr.io/K8s-minikube/kicbas 这个基础镜像内部包含了运行 K8s 的基础工具), 适用于 Minikube 的 KIC 功能(K8s In Docker, 一个在 Docker 容器中运行 K8s 的方法), minikube start 会启动这个镜像为容器, 方便开发者快速进行核心组件的集群部署, 您可以使用 sudo docker container ls 进行查看</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以看到代理配置成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> info</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> proxy</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> HTTP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Proxy:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://192.168.101.254:7890</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> HTTPS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Proxy:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://192.168.101.254:7890</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Proxy:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localhost,127.0.0.1,10.96.0.0/12,192.168.59.0/24,192.168.49.0/24,192.168.39.0/24</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：强烈推荐在学习阶段配置 <code>alias kubectl=&quot;minikube kubectl --&quot;</code> 提高终端体验，<code>Minikube</code> 自带一个 <code>kubectl</code> 客户端, 和 <code>Minikube</code> 兼容性较好，这也是一个最佳实践。当然，如果您愿意尝试用我们之前下载的原生命令行客户端工具 <code>kubectl</code> 也是可以的，有问题再切换就可以。</p></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>警告：如果在上面的内容中，您发现您的集群启动异常，很可能需要对 <code>Docker</code> 做一些魔法处理（上述 <code>--docker-env HTTP_PROXY=http://192.168.101.254:7890 --docker-env HTTPS_PROXY=http://192.168.101.254:7890 --docker-env NO_PROXY=localhost,127.0.0.1</code> 就是配置代理的过程）。或者启动集群后，再进入 <code>minikube</code> 容器内部，把宿主主机拉取的 <code>minikube</code> 集群的核心组件手动传输到 <code>minikube</code> 容器中（无需手动运行核心组件，拉取成功后退出集群容器回到宿主主机即可自动启动）。这里记录下本教程中使用的 <code>K8s</code> 架构中核心组件镜像的版本，以供您进行参考。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 记录核心组件的版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kindest/kindnetd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                          v20240813-c6f155d6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   12968670680f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    85.8MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/kube-scheduler</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              1766f54c897f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    67.4MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/kube-controller-manager</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              045733566833</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    88.4MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/kube-apiserver</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              604f5db92eaa</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    94.2MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/kube-proxy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              ad83b2ca7b09</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    91.5MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/etcd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      3.5.15-0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             2e96e5913fc0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    148MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/pause</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                     3.10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 873ed7510279</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   8</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    736kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.k8s.io/coredns/coredns</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           v1.11.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              cbb01a7bd410</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   59.8MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">gcr.io/k8s-minikube/storage-provisioner</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   6e38f40d628d</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> years</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     31.5MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>实际上在 <code>minilube</code> 中使用的 <code>K8s</code> 集群是装载进一个容器中运行的，而容器内部又下载了镜像文件，运行了多个子容器（这种现象就是 <code>KIC</code>），这些子容器都是 <code>K8s</code> 的核心组件（就是我们之前提到的架构中的每一个小组件）。因此，如果环境不支持嵌套虚拟化，是没办法运行 <code>minilube</code> 工具的。</p><p>简单来说，<code>minikube</code> 通过一个镜像文件创建了一个 <code>Node</code> 容器，而该 <code>Node</code> 容器内部又运行多个 <code>Pod</code> 容器，用来，用来部署 <code>K8s</code> 中的核心组件和用户指定的 <code>Pod</code>。这样对于用户来说，一个 <code>gcr.io/k8s-minikube/kicbase</code> 运行起来的容器就直接是一个成形的集群。</p><p>这样用户不需要一上来就解决 <code>K8s</code> 的核心组件问题，而是直接在工作节点上创建管理 <code>Pod</code> 的控制器，进而直接创建 <code>Pod</code> 节点来使用。因此所谓的 <code>Minikube</code> 用于本机部署的意思是主节点容器和工作节点容器都运行在运行在主机上。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 探究集群的原理</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示本机网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ifconfig</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 注意每台主机的网卡信息不同, </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (1) br-cfa65467e0ff: 桥接网络，用于 Docker 容器之间的网络通信。br- 表示它是 Docker 创建的桥接网络接口。该接口的 IP 地址是 192.168.49.1, 它是 Docker 容器的宿主机与容器之间的通信网段</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (2) br-eacc59fd10d9: 这是另一个 Docker 桥接网络接口, 与第一个类似，br- 前缀表示它是 Docker 创建的。它的 IP 地址是 172.18.0.1, 可能属于某个特定的 Docker 容器网络, 它用于容器间的通信</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (3) br-76a325f39805: 也和前面类似, 不过 IP 地址是 192.168.49.1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (4) docker0: 本地 Docker 默认创建的 桥接网络接口，通常会在宿主机上看到该接口。它的 IP 地址是 172.17.0.1, 是 Docker 默认网络的桥接接口，用于容器与宿主机的通信</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (5) enp5s0: 物理网络接口, 表示宿主机上的以太网接口。该接口的 IP 地址是 192.168.101.254，通常用于与外部网络(例如互联网)通信, 这是我的路由器默认分配给我的本机 IP 地址</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (6) lo: 本地环回接口, 它的 IP 地址是 127.0.0.1, 用于宿主机内部通信, 不会经过物理网络。所有发送到 127.0.0.1 的流量都被返回到本地机器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示 K8s 集群的大概信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cluster-info</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">K8s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> control</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plane</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://192.168.49.2:8443</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这行表示 K8s 控制平面(其实就是之前架构图中提到的 K8s 核心组件)正在运行，并且暴露在 https://192.168.49.2:8443 地址上(这个 IP 地址是在虚拟网卡 br-76a325f39805 那得到的, 因为 br-76a325f39805 的地址为 192.168.49.1, 您可以把它理解为类似路由器的 IP 地址, Linux 下创建虚拟网卡并且分配虚拟地址的指令是使用 &#39;ip&#39;, 您可以研究一下)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CoreDNS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这行表示 K8s 中的 DNS 服务 CoreDNS 正在运行, 并且它可以通过地址 CoreDNS is running at https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy 访问</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 其中: 控制平面是 K8s 集群的核心, 负责全局管理和调度任务, 它决定集群的状态, 并确保集群在期望的状态下运行。控制平面由多个组件构成, 主要包括:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># kube-apiserver, etcd, kube-scheduler, kube-controller-manager, cloud-controller-manager</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">To</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> debug</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> diagnose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cluster</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> problems,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kubectl cluster-info dump</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示 K8s 集群的所有 Node</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nodes</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这些 Node 对于宿主主机来说其实就是三个 Docker 容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ROLES</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           AGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     VERSION</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    control-plane</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   2m47s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Ready</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          2m33s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube-m03</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Ready</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          2m23s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示 K8s 集群的所有 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --all-namespaces</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查看所有的 pod, pod 通常代表 K8s 中的一个最小调度单位(可以由一个或多个容器组成), 可以理解为一个逻辑主机, 拥有唯一的 ip 地址, 共享网络端口资源, 共享存储卷资源, 简化指令为 kubectl get pod -A</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                               READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      AGE</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Etcd-minikube 就是上面我们提到的分布式键值存储系统 Etcd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   etcd-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># kube-apiserver-minikube 就是上面我们提到的繁忙的 api server</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-apiserver-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># kube-controller-manager-minikube 就是上面我们提到的管理 pod 生命周期的控制器 controller</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-controller-manager-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># kube-scheduler-minikube 就是上面我们提到用来提交任务分配的调度器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-scheduler-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># kube-proxy-xxx 就是上面我们提到的用来网络负载均衡的网络代理</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-2h85l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             2m51s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             3m1s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-xj2gq</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             3m8s</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># storage-provisioner 自动化存储卷, 以后再来理解</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   storage-provisioner</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (76m </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ago</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)   76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># coredns 是 K8s 默认的 DNS 服务, 负责集群内部的 DNS 解析, 以后再来理解</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   coredns-6f6b679f8f-xflf5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             76m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 这些 pod 其实就是 gcr.io/K8s-minikube/kicbase 镜像运行为容器后中的子容器, 这也就是为什么我说 Minikube 适合学习的原因</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 另外这些容器都属于同一个命名空间 kube-system</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看宿主机上运行的容器, 下面的 minikube 就是 Main Node</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                 COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                                                                                                  NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5cdda7e5aa79</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   gcr.io/k8s-minikube/kicbase:v0.0.45</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/entr…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   127.0.0.1:32894</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">22/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32895</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2376/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32896</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5000/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32897</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32898</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">32443/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   minikube-m03</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">9dc4efb36f66</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   gcr.io/k8s-minikube/kicbase:v0.0.45</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/entr…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   127.0.0.1:32889</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">22/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32890</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2376/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32891</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5000/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32892</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32893</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">32443/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3812c9757a00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   gcr.io/k8s-minikube/kicbase:v0.0.45</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/entr…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   127.0.0.1:32884</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">22/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32885</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2376/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32886</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5000/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32887</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8443/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:32888</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">32443/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   minikube</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入 Main Node 容器内部, 可以查看所有的核心组件 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e0ba04cd8dd0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   cbb01a7bd410</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/coredns -conf /etc…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_coredns_coredns-6f6b679f8f-xflf5_kube-system_4b154a73-befe-48f9-b841-5211991e90a1_3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f00e5b7b0eac</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_coredns-6f6b679f8f-xflf5_kube-system_4b154a73-befe-48f9-b841-5211991e90a1_3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">c75048742c3b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindest/kindnetd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">             &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/kindnetd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kindnet-cni_kindnet-9t8hv_kube-system_dd817e5b-b30c-4dc6-9366-5035a0d946d3_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">9841cbf8ead1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   6e38f40d628d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/storage-provisioner</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_storage-provisioner_storage-provisioner_kube-system_4aecf7af-9913-4b41-bcae-a2240943bd22_2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6e80516a702c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ad83b2ca7b09</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/kube…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kube-proxy_kube-proxy-xj2gq_kube-system_2e606df4-a47a-4a05-985d-04fca60b9d05_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e3797719160c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kube-proxy-xj2gq_kube-system_2e606df4-a47a-4a05-985d-04fca60b9d05_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">089cb80ca863</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kindnet-9t8hv_kube-system_dd817e5b-b30c-4dc6-9366-5035a0d946d3_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e2dfd0fe8a9b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_storage-provisioner_kube-system_4aecf7af-9913-4b41-bcae-a2240943bd22_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">57adc388a407</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   045733566833</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kube-controller-man…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kube-controller-manager_kube-controller-manager-minikube_kube-system_40f5f661ab65f2e4bfe41ac2993c01de_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">206eeee7d47e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1766f54c897f</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kube-scheduler --au…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kube-scheduler_kube-scheduler-minikube_kube-system_e039200acb850c82bb901653cc38ff6e_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">39681a2e0b44</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   604f5db92eaa</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kube-apiserver --ad…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kube-apiserver_kube-apiserver-minikube_kube-system_9e315b3a91fa9f6f7463439d9dac1a56_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">c6ccfe2e7f7e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   2e96e5913fc0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">etcd --advertise-cl…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_etcd_etcd-minikube_kube-system_a5363f4f31e043bdae3c93aca4991903_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3f35da357f61</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kube-controller-manager-minikube_kube-system_40f5f661ab65f2e4bfe41ac2993c01de_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5f10123440ba</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kube-apiserver-minikube_kube-system_9e315b3a91fa9f6f7463439d9dac1a56_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4f9db6e0263a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kube-scheduler-minikube_kube-system_e039200acb850c82bb901653cc38ff6e_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">62f723da91f5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_etcd-minikube_kube-system_a5363f4f31e043bdae3c93aca4991903_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入 Work Node 容器内部, 可以查看所有的基本组件 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@minikube-m02:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a250df11361a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_nginx_nginx-deployment-7cf9b95bd5-r797s_default_e444c454-c6a2-42ca-a84e-dee29d06819f_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a86cfc170b0b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_nginx_nginx-deployment-7cf9b95bd5-c88qc_default_75c31971-7280-4a66-acb7-1cf538e98c3d_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5e5482262fee</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_nginx_nginx-deployment-7cf9b95bd5-9jqdm_default_d222b310-971c-46bc-a302-dd6eee5243f2_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4cddf348ba7f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_POD_nginx-deployment-7cf9b95bd5-9jqdm_default_d222b310-971c-46bc-a302-dd6eee5243f2_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">98713e4dee38</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_POD_nginx-deployment-7cf9b95bd5-c88qc_default_75c31971-7280-4a66-acb7-1cf538e98c3d_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">b920e32d9cb8</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 k8s_POD_nginx-deployment-7cf9b95bd5-r797s_default_e444c454-c6a2-42ca-a84e-dee29d06819f_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d50df30392c7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindest/kindnetd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">             &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/kindnetd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kindnet-cni_kindnet-wsgcj_kube-system_ec064913-74c3-4487-986c-e5879bebf1e2_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f84713ca63b6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ad83b2ca7b09</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                 &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/kube…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_kube-proxy_kube-proxy-mcmn7_kube-system_502038ee-d61b-4a8d-b94d-a6353e5713ea_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1057f505bbbe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kube-proxy-mcmn7_kube-system_502038ee-d61b-4a8d-b94d-a6353e5713ea_0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">b99b34c5ae63</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   registry.k8s.io/pause:3.10</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/pause</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             k8s_POD_kindnet-wsgcj_kube-system_ec064913-74c3-4487-986c-e5879bebf1e2_0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-5-1-3-minilube-的集群查看" tabindex="-1"><a class="header-anchor" href="#_3-5-1-3-minilube-的集群查看"><span>3.5.1.3.Minilube 的集群查看</span></a></h5><ul><li><code>kubectl cluster-info</code> 显示本机所部署集群的基本信息</li></ul><h5 id="_3-5-1-4-minikube-的集群启停" tabindex="-1"><a class="header-anchor" href="#_3-5-1-4-minikube-的集群启停"><span>3.5.1.4.Minikube 的集群启停</span></a></h5><ul><li><code>minikube start</code> 启动集群</li><li><code>minikube paus</code> 暂停集群（就相当于冻结容器的运行）</li><li><code>minikube unpaus</code> 启动集群</li><li><code>minikube stop</code> 停止集群（就相当于关闭容器的运行）</li><li><code>minikube delete</code> 销毁集群</li></ul><p>不过先不要暂停、暂停、销毁集群，先保持 <code>minikube start</code> 的执行，我们后面有用。</p><h5 id="_3-5-1-5-minikube-的集群操作" tabindex="-1"><a class="header-anchor" href="#_3-5-1-5-minikube-的集群操作"><span>3.5.1.5.Minikube 的集群操作</span></a></h5><p>这里的集群操作主要指的是关于 <code>Node、Pod</code> 的一些常规操作，不涉及对象的操作。</p><h5 id="_3-5-1-6-minikube-的集群对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-minikube-的集群对象"><span>3.5.1.6.Minikube 的集群对象</span></a></h5><h6 id="_3-5-1-6-1-普通对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-1-普通对象"><span>3.5.1.6.1.普通对象</span></a></h6><ul><li><p><code>kubectl get &lt;资源对象类别+s&gt; [--all-namespaces | -n &lt;指定的命名空间名&gt;]</code> 可以查看某一类资源（默认查看命名空间 <code>default</code>），可以附带选项 <code>--all-namespaces</code> 查看所有的命名空间下同种类资源的信息，也可以使用 <code>-n &lt;指定的命名空间名&gt;</code> 来指定在某个命名空间下查询</p></li><li><p><code>kubectl get &lt;资源对象类别(不加s)&gt; &lt;资源实例名称&gt; [...]</code> 这里举几个例子供您参考一下：</p><ul><li><code>kubectl get &lt;资源对象类别(不加s)&gt; &lt;资源实例名称&gt; -o yaml &gt; &lt;控制器名称&gt;.yaml</code>：可以导出配置文件以迁移到别处（导出的配置文件可能包含自动填充的字段），不过有些时候我们可能只需要导出一部分信息进行查看，这个时候可以使用 <code>kubectl get &lt;资源种类&gt;&lt;资源实例&gt; -o custom-columns=&quot;&lt;第一列列名&gt;:.&lt;配置文件顶层元素&gt;.&lt;顶层元素的子元素&gt;..., &lt;第二列列名&gt;:.&lt;配置文件顶层元素&gt;.&lt;顶层元素的子元素&gt;..., ...</code> 自定义列来实现。</li><li><code>kubectl get nodes [--show-labels] [-o wide]</code> 显示所有 <code>node</code> 的信息，如果携带 <code>--show-labels</code> 则会给出 <code>node</code> 的标签，<code>-o wide</code> 则会显示所有 <code>Node</code> 的 <code>IP</code> 地址。</li><li><code>kubectl get pods [--show-labels] [--all-namespaces | -n &lt;指定的命名空间名&gt;] [--field-selector spec.nodeName=&lt;node_name&gt;]</code> 可以显示所有命名空间的 <code>pod</code> 信息（不加选项默认显示 <code>default</code> 命名空间，如果需要指定命名空间则使用 <code>kubectl get pods -n &lt;命名空间名称&gt;</code>），还可以使用过滤器 <code>--field-selector</code> 指定在某一个 <code>Node</code> 中查看 <code>Node</code></li><li><code>kubectl get event</code> 获取集群创建过程的历史事件</li><li><code>kubectl get ns</code> 获取集群中的所有命名空间，用户的普通应用默认是在 <code>default</code> 下，与集群管理相关的为整个集群提供服务的应用一般部署在 <code>kube-system</code> 下，在安装 <code>K8s</code> 集群时部署的 <code>kubedns</code>、<code>heapseter</code>、<code>EFK</code> 等都是在这个 <code>namespace</code> 下面。另外，并不是所有的资源对象都会对应 <code>namespace</code>，<code>node</code> 资源对象就不属于任何 <code>namespace</code>（其实还有存储对象 <code>persistentVolume</code> 也不属于任何 <code>namespace</code>）。</li></ul></li><li><p><code>kubectl describe 资源类型 资源名称 [-n 命名空间]</code> 查看指定资源的详细信息</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 详细查看 Main Node 资源对象的信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> describe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 当前节点的名称</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               minikube</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点所任角色</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Roles:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              control-plane</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 控制平面, 意味着它承担着管理和控制 K8s 集群的任务, 此节点不应该运行应用程序工作负载 Pod</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点标签标识</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Labels:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             beta.kubernetes.io/arch=amd64</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 列出了一些标签, 用于标识节点的不同属性</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    beta.kubernetes.io/os</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    kubernetes.io/arch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=amd64</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    kubernetes.io/hostname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=minikube</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    kubernetes.io/os</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    minikube.k8s.io/commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=210b148df93a80eb872ecbeb7e35281b3c582c61</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    minikube.k8s.io/name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=minikube</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    minikube.k8s.io/primary</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">true</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    minikube.k8s.io/updated_at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=2025_02_17T14_25_26_0700</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    minikube.k8s.io/version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=v1.34.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    node-role.kubernetes.io/control-plane</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    node.kubernetes.io/exclude-from-external-load-balancers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点的元数据</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Annotations:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        kubeadm.alpha.kubernetes.io/cri-socket:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unix:///var/run/cri-dockerd.sock</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    node.alpha.kubernetes.io/ttl:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    volumes.kubernetes.io/controller-managed-attach-detach:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点创建时间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CreationTimestamp:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点没有污点</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Taints:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">             &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 意味着没有限制 Pods 在此节点上运行, 后续会介绍</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点可以调度</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Unschedulable:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      false</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 表示此节点是可调度的, 即可以调度 Pod 到这个节点</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Lease:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  HolderIdentity:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  minikube</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  AcquireTime:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">     &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unse</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">t</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  RenewTime:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:03:32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点当前状态</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># MemoryPressure: False, 表示没有内存压力</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># DiskPressure: False, 表示没有磁盘压力</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># PIDPressure: False, 表示没有进程 ID 压力</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Ready: True, 表示节点处于就绪状态, 能够接收调度的 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Conditions:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             Status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  LastHeartbeatTime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 LastTransitionTime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                Reason</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       Message</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">             ------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -----------------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                 ------------------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                ------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                       -------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  MemoryPressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   False</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:01:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   KubeletHasSufficientMemory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> has</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sufficient</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> memory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  DiskPressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     False</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:01:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   KubeletHasNoDiskPressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> has</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> no</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disk</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pressure</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PIDPressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      False</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:01:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   KubeletHasSufficientPID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> has</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sufficient</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            True</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:01:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   KubeletReady</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> posting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点地址信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Addresses:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  InternalIP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  192.168.49.2</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 节点的内网 IP</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Hostname:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    minikube</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 节点的主机名</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点资源总量</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Capacity:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  cpu:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                16</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ephemeral-storage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  473908312Ki</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-1Gi:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-2Mi:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  memory:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             49167224Ki</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  pods:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">               110</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点实际资源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Allocatable:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  cpu:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                16</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ephemeral-storage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  473908312Ki</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-1Gi:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-2Mi:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  memory:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             49167224Ki</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  pods:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">               110</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点系统信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">System</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Info:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Machine</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 77c592d00fc94022aa4fa8a4bde53396</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 与主机硬件相关的标识符</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  System</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UUID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                0f96c20f-ab31-4e56-bdfa-6b7e00e0509e</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    f544981b-3d63-469f-8869-5201475fdb2f</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             6.8.0-51-generic</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 节点使用的 Linux 内核版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  OS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   Ubuntu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 22.04.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LTS</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 节点运行的是 Ubuntu 操作系统</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Operating</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> System:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Architecture:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               amd64</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Runtime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker://27.2.0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 容器运行时是 Docker 版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            v1.31.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Kube-Proxy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">         </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PodCIDR:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      10.244.0.0/24</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PodCIDRs:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     10.244.0.0/24</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点活跃 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Non-terminated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pods:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          (8 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> total</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Namespace</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   Name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Limits</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Memory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Memory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Limits</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Age</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ---------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                   ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                                ------------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  ----------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  ---------------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -------------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 coredns-6f6b679f8f-hnvtn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            100m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)     0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      70Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)        170Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)     38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 etcd-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       100m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)     0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      100Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)       0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kindnet-pr6ss</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       100m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)     100m (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)   50Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)        50Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kube-apiserver-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             250m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1%)     0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)           0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kube-controller-manager-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    200m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1%)     0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)           0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kube-proxy-qbj7j</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                    0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)        0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)           0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 kube-scheduler-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             100m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)     0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)           0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 storage-provisioner</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)        0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)           0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)         38m</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点已配资源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Allocated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> resources:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limits</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> may</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> be</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> over</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> percent,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> i.e.,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overcommitted.</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Resource</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Limits</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">           --------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  cpu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                850m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (5%)   100m (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  memory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             220Mi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)  220Mi (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ephemeral-storage</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-1Gi</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  hugepages-2Mi</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0%)      0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 节点事件历史</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Events:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Reason</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   Age</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   From</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             Message</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">                   ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">             -------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">       </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubelet.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  NodeAllocatableEnforced</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Updated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Allocatable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  NodeHasSufficientMemory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> now:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NodeHasSufficientMemory</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  NodeHasNoDiskPressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> now:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NodeHasNoDiskPressure</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  NodeHasSufficientPID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> now:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NodeHasSufficientPID</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  RegisteredNode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           38m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   node-controller</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> event:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Registered</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Controller</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 详细查看 Main Node 中某个 Pod 资源对象的信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">describe </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 代表要查看资源的详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pod</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 要查看资源的类型</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">etcd-minikube</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 要查看的资源的名称</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kube-system</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 要查看的资源的命名空间</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 合起来为 kubectl describe pod etcd-minikube -n kube-system</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 etcd-minikube</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            kube-system</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Priority:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">             2000001000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Priority</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Class</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  system-node-critical</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Node:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 minikube/192.168.49.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Time:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:25</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Labels:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               component=etcd</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">                      tier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">control-plane</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Annotations:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          kubeadm.kubernetes.io/etcd.advertise-client-urls:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://192.168.49.2:2379</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                      kubernetes.io/config.hash:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a5363f4f31e043bdae3c93aca4991903</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                      kubernetes.io/config.mirror:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a5363f4f31e043bdae3c93aca4991903</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                      kubernetes.io/config.seen:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2025-02-17T06:25:25.360443311Z</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                      kubernetes.io/config.source:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               Running</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SeccompProfile:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       RuntimeDefault</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                   192.168.49.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IPs:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  IP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">           192.168.49.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Controlled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> By:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Node/minikube</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Containers:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  etcd:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker://590666f529a2353afea2a8ae7a405efb1f8b2421be2d73d2cd8eda58dfd78d67</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         registry.k8s.io/etcd:3.5.15-0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      docker-pullable://registry.k8s.io/etcd@sha256:a6dc63e6e8cfa0307d7851762fa6b629afb18f28d8aa3fab5a6e91b4af60026a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Port:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">          &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">     &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Command:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      etcd</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --advertise-client-urls</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://192.168.49.2:2379</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --cert-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/server.crt</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --client-cert-auth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --data-dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/etcd</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --experimental-initial-corrupt-check</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --experimental-watch-progress-notify-interval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5s</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --initial-advertise-peer-urls</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://192.168.49.2:2380</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --initial-cluster</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">minikube</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://192.168.49.2:2380</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --key-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/server.key</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --listen-client-urls</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://127.0.0.1:2379,https://192.168.49.2:2379</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --listen-metrics-urls</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://127.0.0.1:2381</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --listen-peer-urls</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://192.168.49.2:2380</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">minikube</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --peer-cert-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/peer.crt</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --peer-client-cert-auth</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --peer-key-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/peer.key</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --peer-trusted-ca-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/ca.crt</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --proxy-refresh-interval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">70000</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --snapshot-count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10000</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">      --trusted-ca-file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/minikube/certs/etcd/ca.crt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    State:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Running</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      Started:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:25:22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Ready:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          True</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Count:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Requests:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      cpu:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        100m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      memory:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     100Mi</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Liveness:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     http-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:2381/livez</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delay=10s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timeout=15s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> period=10s</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #success=1 #failure=8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Readiness:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    http-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:2381/readyz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delay=0s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timeout=15s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> period=1s</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #success=1 #failure=3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Startup:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      http-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:2381/readyz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delay=10s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timeout=15s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> period=10s</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #success=1 #failure=24</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Environment:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Mounts:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      /var/lib/minikube/certs/etcd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> etcd-certs</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (rw)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      /var/lib/minikube/etcd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> etcd-data</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (rw)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Conditions:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Status</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PodReadyToStartContainers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Initialized</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ContainersReady</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PodScheduled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Volumes:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  etcd-certs:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          HostPath</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (bare </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /var/lib/minikube/certs/etcd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    HostPathType:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  DirectoryOrCreate</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  etcd-data:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          HostPath</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (bare </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /var/lib/minikube/etcd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    HostPathType:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  DirectoryOrCreate</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">QoS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Class:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         Burstable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Node-Selectors:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Tolerations:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       :NoExecute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> op=Exists</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Events:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">            &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>kubectl label &lt;资源对象类别&gt; &lt;资源实例名称&gt; &lt;label_name=label_value&gt;</code> 可以添加或更新资源实例的标签，另外其实也可以使用 <code>kubectl label &lt;资源对象类别&gt;s -l &lt;select_label_name=select_label_value&gt; &lt;label_name=label_value&gt;</code> 这将为所有标签为 <code>select_label_name=select_label_value</code> 的资源对象添加或更新 <code>label_name=label_value</code> 标签。如果需要取消标签，则在对于标签的后面紧跟着 <code>-</code> 符号即可去除标签。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外 <code>-l</code> 后的标签除了使用 <code>=、==、!=</code> 都是可以的，还可以使用 <code>in</code>、<code>notin</code>、<code>!</code> 操作符，设置还可以没有操作符，直接写出某个 <code>label</code> 的 <code>lable_name</code>，表示过滤有某个 <code>label_name</code> 的资源对象而不管该 <code>label_name</code> 的 <code>label_value</code> 是何值，其中 <code>!</code> 表示返回没有该 <code>label_name</code> 的资源对象集合的操作。并且在后面，我们可以使用配置文件来为某些对象打上标签。<code>-l</code> 也可以应用在别处，用来快速匹配指定的资源对象后进行操作。</p></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>警告：一个 <code>Pod</code> 死亡后，原本在命令行处配置的标签会消失，但是配置文件处指定了元数据就会继承模板中的设置。</p></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实验指令</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看当前的节点和对应标签信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nodes</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --show-labels</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ROLES</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           AGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    VERSION</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   LABELS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    control-plane</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   174m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube,kubernetes.io/os=linux,minikube.k8s.io/commit=210b148df93a80eb872ecbeb7e35281b3c582c61,minikube.k8s.io/name=minikube,minikube.k8s.io/primary=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,minikube.k8s.io/updated_at=2025_02_17T14_25_26_0700,minikube.k8s.io/version=v1.34.0,node-role.kubernetes.io/control-plane=,node.kubernetes.io/exclude-from-external-load-balancers=</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Ready</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          174m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube-m02,kubernetes.io/os=linux,minikube.k8s.io/commit=210b148df93a80eb872ecbeb7e35281b3c582c61,minikube.k8s.io/name=minikube,minikube.k8s.io/primary=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,minikube.k8s.io/updated_at=2025_02_17T14_25_37_0700,minikube.k8s.io/version=v1.34.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minikube-m03</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Ready</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          174m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   v1.31.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube-m03,kubernetes.io/os=linux,minikube.k8s.io/commit=210b148df93a80eb872ecbeb7e35281b3c582c61,minikube.k8s.io/name=minikube,minikube.k8s.io/primary=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,minikube.k8s.io/updated_at=2025_02_17T14_25_48_0700,minikube.k8s.io/version=v1.34.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 给其中的一个工作节点配置标签</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> label</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> role=worker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node/minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> labeled</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>kubectl create/delete -f &lt;./xxx.yaml&gt; [--cascade=true/false]</code> 可以根据资源清单来创建所描述的资源对象/销毁所描述的资源对象，或直接使用命令行创建（不过不常用），我们可以尝试在描述文件中创建控制器并指定 <code>Pod</code> 的副本数，指定控制器的命名空间，指定标签，指定控制器下副本内的容器启动指令...创建控制器的同时就会自动调度到某个 <code>Node</code> 中，也可以手动制定调度目标节点（关于 <code>.yaml</code> 文件的编写后面我再细说...）。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：<code>--cascade</code> 需要补充后面垃圾回收的级联删除模式才能彻底理解，只有在设置 <code>--cascade=true</code> 时，会按照依赖关系级联删除。当使用 <code>--cascade=false</code> 时，删除操作不会级联影响到关联的子资源（级联规则失效）。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：指定配置文件使用 <code>delete</code> 进行销毁时，只会删除对应配置文件中定义的资源，这很方便，对于 <code>Cpper</code> 有些受宠若惊（哈）。</p></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实验指令</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx-deployment.yaml</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx-deployment.yaml</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># nginx-deployment.yaml</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 这个配置定义了一个名为 nginx-deployment 的 Deployment, 它根据模板管理 3 个 Nginx 容器实例, 并确保它们始终保持运行, 每个容器都暴露了端口 80</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apiVersion:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apps/v1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定 api server 组件的版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kind:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Deployment</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定资源种类</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">metadata:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定元数据</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx-deployment</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定元数据 - 本资源的名字为 nginx-deployment</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">spec:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	replicas:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 副本为 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	selector:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - Pod 选择器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    	matchLabels:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - Pod 选择器 - 描述需选的 Pod 携带标签为 app=nginx 的 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">			app:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">	template:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">		metadata:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板 - 元数据</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">			labels:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">				app:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">		spec:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板 - 规格</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">			nodeSelector:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板 - 规格 - Node 选择器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        		role:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> worker</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板 - 规格 - Node 选择器 - 描述需选的 Node 携带标签为 role=worker 的 Node</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">			containers:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定规格 - 模板 - 规格 - 容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">				-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">				  image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.27.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">				  ports:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">					-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containerPort:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 利用上面的配置文件创建对象</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> create</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./nginx-deployment.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看新 Pod 的状态和信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          83m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          83m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> describe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx-deployment-7cf9b95bd5-9jqdm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             nginx-deployment-7cf9b95bd5-9jqdm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        default</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Priority:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Account:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  default</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Node:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             minikube-m02/192.168.49.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Time:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 20:21:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Labels:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           app=nginx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">                  pod-template-hash</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">7cf9b95bd5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Annotations:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">      &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           Running</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">               10.244.1.14</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IPs:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  IP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">           10.244.1.14</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Controlled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> By:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  ReplicaSet/nginx-deployment-7cf9b95bd5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Containers:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  nginx:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   docker://5e5482262feee5b06d0867e3f0303c9289851528e4f729da10507510a749a8b5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          nginx:1.27.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       docker-pullable://nginx@sha256:91734281c0ebfc6f1aea979cffeed5079cfe786228a71cc6f1f46a228cde6e34</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Port:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           80/TCP</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      0/TCP</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    State:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          Running</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      Started:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Mon,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Feb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2025</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 20:21:36</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +0800</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Ready:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          True</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Count:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Environment:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">non</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Mounts:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      /var/run/secrets/kubernetes.io/serviceaccount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kube-api-access-679kz</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ro)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Conditions:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Status</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PodReadyToStartContainers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Initialized</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ContainersReady</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PodScheduled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                True</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Volumes:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  kube-api-access-679kz:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    Projected</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (a </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">volume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> that</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> contains</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> injected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> multiple</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sources</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    TokenExpirationSeconds:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  3607</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ConfigMapName:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           kube-root-ca.crt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ConfigMapOptional:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">       &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ni</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    DownwardAPI:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">             true</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">QoS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Class:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   BestEffort</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Node-Selectors:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              role=worker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Tolerations:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 node.kubernetes.io/not-ready:NoExecute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> op=Exists</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 300s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                             node.kubernetes.io/unreachable:NoExecute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> op=Exists</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 300s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Events:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Reason</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Age</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   From</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               Message</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">     ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  ----</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">               -------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Scheduled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  19m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   default-scheduler</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Successfully</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> assigned</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default/nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    19m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx:1.27.4</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Pulled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     18m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Successfully</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pulled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx:1.27.4</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 22.903s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (22.903s </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">including</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> waiting</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">). Image size: 191994076 bytes.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    18m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Started</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    18m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kubelet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            Started</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>kubectl apply -f &lt;./xxx.yaml&gt;</code> 重新加载配置文件</p></li><li><p><code>kubectl cordon/uncordon &lt;node_name&gt;</code> 拉起警戒线/取消警戒线（并且还会顺带解开取消调度），禁止继续调度 <code>Pod</code> 到 <code>Node</code> 中，但它不会影响已经调度到该节点的 <code>Pod。</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实验指令</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看工作节点的详情</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> describe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Unschedulable:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      false</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 表示此节点是可调度的, 即可以调度 Pod 到这个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看工作节点内现有的所有 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          48m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          48m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          48m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          117m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          117m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拉起警戒线</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cordon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 依旧留有之前的 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          54m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          54m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          54m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          123m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          123m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 再次查看工作节点的详情, 发生变动</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> describe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Unschedulable:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">      true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 表示此节点不可调度的, 即无法调度 Pod 到这个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>kubectl drain/uncordon &lt;node_name&gt; [--ignore-daemonsets] [--selector=label_name=label_value]</code> 排空/恢复一个节点，排空操作会把所有的 <code>Pod</code> 从 <code>Node</code> 中驱除，还可以根据标签指定驱除的 <code>Pod</code> 类型，并且有时需要使用 <code>--ignore-daemonsets</code> 跳过删除 <code>DaemonSet</code> 管理的 <code>Pod</code>, 因为这种控制器会保证每个结点都有一个提供基础服务的 <code>Pod</code>，<code>K8s</code> 默认不允许驱除这种类型的 <code>Pod</code>（直接使用该命令会自动调用 <code>kubectl cordon &lt;node_name&gt;</code> 命令）。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实验指令</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试驱除所有的 Pod</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          64m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          64m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          64m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          133m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          133m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> drain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node/minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cordoned</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">error:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> drain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">minikube-m02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> due</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cannot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DaemonSet-managed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pods</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (use </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--ignore-daemonsets</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ignore</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): kube-system/kindnet-wsgcj, kube-system/kube-proxy-mcmn7, continuing command...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">There</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pending</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nodes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> be</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> drained:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cannot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DaemonSet-managed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pods</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (use </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--ignore-daemonsets</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ignore</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): kube-system/kindnet-wsgcj, kube-system/kube-proxy-mcmn7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 发现上面这里驱除失败</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          68m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          68m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          68m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          136m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          136m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --show-labels</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    LABELS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          70m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    app=nginx,pod-template-hash=7cf9b95bd5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          70m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    app=nginx,pod-template-hash=7cf9b95bd5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          70m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    app=nginx,pod-template-hash=7cf9b95bd5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          139m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   app=kindnet,controller-revision-hash=65cbdfc95f,k8s-app=kindnet,pod-template-generation=1,tier=node</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          139m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   controller-revision-hash=5976bc5f75,k8s-app=kube-proxy,pod-template-generation=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试忽略 Daemonsets 管理的 Pod 后再次驱除</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> drain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --ignore-daemonsets</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node/minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cordoned</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Warning:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ignoring</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DaemonSet-managed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pods:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kube-system/kindnet-wsgcj,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kube-system/kube-proxy-mcmn7</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">evicting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default/nginx-deployment-7cf9b95bd5-r797s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">evicting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default/nginx-deployment-7cf9b95bd5-c88qc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">evicting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default/nginx-deployment-7cf9b95bd5-9jqdm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pod/nginx-deployment-7cf9b95bd5-9jqdm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> evicted</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pod/nginx-deployment-7cf9b95bd5-r797s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> evicted</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pod/nginx-deployment-7cf9b95bd5-c88qc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> evicted</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node/minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> drained</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 驱除成功, 查看该 Node 内部的状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          160m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          160m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 或者快捷一些, 直接查看所有 Pod 状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-bbqs9</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Pending</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-hvl47</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Pending</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-rqjdk</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Pending</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              14m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   coredns-6f6b679f8f-xflf5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (164m </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ago</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)   165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   etcd-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-9t8hv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-jxzvz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-apiserver-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-controller-manager-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-2h85l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-xj2gq</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-scheduler-minikube</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              165m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   storage-provisioner</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (165m </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ago</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)   165m</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 恢复状态就会自动调度, 因为我们之前定义的资源清单要求 K8s 要尽最大的可能符合我们的合法资源清单</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uncordon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node/minikube-m02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uncordoned</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kubectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pods</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --field-selector</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spec.nodeName=minikube-m02</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAMESPACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                READY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    RESTARTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-5wp2b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          113s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-7pmws</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          113s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       nginx-deployment-7cf9b95bd5-z9t8c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          113s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kindnet-wsgcj</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                       1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          3h7m</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">kube-system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   kube-proxy-mcmn7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    1/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Running</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          3h7m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>当然还有一些比较重要的事情还需要给您解说一下，我在这里只是给您简单说以下概念，在最后我会初步给您使用一个模板文件进行解说，并且使用这个模板文件来进行实践。</p><ul><li><p><strong>注解（Annotation）</strong>：在配置文件的元数据中还可以添加注解，注解的目的不像标签的目的是为了被选择，而是仅供开发人员来查阅而已，例如下面这些信息，回比标签更加自由一些。</p><ul><li>声明配置层管理的字段，使用 <code>annotation</code> 关联这类字段可以用于区分以下几种配置来源：客户端或服务器设置的默认值，自动生成的字段或自动生成的 <code>auto-scaling</code> 和 <code>auto-sizing</code> 系统配置的字段。</li><li>创建信息、版本信息或镜像信息，例如时间戳、版本号、<code>git</code> 分支、<code>PR</code> 序号、镜像哈希值以及仓库地址。</li><li>记录日志、监控、分析或审计存储仓库的指针。</li><li>可以用于 <code>debug</code> 的客户端（库或工具）信息，例如名称、版本和创建信息。</li><li>用户信息，以及工具或系统来源信息、例如来自非 <code>Kubernetes</code> 生态的相关对象的 <code>URL</code> 信息。</li><li>轻量级部署工具元数据，例如配置或检查点。</li><li>负责人的电话或联系方式，或能找到相关信息的目录条目信息，例如团队网站。</li></ul></li><li><p><strong>亲和（Affinity）</strong>：将 <code>Pod</code> 分配到特定 <code>Node</code> 的过程称为 <strong>绑定</strong>，而选择使用哪个 <code>Node</code> 的过程称为 <strong>调度</strong>。而 <code>Pod</code> 在其生命周期中只会被调度一次，一旦 <code>Pod</code> 被调度并绑定到某个节点，<code>K8s</code> 会尝试在该节点上运行 <code>Pod</code>，直到 <code>Pod</code> 停止或者被终止。如果 <code>K8s</code> 无法在选定的节点上启动 <code>Pod</code>（例如 <code>Node</code> 在 <code>Pod</code> 启动前崩溃），那么特定的 <code>Pod</code> 将永远不会启动。而 <strong>亲和策略</strong> 是 <code>K8s</code> 中用于控制 <code>Pod</code> 调度到节点上的规则，它基于标签的匹配来决定 <code>Pod</code> 可以或不能在哪些 <code>Node</code> 上运行，实际上就是描述 <code>Pod</code> 需要在哪些节点或其他 <code>Pod</code> 附近运行的约束规则。</p></li><li><p><strong>污点（Taint）和容忍（Toleration）</strong>：亲和性是 <code>Pod</code> 的一种属性，它使 <code>Pod</code> 被吸引到一类特定的 <code>Node</code>（这可能出于一种软性要求，也可能是硬性要求），但是由于只调度一次 <code>Pod</code>，因此亲和规则只在调度前生效，当 <code>Pod</code> 运行起来后就无法约束 <code>Pod</code> 的去向。</p><p>(1)污点则是处于更加细粒度的策略，在配置文件生效后仍然可以动态对 <code>Pod</code> 做调度限制，它使节点能够排斥一类特定的 <code>Pod</code>，用户可以在命令行中通过 <code>kubectl taint nodes &lt;node_name | -l &lt;select_node_name_1:select_node_value_1, select_node_name_2:select_node_value_2, ...&gt;&gt; &lt;label_name_1=label_value_1, label_name_2=label_value_2, ...&gt;</code> 来对某个 <code>Node</code> 或符合某些标签的 <code>Node</code> 应用一个或多个污点（其实设置污点就会添加一个标签），如果在命令的污点标签后紧跟一个 <code>-</code> 就会取消这个污点的应用（而前面提及的 <code>describe</code> 的指令可以看到 <code>Node</code> 中存在的污点）。</p><p>(2)容忍度则是应用于 <code>Pod</code> 上的，容忍度允许调度器调度带有对应污点的 <code>Pod</code>，容忍度允许调度但并不保证调度，作为其功能的一部分，调度器也会评估其他参数，用户可以在配置文件中使用 <code>tolerations</code> 来配置容许运行的 <code>Node</code>。</p><p>污点和容忍度相互配合，可以用来避免 <code>Pod</code> 被动态分配到不合适的节点上，每个节点上都可以应用一个或多个污点，这表示对于那些不能容忍这些污点的 <code>Pod</code>， 是不会被该节点接受的。</p></li><li><p><strong>依赖和回收</strong>：一些 <code>K8s</code> 对象是其它一些的 <code>Owner</code>。例如一个 <code>ReplicaSet</code> 控制器是一组 <code>Pod</code> 的 <code>Owner</code>。具有 <code>Owner</code> 的对象被称为是 <code>Owner</code> 的 <code>Dependent</code>。每个 <code>Dependent</code> 对象具有一个指向其所属对象的 <code>metadata.ownerReferences</code> 字段。</p><p>有时，<code>K8s</code> 会自动设置 <code>ownerReference</code> 的值。例如创建一个 <code>ReplicaSet</code> 时，<code>Kubernetes</code> 自动设置 <code>ReplicaSet</code> 中每个 <code>Pod</code> 的 <code>ownerReference</code> 字段值。在 <code>1.6</code> 版本，<code>K8s</code> 会自动为一些对象设置 <code>ownerReference</code> 的值，这些对象是由 <code>ReplicationController、ReplicaSet、StatefulSet、DaemonSet、Deployment</code> 所创建或管理。如果您手动创建一个控制器并且使用命令行导出某个 <code>Pod</code> 的配置文件，那么将会看到该字段。也可以通过手动设置 <code>ownerReference</code> 的值，来指定 <code>Owner</code> 和 <code>Dependent</code> 之间的关系。</p><p>不过这就会引来一个问题了，有些资源是存在依赖关系的，我们需要解决一个资源消亡时，该资源所有的 <code>Dependent</code> 都最好都进行正确的清理，否则就会称为 “孤儿资源”，销毁的过程就叫 <strong>级联删除</strong>。<code>K8s</code> 支持的级联删除模式有三种（<code>Background、Foreground、Orphan</code>），均可以在 <code>Owner</code> 资源中设置。</p></li><li><p><strong>调度</strong>：<code>K8s</code> 作为一个容器编排调度引擎，资源调度是它的最基本也是最重要的功能，不过 <code>K8s</code> 中是如何做到资源调度的呢。</p><p><code>K8s</code> 中有一个叫做 <code>kube-scheduler</code> 的核心组件，该组件就是专门监听 <code>kube-apiserver</code> 中是否有还未调度到 <code>Node</code> 上的 <code>Pod</code>，再通过特定的算法为 <code>Pod</code> 指定分派 <code>Node</code> 运行（亲和策略会在调度后和污点容忍会在运行时影响分派策略的算法）。</p><p><code>K8s</code> 中的众多资源类型，例如 <code>Deployment、DaemonSet、StatefulSet</code> 等都已经定义了 <code>Pod</code> 运行的一些默认调度策略，但是如果我们细心的根据 <code>Node</code> 或者 <code>Pod</code> 的不同属性，分别为它们打上标签之后，我们将发现 <code>K8s</code> 中的高级调度策略是多么强大。当然如果要实现动态的资源调度，即 <code>Pod</code> 已经调度到某些节点上后，因为一些其它原因，想要让 <code>Pod</code> 重新调度到其它节点。</p><p>考虑以下两种情况：</p><ul><li>集群中有新增节点，想要让集群中的节点的资源利用率比较均衡一些，想要将一些高负载的节点上的 <code>Pod</code> 驱逐到新增节点上，这是 <code>k8s</code> 的 <code>kube-scheduler</code> 所不支持的，需要使用如 <a href="https://github.com/kubernetes-sigs/descheduler" target="_blank" rel="noopener noreferrer">descheduler</a> 这样的插件来实现。</li><li>想要运行一些大数据应用，设计到资源分片，<code>Pod</code> 需要与数据分布达到一致均衡，避免个别节点处理大量数据，而其它节点闲置导致整个作业延迟，这时候可以考虑使用 <a href="https://github.com/kubernetes-sigs/kube-batch" target="_blank" rel="noopener noreferrer">kube-batch</a>。</li></ul><p>不过上面的插件我还没实践过（主要是没有对应的实践场景），有机会再补充...</p></li><li><p><strong>质量</strong>：<code>QoS, Quality of Service</code>，大部分译为“服务质量等级”，又译作“服务质量保证”，是作用在 <code>Pod</code> 上的一个配置，当 <code>K8s</code> 创建一个 <code>Pod</code> 时，它就会给这个 <code>Pod</code> 分配一个 <code>QoS</code> 等级，可以是以下等级之一：</p><ul><li><code>Guaranteed</code>：<code>Pod</code> 里的所有容器都必须有 <code>内存/CPU</code> 限制和请求，而且值都必须相等。</li><li><code>Burstable</code>：<code>Pod</code> 里的至少有一个容器有 <code>内存/CPU</code> 请求且不满足 <code>Guarantee</code> 等级的要求（即 <code>内存/CPU</code> 的设置不同）。</li><li><code>BestEffort</code>：<code>Pod</code> 里的所有容器都必须没有任何 <code>内存/CPU</code> 的限制或请求。</li></ul><p>该配置不是通过一个配置项来配置的，而是通过配置 <code>CPU/内存</code> 的 <code>limits</code> 与 <code>requests</code> 值的大小来确认服务质量等级的。使用 <code>kubectl get pod -o yaml ...</code> 可以看到 <code>Pod</code> 的配置输出中有 <code>qosClass</code> 一项。该配置的作用是为了给资源调度提供策略支持，调度算法根据不同的服务质量等级可以确定将 <code>Pod</code> 调度到哪些节点上，可以使用 <code>kubectl get pod &lt;pod_name&gt; -o custom-columns=&#39;QOS:.status.qosClass&#39;</code> 进行快速的查看。</p><div class="hint-container note"><p class="hint-container-title">注</p><p>吐槽：因此 <code>K8s</code> 是结合以下机制进行调度的。</p><ul><li>亲和策略机制</li><li>污点容忍机制</li><li>服务质量机制</li></ul></div></li></ul><p>根据上述所写，编写以下的控制器模板文件，这个模板文件主要适用于 <code>Deployment</code> 控制器。这份模板文件就是上述知识提取出来的精华，给出模板文件后，您可以尝试和我一样进行一些实践，以验证我们所学。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># xxx-controller.yaml</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 指定 api server 组件的版本</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apps/v1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1. 指定资源种类</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;Deployment(最常用, 兼容性好) | ReplicaSet(很少用, 测试就行) | ReplicationController(已弃用, 建议别用)&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2. 指定资源元数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (1) 资源名称</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;xxx-deployment(资源名称)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (2) 资源标签</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  labels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    &lt;本资源标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本资源标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    &lt;本资源标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本资源标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (3) 资源注解</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># annotations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   &lt;本资源注解名&gt;: &lt;本资源注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   &lt;本资源注解名&gt;: &lt;本资源注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (4) 资源删除传播策略</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># deletionPropagation: &lt;Orphan(默认值, 删除 Owner 后 Dependent 会成为孤儿资源) | Background(立即删除 Owner 对象, 然后垃圾收集器会在后台删除这些 Dependent) | Foreground(立刻标记 Owner 对象, 但仍然可以通过 REST API 可见, 只有在垃圾收集器删除了所有 ownerReference.blockOwnerDeletion=true 的 Dependent 之后, 它才会删除 Owner 对象)&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3. 指定资源规格</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (1) 副本数量</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  replicas</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;number&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 如果需要测试可以使用 kubectl scale deployment &lt;Deployment控制器名称&gt; --replicas &lt;副本个数&gt; 来临时动态调整副本数量</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (2) 记录版次</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># revisionHistoryLimit: &lt;number(默认值为 10)&gt; # 在使用控制器资源为 Deployment 时有效, 可以设置记录的历史版本数量</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl apply -f &lt;./xxx.yaml&gt; 将会重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout status deployment &lt;deployment_name&gt; 查看滚动更新状态, 如果输出为 deployment &quot;&lt;deployment_name&gt;&quot; successfully rolled out 则表示滚动更新成功</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout history deployment &lt;deployment_name&gt; [--revision=&lt;revision_number&gt;] 查看历史版本, 可用 --revision=&lt;revision_number&gt; 详细查看指定的历史版本</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout undo deployment &lt;deployment_name&gt; [--to-revision=&lt;revision_number&gt;] 回滚到指定历史版本(不带 --to-revision 参数默认回滚到上一个版本)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (3) 标签选择</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  selector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # a. 简单的等值匹配</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    matchLabels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      &lt;要选的副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      &lt;要选的副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # b. 表达式精准匹配(可替换 matchLabels 做精准匹配)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     - key: &lt;标签名&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       values: # 如果使用的是 Exists 和 DoesNotExist 则不用写 values</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     - key: &lt;标签名&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       values: # 如果使用的是 Exists 和 DoesNotExist 则不用写 values</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (4) 副本模板</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  template</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # a. 指定模板元数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #   i. 命名空间</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      namespace</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  ii. 副本标签</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      labels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;本副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;本副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # iii. 副本注解</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     annotations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       &lt;本副本注解名&gt;: &lt;本副本注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       &lt;本副本注解名&gt;: &lt;本副本注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  iv. 所属引用</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     ownerReferences: # 如果不填写本字段, 则默认本 Dependent 的 Owner 为开头指定的控制器资源</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       - apiVersion: apps/v1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         kind: &lt;资源种类(控制器资源或其他副本资源等)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         name: &lt;资源名称&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         uid: &lt;资源唯一标识符&gt; # 可以使用 kubectl get &lt;资源种类&gt;&lt;资源实例&gt; -o custom-columns=&quot;UID:.metadata.uid&quot; 自定义列来获取一个资源对象的 UUID</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         blockOwnerDeletion: &lt;true(删除 Owner 对象会被阻止) | false(删除 Owner 对象不被阻止)&gt; # 只在 Foreground 删除传播策略下有效, 可以更加细粒度控制该模式</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # b. 指定模板规格</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #   i. 节点选择</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      nodeSelector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 仅能做简单等值匹配(如果使用亲和性策略则可以忽略本配置)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;要选的节点标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的节点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;要选的节点标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的节点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  ii. 亲和策略</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     affinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【节点亲和性: 调度到某个节点内部】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       nodeAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           nodeSelectorTerms:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions: &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【节点反亲和: 调度到某个节点外部】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       nodeAntiAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           nodeSelectorTerms:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【副本亲和性: 调度到某个副本邻处】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       podAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             topologyKey: &quot;&lt;kubernetes.io/hostname | failure-domain.beta.kubernetes.io/zone | topology.kubernetes.io/zone | topology.kubernetes.io/region | kubernetes.io/os |  kubernetes.io/arch&gt;&quot; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - weight: &lt;weight_value_1&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - weight: &lt;weight_value_2&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【副本反亲和：调度到某个副本远处】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       podAntiAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             topologyKey: &quot;&lt;kubernetes.io/hostname | failure-domain.beta.kubernetes.io/zone | topology.kubernetes.io/zone | topology.kubernetes.io/region | kubernetes.io/os |  kubernetes.io/arch&gt;&quot; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # iii. 容器模板</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      containers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 如果需要测试可以使用 kubectl set image &lt;(控制器资源种类)&gt;/&lt;资源实例&gt; &lt;模板容器名=镜像名:版本号&gt; &lt;其他容器名...&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器名&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;镜像名:版本号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         resources:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           requests:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;请求的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;请求的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           limits:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;限制的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;限制的内存大小&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器名&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;镜像名&gt;:&lt;版本号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         resources:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           requests:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;请求的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;请求的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           limits:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;限制的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;限制的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  iv. 容忍污点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     tolerations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       - key: &quot;&lt;所容忍的污点标签名&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         value: &lt;所容忍的污点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         effect: &lt;&quot;NoSchedule&quot;(表示该节点上有这个污点时不会调度 Pod 到该节点上) | &quot;PreferNoSchedule&quot;(表示尽量避免将 Pod 调度到带有此污点的节点上, 但如果没有其他节点可用仍会调度) | &quot;NoExecute&quot;(表示带有此污点的节点不仅不会调度新 Pod, 还会驱逐已经在该节点上的 Pod)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         tolerationSeconds: &lt;seconds_number&gt; # 在上述策略为 NoExecute 时, 可以设置 Pod 可容忍该污点的持续时间, 持续时间一到就驱除 Pod</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>待实践，待补充...</p><h6 id="_3-5-1-6-2-控制对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-2-控制对象"><span>3.5.1.6.2.控制对象</span></a></h6><p>资源对象的操作大部分是讲解完毕了，但是最终重要的资源其实是控制器，我们需要再详细解释一下，到目前为止，我们只使用了一种控制器，也就是 <code>Deployment</code>，我们需要了解多种控制器的特性，然后再根据我们之前设计的模板文件来补充和测试。</p><ul><li><p><strong>(静态数量+直接管理+无状管理) ReplicationController</strong>：<code>ReplicationController</code> 是 <code>K8s</code> 早期版本使用的控制器，用于确保指定数量的 <code>Pod</code> 实例在集群中始终保持运行状态（多则删，少则增），<a href="https://K8s.io/zh-cn/docs/concepts/workloads/" target="_blank" rel="noopener noreferrer">这种控制器在官方文档中已经被写明为弃用</a>。</p></li><li><p><strong>(静态数量+标签管理+无状管理) ReplicaSet</strong>：<code>ReplicaSet</code> 是 <code>ReplicationController</code> 的改进版，功能类似，但提供了更灵活的标签选择器（<code>selectors</code>，这样就可以给 <code>Pod</code> 打上标签）。</p><p>它的作用也是维持某个指定数量的 <code>Pod</code> 副本（<code>replicas</code>）运行，即使某些 <code>Pod</code> 崩溃或删除，<code>ReplicaSet</code> 会创建新的 <code>Pod</code> 来确保副本数恒定（但是一般还是会要求使用二十一时四十五分 <code>Reployment</code> 来自动管理，因为有可能 <code>ReplicaSet</code> 不支持 <code>rolling-updata, 滚动更新</code>）。</p><p>虽然 <code>ReplicaSet</code> 可以独立使用，但一般还是建议使用 <code>Deployment</code> 来自动管理 <code>ReplicaSet</code>，这样就无需担心跟其他机制的不兼容问题（比如 <code>ReplicaSet</code> 不支持 <code>rolling-update</code> 但 <code>Deployment</code> 支持）。</p></li><li><p><strong>(静态数量+标签管理+无状管理)+自动回滚+扩容升级 Deployment</strong>：<code>Deployment</code> 是一种更高级的控制器，用于管理无状态应用的部署。它通常用于管理应用的滚动更新、回滚、扩展和其他运维任务。</p><p><code>Deployment</code> 会创建一个 <code>ReplicaSet</code>，再由 <code>ReplicaSet</code> 来管理 <code>Pod</code> 的副本，并由 <code>ReplicaSet</code> 提供更新和版本控制的功能（可以方便杀掉原本的 <code>Pod</code>，重新建立新标签版本的 <code>Pod</code>，如果此次滚动更新导致 <code>bug</code>，也可以进行版本回滚）。</p><p>其实修改了配置文件后再重新加载就是一种改动（不过有些配置生效后就无法改动了，例如一些标签选择器配置等；还有的配置被修改后不会导致版本发生变化，例如修改副本的个数通常不被认为这种改动不算大）。</p><p>而扩容也比较简单，可以使用 <code>kubectl scale deployment &lt;Deployment控制器名称&gt; --replicas &lt;副本个数&gt;</code> 以动态管理 <code>Pod</code> 的个数（但是最好更新配置文件，除非您需要进行临时测试）。</p><p>更新镜像文件也比较方便，可以使用 <code>如果需要测试可以使用 kubectl set image &lt;资源类别(本模板一般是指控制器资源种类)&gt;/&lt;资源实例&gt; &lt;模板容器名=镜像名:版本号&gt; &lt;其他容器名...&gt;</code> 进行容器更新。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：当您更新一个正在进行中的 <code>Deployment</code> 时，新的 <code>ReplicaSet</code> 会被创建，负责创建新的 <code>Pod</code>，保证与新的 <code>.spec.template</code>（即新的 <code>Pod</code> 模板）匹配。同时，旧的 <code>ReplicaSet</code> 会根据新的 <code>.spec.replicas</code>（即期望的 <code>Pod</code> 数量）进行缩容。</p><p>并且如果由于 <code>Pod</code> 够多，但是控制器仍在等待所有 <code>Pod</code> 调度完毕的过程中发生了更新，会立刻对所有旧的 <code>Pod</code> 进行删除，不会等待所有的 <code>Pod</code> 创建完毕。</p></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>警告：您不该手动管理由 <code>Deployment</code> 创建的 <code>ReplicaSet</code>，否则就篡越了 <code>Deployment controller</code> 的职责。</p></div></li><li><p><strong>(动态数量+标签管理+无状管理) Horizontal Pod Autoscaler</strong>：<code>HPA</code> 根据用户定义的指标（通常是指 <code>Pod</code> 的 <code>CPU</code> 使用率、内存使用率或其他自定义指标）来动态调整 <code>Pod</code> 的副本数。</p><p><code>HPA</code> 也是基于 <code>ReplicaSet</code> 的，如果发现 <code>Pod</code> 资源指标过大，就会制作 <code>Pod</code> 的副本降低容器指标，一旦利用率变过低就会回收副本，也就做到了所谓的水平拓展。</p><p>可以直接在配置文件中写明该资源，也可以使用 <code>kubectl autoscale deployment &lt;deployment_name&gt; --min=&lt;最小容器数&gt; --max=&lt;最大容器数&gt; --cpu-percent=&lt;CPU使用率阈值&gt; --memory-percent=&lt;内存使用率阈值&gt;</code> 指令手动把 <code>deployment</code> 交给 <code>HPA</code> 托管，方便动态管理，不过我还是建议放进配置文件中。</p><p><code>Horizontal Pod Autoscaler</code> 由一个控制循环实现，循环周期由 <code>controller manager</code> 中的 <code>--horizontal-pod-autoscaler-sync-period</code> 标志指定（默认是 <code>30</code> 秒）。简而言之，<code>HPA</code> 会每 <code>30</code> 秒检查一次 <code>Pod</code> 的资源使用情况，并根据设定的目标（例如，<code>CPU</code> 使用率达到某个阈值时增加 <code>Pod</code> 数量）来调整 <code>Pod</code> 的副本数。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：<code>K8s</code> 自 <code>1.2</code> 版本引入 <code>HPA</code> 机制，到 <code>1.6</code> 版本之前一直是通过 <code>kubelet</code> 来获取监控指标来判断是否需要扩缩容，<code>1.6</code> 版本之后必须通过 <code>api-server</code>、<code>heapseter</code> 或者 <code>kube-aggregator</code> 来获取监控指标。而我们之前就查询过，我们本文档使用的集群为 <code>Server Version: v1.31.0</code>，则需要部署 <a href="https://github.com/kubernetes-sigs/metrics-server#deployment" target="_blank" rel="noopener noreferrer">metrics-server</a> 才能使用 <code>hpa</code>，只需要执行 <code>kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</code> 即可。</p><p>不过 <code>Minikube</code> 早就帮我们做好对应的处理了，您可以直接使用 <code>minikube addons enable metrics-server</code> 快速启动服务。但是这里有一个坑，就是 <code>TLS</code> 问题，可以根据 <a href="https://stackoverflow.com/questions/68648198/metrics-service-in-kubernetes-not-working" target="_blank" rel="noopener noreferrer">这个回答</a> 在 <code>kubectl edit deployment.apps/metrics-server -n kube-system</code> 打开的配置文中，在 <code>spec.template.spec.containers.args</code> 选项中添加 <code>- --kubelet-insecure-tls=true</code> 的选项，只有这样才能正常使用 <code>metrics-server</code> 服务。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：并且如果希望使用 <code>HPA</code> 并且还是使用利用率作为副本扩容策略的参考，那么在 <code>Deployment</code> 控制器中就必须设置对容器的资源请求和资源限制进行定义才可以使用，否则利用率无法计算，<code>HPA</code> 控制器无法使用。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：<code>HPA</code> 本质上是水平拓展，而如果您需要垂直拓展，您可以考虑使用 <code>VPA, VerticalPodAutoscaler</code> 实现工作负载的垂直扩缩。不同于 <code>HPA</code>，<code>VPA</code> 并非默认来源于 <code>K8s</code>，而是一个独立的项目， 参见 <a href="https://github.com/kubernetes/autoscaler/tree/9f87b78df0f1d6e142234bb32e8acbd71295585a/vertical-pod-autoscaler" target="_blank" rel="noopener noreferrer">on GitHub</a> 即可下载。</p></div></li><li><p><strong>(静态数量+标签管理+有状管理) StatefulSet</strong>：这是为了解决 <code>Docker</code> 这种无状态容器的一种控制器，上面提到的四种控制器都是为无状态而设计的，只有 <code>StatefulSet</code> 是为了有状态而设计的。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：<code>Docker</code> 被称为“无状态”的主要原因是其设计理念和容器化的工作方式。尽管您可以将数据文件封装进 <code>Docker</code> 镜像中，但这并不改变 <code>Docker</code> 本身的无状态特性。</p><ol><li><strong>容器的临时性</strong> <code>Docker</code> 容器通常是短暂的，启动和停止相对容易。它们被设计为在需要时快速启动，而不是长期运行。因此，如果一个容器崩溃或被删除，任何未持久化的数据都将丢失。</li><li><strong>数据持久化</strong> 虽然可以将数据文件放入容器中，但如果不使用数据卷，这些数据在容器删除后将丢失。<code>Docker</code> 通过引入数据卷来实现持久化存储，允许容器与宿主机的文件系统共享数据。数据卷提供了一种持久化的方式，但容器本身仍然是无状态的。</li><li><strong>不依赖于容器的状态</strong> 在微服务架构中，无状态服务不依赖于任何特定的请求上下文或会话信息。这使得服务更易于扩展和管理。无状态设计的服务可以在多个实例间负载均衡，任意实例的崩溃或重启不会影响整体服务。</li><li><strong>影响镜像的可重用性</strong> <code>Docker</code> 镜像是不可变的，这意味着每次创建新容器时都是从相同的镜像开始。这个特性促进了容器的可重用性和可移植性，但也意味着容器内部的任何状态或变化（例如日志文件、数据库文件）都不会持久保存。</li><li><strong>应用状态管理</strong> 对于有状态应用，推荐使用外部数据库或持久化存储解决方案。这与 <code>Docker</code> 容器本身的短暂性和无状态特性相一致。使用外部存储，可以确保数据在容器重新启动或替换后仍然可用。</li></ol><p>因此有些公司的实践就是业务应用都使用 <code>K8s</code> 来部署集群，但存储建设直接部署在裸机上，以避免带来状态管理的麻烦。</p></div><ul><li>每个 <code>Pod</code> 在 <code>StatefulSet</code> 中都有一个唯一的、稳定的网络标识符（稳定网络标识），<code>Pod</code> 名称是由 <code>StatefulSet</code> 名称和一个序号（例如 <code>myapp-0</code>, <code>myapp-1</code>）组成，这使得每个 <code>Pod</code> 可以通过其稳定的 <code>DNS</code> 名称进行访问，不会因为 <code>Pod</code> 被顶替就发生改变。</li><li>每个 <code>Pod</code> 都可以绑定一个持久卷（<a href="https://K8s.io/zh-cn/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">官方文档中有提到这个持久卷</a>，这个概念应该来源于容器，可以稳定地持久化存储），即使在 <code>Pod</code> 重启或迁移的情况下，数据也能保持一致。持久卷可以为每个 <code>Pod</code> 提供独立的存储，确保应用的状态不会丢失。</li></ul><p><code>StatefulSet</code> 确保 <code>Pods</code> 按顺序部署和终止（有序部署/有序拓展，有序收缩/有序删除），在扩展或缩减 <code>StatefulSet</code> 时，<code>Pods</code> 的创建和删除遵循特定顺序，这对于需要有序启动或关闭的应用（例如数据库）非常重要。</p></li><li><p><strong>特定的服务 DaemonSet</strong>：</p><ul><li><code>DaemonSet</code> 确保集群内的每一个 <code>Node</code> 内都有一个 <code>Pod</code></li><li>当集群加入新的 <code>Node</code> 后，就会增加一个 <code>Pod</code></li><li>当集群去除旧的 <code>Node</code> 后，就会减少一个 <code>Pod</code></li><li>这种 <code>Pod</code> 都存在于不同的 <code>Node</code> 中，并且各自只有一个</li><li>这些 <code>Pod</code> 都是相同功能的，一般会提供基础设置的服务，例如 <code>存储daemon</code>、<code>日志daemon</code>、<code>监控daemon</code> 等，这在有些时候非常方便</li></ul></li><li><p><strong>一次性任务 Job</strong>：<code>Job</code> 负责批处理任务，即只执行一次的任务，保证批处理任务的一个或多个 <code>Pod</code> 成功结束。</p></li><li><p><strong>周期性任务 Cron Job</strong>：<code>Cron Job</code> 管理基于时间的 <code>Job</code></p><ul><li>(1) 给定时间只允许发生一次</li><li>(2)周期性在给定时间进行运行</li></ul><p>一般情况下，没有特殊要求直接使用 <code>Deployment</code> 即可。</p></li></ul><p>大致了解了控制器的概念和控制器的分类后，关于控制器有一些常见的指令可以使用：</p><ul><li><code>kubectl rollout history deployment &lt;deployment_name&gt; [--revision=&lt;revision_number&gt;]</code>：查看历史版本, 可用 <code>--revision=&lt;revision_number&gt;</code>：详细查看指定的历史版本</li><li><code>kubectl apply -f &lt;./xxx.yaml&gt; [--record]</code>：将会重新加载配置文件，在使用 <code>Deployment</code> 也会根据情况进行版本更新，如果带上 <code>--record</code> 会记录每次版本更新所使用的指令，这也将会在 <code>status</code> 中显示。</li><li><code>kubectl set image &lt;(控制器资源种类)&gt; &lt;资源实例&gt; &lt;模板容器名=镜像名:版本号&gt; &lt;其他容器名...&gt; [--record]</code>：可以用来临时更新容器镜像</li><li><code>kubectl rollout undo deployment &lt;deployment_name&gt; [--to-revision=&lt;revision_number&gt;]</code>：回滚到指定历史版本，不带 <code>--to-revision</code> 参数默认回滚到上一个版本</li><li><code>kubectl edit &lt;资源种类&gt; &lt;资源实例&gt;</code> 可以直接打开当前 <code>K8s</code> 对资源实例的最新最热的配置文件，如果在这里修改并且直接保存可以立刻更新资源实例的配置，但如果不持久化配置可能对导致配置数据丢失，因此可以作为临时测试使用</li><li><code>kubectl rollout status deployment &lt;deployment_name&gt;</code>：，查看滚动更新状态, 如果输出为 <code>deployment &quot;&lt;deployment_name&gt;&quot; successfully rolled out</code>：则表示滚动更新成功</li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果使用了更新指令，就可以使用 <code>--record</code> 来记录每次版本更新所使用的指令，这将会在版本记录中显示。</p></div><p>继续扩充我们的模板文件进行测试，根据有无状态控制器就可以得到两个模板文件，而根据一次性任务和周期性任务又可以得到一份模板文件。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;项目名称&gt;-stateless-service-controller.yaml: 适合无状态服务控制器的配置文件</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl create -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来创建对象</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl apply -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来更新配置</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl delete -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来删除资源</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl get -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来获取资源</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl describe -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来详细查询</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以使用 kubectl edit -f # &lt;项目名称&gt;-stateless-service-controller.yaml 来临时修改</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#####################################################################</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;year:month:day-author&gt;: This a Deployment config.                #</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#####################################################################</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &gt;&gt;&gt; beg &gt;&gt;&gt; ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1. 指定资源种类</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apps/v1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Deployment</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # &lt;Deployment(最常用, 兼容性好) | ReplicaSet(很少用, 测试就行) | ReplicationController(已弃用, 建议别用)&gt; # 如果无需动态调整, 则可以注释掉本文件尾部的 HPA 配置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2. 指定资源元数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (1) 资源名称</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;项目名称&gt;-dep</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 本资源名称</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (2) 资源标签</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  labels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    &lt;本资源标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本资源标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    &lt;本资源标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本资源标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (3) 资源注解</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># annotations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   &lt;本资源注解名&gt;: &lt;本资源注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   &lt;本资源注解名&gt;: &lt;本资源注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (4) 资源删除传播策略</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># deletionPropagation: &lt;Orphan(默认值, 删除 Owner 后 Dependent 会成为孤儿资源) | Background(立即删除 Owner 对象, 然后垃圾收集器会在后台删除这些 Dependent) | Foreground(立刻标记 Owner 对象, 但仍然可以通过 REST API 可见, 只有在垃圾收集器删除了所有 ownerReference.blockOwnerDeletion=true 的 Dependent 之后, 它才会删除 Owner 对象)&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3. 指定资源规格</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (1) 副本数量</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  replicas</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;number&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 如果需要测试可以使用 kubectl scale deployment &lt;Deployment控制器名称&gt; --replicas &lt;副本个数&gt; 来临时动态调整副本数量</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (2) 记录版次</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># revisionHistoryLimit: &lt;number(默认值为 10)&gt; # 在使用控制器资源为 Deployment 时有效, 可以设置记录的历史版本数量(保留最新的 number 个版本和一个当前版本)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout status deployment &lt;deployment_name&gt; 查看滚动更新状态, 如果输出为 deployment &quot;&lt;deployment_name&gt;&quot; successfully rolled out 则表示滚动更新成功</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout history deployment &lt;deployment_name&gt; [--revision=&lt;revision_number&gt;] 查看历史版本, 可用 --revision=&lt;revision_number&gt; 详细查看指定的历史版本</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl rollout undo deployment &lt;deployment_name&gt; [--to-revision=&lt;revision_number&gt;] 回滚到指定历史版本(不带 --to-revision 参数默认回滚到上一个版本)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 可用 kubectl apply -f &lt;./xxx.yaml&gt; 将会重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 如果使用了更新指令, 就可以使用 ` 来</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (3) 标签选择</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  selector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 做标签选择时应尽可能避免多个选择器使用相同标签名, 否则会导致选择器冲突, 尽管 K8s 不禁止这种行为, 但会导致不稳定的行为</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # a. 简单的等值匹配</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    matchLabels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      &lt;要选的副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      &lt;要选的副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # b. 表达式精准匹配(可替换 matchLabels 做精准匹配)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     - key: &lt;标签名&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       values: # 如果使用的是 Exists 和 DoesNotExist 则不用写 values</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     - key: &lt;标签名&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       values: # 如果使用的是 Exists 和 DoesNotExist 则不用写 values</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         - &lt;标签值_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (4) 副本模板</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  template</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # a. 指定模板元数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #   i. 命名空间</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     namespace: &lt;指定命名空间&gt; # 如果不填写则默认为 default 命名空间</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  ii. 副本标签</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      labels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;本副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;本副本标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本副本标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # iii. 副本注解</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     annotations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       &lt;本副本注解名&gt;: &lt;本副本注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       &lt;本副本注解名&gt;: &lt;本副本注解值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  iv. 所属引用</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     ownerReferences: # 如果不填写本字段, 则默认本 Dependent 的 Owner 为开头指定的控制器资源</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       - apiVersion: apps/v1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         kind: &lt;资源种类(控制器资源或其他副本资源等)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         name: &lt;资源名称&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         uid: &lt;资源唯一标识符&gt; # 可以使用 kubectl get &lt;资源种类&gt; &lt;资源实例&gt; -o custom-columns=&quot;UID:.metadata.uid&quot; 自定义列来获取一个资源对象的 UUID</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         blockOwnerDeletion: &lt;true(删除 Owner 对象会被阻止) | false(删除 Owner 对象不被阻止)&gt; # 只在 Foreground 删除传播策略下有效, 可以更加细粒度控制该模式</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # b. 指定模板规格</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #   i. 节点选择</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      nodeSelector</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 仅能做简单等值匹配(如果使用亲和性策略则可以忽略本配置)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;要选的节点标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的节点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        &lt;要选的节点标签名&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;要选的节点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  ii. 亲和策略</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     affinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【节点亲和性: 调度到某个节点内部】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       nodeAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           nodeSelectorTerms:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions: &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【节点反亲和: 调度到某个节点外部】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       nodeAntiAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           nodeSelectorTerms:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             preference:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【副本亲和性: 调度到某个副本邻处】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       podAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             topologyKey: &quot;&lt;kubernetes.io/hostname | failure-domain.beta.kubernetes.io/zone | topology.kubernetes.io/zone | topology.kubernetes.io/region | kubernetes.io/os |  kubernetes.io/arch&gt;&quot; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - weight: &lt;weight_value_1&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             - weight: &lt;weight_value_2&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                   - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       # 【副本反亲和：调度到某个副本远处】</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       podAntiAffinity:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         requiredDuringSchedulingIgnoredDuringExecution: # 必须满足条件才调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             topologyKey: &quot;&lt;kubernetes.io/hostname | failure-domain.beta.kubernetes.io/zone | topology.kubernetes.io/zone | topology.kubernetes.io/region | kubernetes.io/os |  kubernetes.io/arch&gt;&quot; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         preferredDuringSchedulingIgnoredDuringExecution: # 尽量满足条件就调度</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_1&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           - weight: &lt;weight_value_2&gt; # 规则的优先级越高, 多个规则的权重总和应为 100, 以便于 K8s 根据总权重来做决策, 调度器会优先选择权重较大的规则, 来决定 Pod 应该调度到哪个节点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             podAffinityTerm:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               labelSelector:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 matchExpressions: </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#                 - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#               topologyKey: &lt;&quot;kubernetes.io/hostname&quot; | &quot;failure-domain.beta.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/zone&quot; | &quot;topology.kubernetes.io/region&quot; | &quot;kubernetes.io/os&quot; | &quot;kubernetes.io/arch&quot;&gt; # 拓扑关键</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # iii. 容器模板</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      containers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 如果需要测试可以使用 kubectl set image &lt;(控制器资源种类)&gt; &lt;资源实例&gt; &lt;模板容器名=镜像名:版本号&gt; &lt;其他容器名...&gt; [--record] 来临时更新容器镜像, 如果带上 --record 会记录更新所使用的指令，这也将会在版本中显示</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器名&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;镜像名:版本号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         resources:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           requests:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;请求的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;请求的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           limits:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;限制的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;限制的内存大小&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器名&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;镜像名&gt;:&lt;版本号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> containerPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;容器内部监听的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              hostPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;监听端口映射宿主主机的端口号&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">              protocol</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;本次端口使用的网络协议&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         resources:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           requests:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;请求的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;请求的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#           limits:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             cpu: &lt;限制的 CPU 核数&gt; # 1m &lt;= 2*500m == 1000m == 1 表示一个完整的 CPU 核心</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#             memory: &lt;限制的内存大小+单位&gt; # 单位为 Ei | Pi | Ti | Gi | Mi | Ki</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      #  iv. 容忍污点</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     tolerations:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       - key: &quot;&lt;所容忍的污点标签名&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         operator: &lt;In(存在于标签值) | NotIn(不存在于标签值) | Exists(只匹配标签名) | DoesNotExist(不匹配标签名)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         value: &lt;所容忍的污点标签值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         effect: &lt;&quot;NoSchedule&quot;(表示该节点上有这个污点时不会调度 Pod 到该节点上) | &quot;PreferNoSchedule&quot;(表示尽量避免将 Pod 调度到带有此污点的节点上, 但如果没有其他节点可用仍会调度) | &quot;NoExecute&quot;(表示带有此污点的节点不仅不会调度新 Pod, 还会驱逐已经在该节点上的 Pod)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         tolerationSeconds: &lt;seconds_number&gt; # 在上述策略为 NoExecute 时, 可以设置 Pod 可容忍该污点的持续时间, 持续时间一到就驱除 Pod</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (5) 更新策略</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  strategy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;RollingUpdate(默认策略, 允许逐步替换副本, 避免服务中断) | Recreate(删除所有副本后再替换, 允许服务中断)&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    rollingUpdate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 只有在 RollingUpdate 更新策略下才能使用这个字段</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      maxUnavailable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;number&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最多可以有 number 个副本不可用</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      maxSurge</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;number&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最多可以多出 number 个副本</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### === mod === ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果上述文件有改动请在这里改动, 以保留原始的配置文件, 并在这里记录改动的时间和作者</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># year:month:day-&lt;author&gt;: 改动信息...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### === mod === ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果上述文件有改动请在这里改动, 以保留原始的配置文件, 并在这里记录改动的时间和作者</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># year:month:day-&lt;author&gt;: 改动信息...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &lt;&lt;&lt; end &lt;&lt;&lt; ###</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#####################################################################</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;year:month:day-author&gt;: This a Horizontal Pod Autoscaler config. #</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#####################################################################</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &gt;&gt;&gt; beg &gt;&gt;&gt; ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1. 指定资源种类</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> autoscaling/v2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HorizontalPodAutoscaler</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以针对所有的副本进行平均计算来进行动态伸缩</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2. 指定资源元数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">metadata</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;xxx&gt;-dep-hpa</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 本资源名称</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3. 指定资源规格</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">spec</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (1) 指定目标</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  scaleTargetRef</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    apiVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apps/v1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    kind</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Deployment</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;项目名称&gt;-dep</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 自动伸缩目标是 xxx-deployment 也就是上述填写的控制器资源实例名称</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (2) 标签选择</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># selector: # 如果使用本选择器, 则不需要 scaleTargetRef 字段中的 name 字段</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   matchExpressions:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     - &lt;...填写标签选择表达式...&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (3) 副本范围</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  minReplicas</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;最小副本数&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  maxReplicas</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;最大副本数&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (4) 同步周期配置</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># horizontalPodAutoscalerSyncPeriod: &lt;同步周期时间&gt; # 默认为 30s, 格式为 1m, 10s 等</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # (5) 指标规则</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  metrics</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # a. 资源指标</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Resource</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      resource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cpu</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;Utilization(利用率) | AverageValue(具体值)&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 如果需要使用利用率则必须要填写 deployment.spec.template.spec.containers.resources 字段</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          &lt;averageUtilization | averageValue&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;平均利用率 | 平均具体值&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Resource</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      resource</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> memory</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;Utilization(利用率) | AverageValue(具体值)&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          &lt;averageUtilization | averageValue&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;平均利用率 | 平均具体值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # b. 副本指标</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   - type: Pods</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     pods:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       metric:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         name: &lt;cpu | memory&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       target:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         type: &lt;Utilization(利用率) | AverageValue(具体值)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         &lt;averageUtilization | averageValue&gt;: &lt;平均利用率 | 平均具体值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # c. 外部指标</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   - type: External</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     external:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       metric:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         name: &lt;指标名称&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       target:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         type: &lt;Utilization(利用率) | AverageValue(具体值)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         &lt;averageUtilization | averageValue&gt;: &lt;平均利用率 | 平均具体值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # d. 对象指标</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#   - type: Object</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#     object:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       metric:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         name: &lt;指标名称&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#       target:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         type: &lt;Utilization(利用率) | AverageValue(具体值)&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#         &lt;averageUtilization | averageValue&gt;: &lt;平均利用率 | 平均具体值&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### === mod === ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果上述文件有改动请在这里改动, 以保留原始的配置文件, 并在这里记录改动的时间和作者</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># year:month:day-&lt;author&gt;: 改动信息...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### === mod === ###</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果上述文件有改动请在这里改动, 以保留原始的配置文件, 并在这里记录改动的时间和作者</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># year:month:day-&lt;author&gt;: 改动信息...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">### &lt;&lt;&lt; end &lt;&lt;&lt; ###</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3-5-1-6-3-网络对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-3-网络对象"><span>3.5.1.6.3.网络对象</span></a></h6><p>待补充...</p><p>https://jimmysong.io/book/kubernetes-handbook/service-discovery/</p><h6 id="_3-5-1-6-2-存储对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-2-存储对象"><span>3.5.1.6.2.存储对象</span></a></h6><p>待补充...</p><p>https://jimmysong.io/book/kubernetes-handbook/storage/</p><h6 id="_3-5-1-6-3-策略对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-3-策略对象"><span>3.5.1.6.3.策略对象</span></a></h6><p>待补充...</p><p>https://jimmysong.io/book/kubernetes-handbook/storage/</p><h6 id="_3-5-1-6-4-身份对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-4-身份对象"><span>3.5.1.6.4.身份对象</span></a></h6><p>https://jimmysong.io/book/kubernetes-handbook/auth/</p><p>待补充...</p><h6 id="_3-5-1-6-5-自定对象" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-5-自定对象"><span>3.5.1.6.5.自定对象</span></a></h6><p>由于当前我也没有遇到过需要自定义的需要，待补充...</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果还需要 <a href="https://minikube.sigs.k8s.io/docs/" target="_blank" rel="noopener noreferrer">了解 Minikube 的内容可查看文档</a>。</p></div><h4 id="_3-5-2-kind" tabindex="-1"><a class="header-anchor" href="#_3-5-2-kind"><span>3.5.2.Kind</span></a></h4><p>早期的 <code>Minikube</code> 主要是使用虚拟机 <code>VM</code> 来运行 <code>K8s</code> 集群。这是因为在早期的 <code>K8s</code> 开发阶段，虚拟机提供了较好的隔离性和兼容性，尤其是在本地环境中模拟生产环境时，<code>VM</code> 更容易支持各种平台。</p><p>随着容器化技术的进步，<code>Minikube</code> 后续加入了对多种容器运行时的支持。包括 <code>Docker</code> 和 <code>Containerd</code>，这使得 <code>Minikube</code> 可以更加高效地运行，而不必依赖于传统的虚拟机。这样不仅提升了性能，还增强了灵活性，因为使用容器运行时比使用虚拟机更轻量，启动速度也更快。</p><p>目前 <code>Minikube</code> 提供了多种选择，包括使用 <code>VM</code> 或者直接在宿主机上运行 <code>K8s</code> 集群，支持 <code>Docker</code> 和其他容器运行时。</p><p>而 <code>Kind</code> 优点就是启动速度很快，基本只使用 <code>Docker</code> 作为容器运行时，因此这里不多介绍。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果还需要 <a href="https://kind.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">了解 Kind 的内容可查看文档</a>。</p></div><h5 id="_3-5-1-6-minikube-的模板引入" tabindex="-1"><a class="header-anchor" href="#_3-5-1-6-minikube-的模板引入"><span>3.5.1.6.Minikube 的模板引入</span></a></h5><h4 id="_3-5-3-kubeadm" tabindex="-1"><a class="header-anchor" href="#_3-5-3-kubeadm"><span>3.5.3.Kubeadm</span></a></h4><h2 id="_4-集群管理的架构模板" tabindex="-1"><a class="header-anchor" href="#_4-集群管理的架构模板"><span>4.集群管理的架构模板</span></a></h2></div><!----><!----><div class="vp-doc-copyright" data-v-eccffa44><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-8803b277><a href="#doc-copyright" class="header-anchor" data-v-8803b277><span data-v-8803b277><!--[-->版权所有<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-4a95ad3f><p data-v-4a95ad3f><span data-v-4a95ad3f>版权归属：</span><a class="vp-link no-icon link" href="https://github.com/limou3434" target="_blank" rel="noreferrer" data-v-4a95ad3f data-v-a73080b7><!--[-->limou3434<!--]--><!----></a></p><!----><p data-v-4a95ad3f><span data-v-4a95ad3f>许可证：</span><a class="vp-link no-icon link" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noreferrer" data-v-4a95ad3f data-v-a73080b7><!--[-->署名 4.0 国际 (CC-BY-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-4a95ad3f></span><span class="vpi-license-by" data-v-4a95ad3f></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-eccffa44 data-v-a4d41ee7><!--[--><!--]--><div class="edit-info" data-v-a4d41ee7><div class="edit-link" data-v-a4d41ee7><a class="vp-link no-icon link edit-link-button" href="https://github.com/limou3434/work-blog-website/edit/main/docs/notes/1.编码修养/3.系统网络/039_ljp_2024_10_05_集群管理软件.md" target="_blank" rel="noreferrer" data-v-a4d41ee7 data-v-a73080b7><!--[--><span class="vpi-square-pen edit-link-icon" aria-label="edit icon" data-v-a4d41ee7></span> 编辑此页<!--]--><!----></a></div><!----></div><div class="contributors" aria-label="Contributors" data-v-a4d41ee7><span class="contributors-label" data-v-a4d41ee7>贡献者: </span><span class="contributors-info" data-v-a4d41ee7><!--[--><!--[--><span class="contributor" data-v-a4d41ee7>limou3434</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-a4d41ee7>898738804@qq.com</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-a4d41ee7><div class="pager" data-v-a4d41ee7><a class="vp-link no-icon link pager-link prev" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/ukh43e1q/" data-v-a4d41ee7 data-v-a73080b7><!--[--><span class="desc" data-v-a4d41ee7>上一页</span><span class="title" data-v-a4d41ee7>容器隔离软件</span><!--]--><!----></a></div><div class="pager" data-v-a4d41ee7><a class="vp-link no-icon link pager-link next" href="/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/5567ctbx/" data-v-a4d41ee7 data-v-a73080b7><!--[--><span class="desc" data-v-a4d41ee7>下一页</span><span class="title" data-v-a4d41ee7>现代指令软件</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-eccffa44><div style="display: flex;
align-items: center;
justify-content: center;
height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);
--icon-size: 48px;
display: inline-block;
width: var(--icon-size);
height: var(--icon-size);
background-color: currentcolor;
-webkit-mask-image: var(--loading-icon);
mask-image: var(--loading-icon);
"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-f64889e1 data-v-7af942b0><span class="percent" data-allow-mismatch data-v-7af942b0>0%</span><span class="show icon vpi-back-to-top" data-v-7af942b0></span><svg aria-hidden="true" data-v-7af942b0><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-7af942b0></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-f64889e1 data-v-6df181e1><!--[--><div class="container" data-v-6df181e1><p class="message" data-v-6df181e1>Make by <a target="_blank" href="https://github.com/limou3434">Work</a></p><p class="copyright" data-v-6df181e1>MIT</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><div class="border top-right vp-bulletin preset"><button type="button" class="close"><span class="vpi-close"></span></button><!--[--><h2>本站公告</h2><div class="container"><div class="bulletin-content content vp-doc" data-v-4ae7319c><p data-v-4ae7319c>本网站正在不断升级中，若有 bug 可以在本开发者的对应项目下提交 <a href="https://github.com/limou3434/work-blog-website/issues" target="_blank" data-v-4ae7319c>issues</a>。 您在使用中的任何问题也可以加入我们的 QQ 群聊一起讨论。</p><img src="/work-blog-website/assets/qqtlq-CvHrqwx-.png" alt="讨论群" data-v-4ae7319c></div></div><!--]--></div><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/work-blog-website/assets/app-DcSFSDZX.js" defer></script></body></html>