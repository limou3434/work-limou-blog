import{_ as l,c as h,b as i,d as n,r as k,o as p}from"./app-DcSFSDZX.js";const t="/work-blog-website/assets/TB1xeudKrvpK1RjSZFqXXcXUVXa-2336-907.png_-BjtPqRzV.png",e="/work-blog-website/assets/image-20240904185051547-4PwkeSz-.png",d="/work-blog-website/assets/image-20240904200507102-Csj__FxC.png",r="/work-blog-website/assets/image-20240904222537120-61xi7hye.png",A="/work-blog-website/assets/image-20240904231652356-I-wDSszO.png",g="/work-blog-website/assets/image-20240904231729606-BH8Ltd2_.png",y="/work-blog-website/assets/image-20240904235818330-BjR8441S.png",c="/work-blog-website/assets/image-20240904235904948-CQ102CGw.png",D="/work-blog-website/assets/image-20240905102917103-BTSrT80m.png",o="/work-blog-website/assets/image-20241111155918389-iCzha5o2.png",B="/work-blog-website/assets/image-20240917234451874-fC4IiHch.png",C="/work-blog-website/assets/image-20240919090530115-lt_FRaIC.png",v="/work-blog-website/assets/image-20240920190050185-BvPCOuet.png",u="/work-blog-website/assets/image-20240920190141005-DKx12HlO.png",m="/work-blog-website/assets/image-20240920190211931-BPxvugdU.png",b="/work-blog-website/assets/image-20240908004413851-QM7N4jIb.png",E="/work-blog-website/assets/image-20240908004736665-zgXnSt0z.png",q={};function f(x,s){const a=k("Mermaid");return p(),h("div",null,[s[0]||(s[0]=i(`<h2 id="_1-docker-的历史" tabindex="-1"><a class="header-anchor" href="#_1-docker-的历史"><span>1.Docker 的历史</span></a></h2><p>容器技术的快速发展改变了现代软件开发和部署的方式，但是这种技术并不新颖，从很久开始就发展起来了，下面历史是收集而来，简单看一看即可...</p><h3 id="_1-1-监狱时期" tabindex="-1"><a class="header-anchor" href="#_1-1-监狱时期"><span>1.1.监狱时期</span></a></h3><ol><li><p>早期的贝尔实验室发明了 <code>chroot</code>，主要是为了避免在一个系统软件编译和安装完成后，需要重写配置环境的情况。因此就考虑能否创建出一个隔离环境，专门用于构建和搭建测试环境，进而得到了一个把进行文件系统隔离的早期容器技术。</p><p><code>chroot</code> 系统调用可以将进程和子进程的根目录更改为文件系统中的新位置（而不是系统的根目录），隔离之后该进程就无法访问外面的文件，如同一个监狱一样（<code>Chroot Jail</code>），后续只需要把测试信息放在 <code>Jail</code> 中就可以完成测试了。</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 演示关于 chroot() 的使用</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stdio.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stdlib.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> char</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">new_root </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/path/to/new/root</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 切换根目录</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chroot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">new_root</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        perror</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chroot failed</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 切换当前工作目录到新根目录</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chdir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        perror</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chdir failed</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 在新的根目录下执行命令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    printf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Now in chrooted environment</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // 例如执行一个命令，这里使用 system 函数</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    system</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/sh</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>到了后来的 <code>FreeBSD Jail</code> 让每一个 <code>Jail</code> 成为在主机上运行的虚拟环境，有自己的文件管理、进程管理、用户管理，甚至还可以为每个虚拟环境分配一个 <code>ip</code> 地址，使得网络空间也被隔离开来，本质也是一种监狱机制。</p></li><li><p>后面还退出了一种叫 <code>Linux VServer</code> 的基于内核的虚拟化技术，可以在单个 <code>Linux</code> 内核实例上创建多个独立的虚拟环境（称为 <strong>安全上下文</strong> 或 <strong>虚拟服务器</strong>）。这些虚拟环境共享相同的内核，但它们在用户空间中是隔离的，每个环境可以有自己的文件系统、网络接口和进程空间。如果您想尝试这种技术，可以安装 <code>VServer</code> 试一试，这里举一个 <code>Ubuntu</code> 的大概伪例子。</p><p>(1)首先您需要一个支持 <code>VServer</code> 的内核以及相关的用户空间工具, 这通常需要从源代码编译或从特定的包管理器安装，也就是 <code>sudo apt-get install linux-image-vserver vserver-debiantools</code></p><p>(2)然后创建新虚拟服务器, 使用 <code>vserver</code> 工具来创建和管理虚拟服务器。创建一个新的虚拟服务器实例，并指定其根文件系统 <code>sudo vserver &lt;vserver_name&gt; build...</code></p><p>(3)使用 <code>sudo vserver &lt;vserver_name&gt; start</code> 启动虚拟服务器</p><p>(4)使用 <code>sudo vserver &lt;vserver_name&gt; enter</code> 命令进入虚拟服务器的上下文环境</p><p>(5)管理虚拟服务器...</p></li><li><p><code>Solaris Containers</code> 软件公测，结合系统资源控制和区域进行了隔离，增加了快照和克隆功能，但是没有太大的发展（也没有那么强需求的场景），依旧是以 <code>Jail</code> 模式为核心</p></li></ol><h3 id="_1-2-云计算时期" tabindex="-1"><a class="header-anchor" href="#_1-2-云计算时期"><span>1.2.云计算时期</span></a></h3><p>云时代是 <code>Google</code> 率先提出的概念，进而发生了各种云厂商，现代的云已经变成了强需求，变成和水电一样的基础设施。云的存在使得个人或企业无需操心大量数据的处理带来的高资源消耗，用户只需要向云服务厂商花费较低的钱，就可以得到高回报的云资源。云的存在使得隔离技术变成核心的诉求。</p><p><code>Google</code> 推出 <code>Process Containers/Control Groups</code> 被合并到 <code>Linux2.6.24</code> 版本中，旨在限制、统计、隔离一组进程的资源使用（这里的资源包括 <code>CPU, 内存, 磁盘IO, 网络...</code>）。</p><ul><li>此时控制和隔离技术都发展起来了，顺势就发展起了 <code>LXC</code> 这个比较完整的 <code>Linxu</code> 容器管理技术，其内部使用 <code>Control Groups</code>（可以控制一个进程组的资源限制和资源管理）和 <code>Linux</code> 命名空间 <code>namespace</code> 来实现（处于不同命名空间的进程组在使用资源的时候，只能感受到自己的资源），可以在单个 <code>Linux</code> 上运行，无需任何补丁</li><li>而后推出的 <code>GAE(Goolge App Engine)</code> 则首次把开发平台当作一种服务来实现，采用云计算技术，跨越多个服务器和数据中心来虚拟化引用程序。而 <code>GAE</code> 内部使用了 <code>Borg</code> 来对容器进行编排和调度</li></ul><p>因此早期的 <code>LXC</code> 和 <code>Borg</code> 其实就相当于最早的 <code>Docker</code> 和 <code>k8s</code>，前者是容器技术，后者是编排技术，本文我们重点提及 <code>Docker</code> 及其相关的技术，关于编排技术我们有机会再谈及。</p><p>因此，云计算就是提供并管理计算资源的服务，将计算资源和服务通过互联网提供给客户。</p><h3 id="_1-3-云原生时期" tabindex="-1"><a class="header-anchor" href="#_1-3-云原生时期"><span>1.3.云原生时期</span></a></h3><p>容器技术比较完善了，但是容器技术只是解决了容器化和分发问题，没有解决但是如何让软件自动部署、自动更新、自动发布、自动回滚、监控、镜像部署等问题，道理云原生时代时，特别强调微服务化、容器化、持续交付。</p><p>云原生和传统云计算之间有一些显著的区别，以下是它们的主要对比：</p><ol><li><strong>架构设计</strong> 云原生基于微服务架构，应用被拆分成多个独立的、自治的服务，每个服务负责特定的功能。这种设计使得应用程序更易于扩展、维护和更新；传统云通常依赖于单体架构，即整个应用作为一个整体进行部署和管理。这种架构可能导致单点故障，并且难以进行独立的扩展和维护。</li><li><strong>容器化与虚拟化</strong> 云原生广泛使用容器（如 <code>Docker</code>）来打包和部署应用。容器提供了应用的环境隔离，并且支持高效的资源利用和快速的部署。主要依赖虚拟机来部署应用。虚拟机提供了完整的操作系统虚拟化，虽然隔离性较好，但启动速度慢，资源利用率不如容器高效。</li><li><strong>持续集成与持续交付(CI/CD)</strong> 云原生强调持续集成和持续交付的实践，通过自动化工具和管道来实现快速的代码提交、测试和部署，确保高频率的交付和快速反馈；传统云可能使用较为传统的部署方式，手动干预较多，更新和发布的周期较长，自动化程度较低。</li><li><strong>编排与管理</strong> 云原生使用动态编排工具如 Kubernetes 来自动管理容器的部署、扩展、负载均衡和故障恢复。这种工具能够高效地管理复杂的分布式应用；传统云通常使用手动的虚拟机管理和配置工具，自动化程度低，管理复杂度高。</li><li><strong>开发与运维</strong> 云原生强调开发（<code>Dev</code>）和运维（<code>Ops</code>）的紧密结合（<code>DevOps</code>），通过自动化工具和实践实现高效的开发和运营；传统云开发和运维可能分开管理，缺乏一体化的自动化工具，导致部署和运维过程较为复杂和耗时。</li><li><strong>扩展与弹性</strong> 云原生支持弹性扩展，可以根据需求动态增加或减少资源。微服务和容器化使得应用可以轻松地扩展和缩减；传统云扩展通常依赖于虚拟机的增减，可能需要手动干预，并且扩展和缩减的速度较慢。</li><li><strong>依赖管理</strong> 云原生使用服务发现、负载均衡和配置管理等机制来处理服务间的依赖关系和通信；传统云可能依赖于固定的 <code>IP</code> 地址和手动配置，处理服务间的依赖和通信更加复杂和不灵活。</li></ol><p>因此，云原生就是设计和优化适合在云上运行的应用程序架构，是一种应用开发和部署模式。</p><h2 id="_2-docker-是什么" tabindex="-1"><a class="header-anchor" href="#_2-docker-是什么"><span>2.Docker 是什么</span></a></h2><p>目前最流行的容器化技术是 <code>Docker</code>，最流行的容器管理服务是 <code>Kubernetes(K8s)</code>，应用/服务可以打包为 <code>Docker</code> 镜像，通过 <code>K8s</code> 来动态分发和部署镜像。<code>Docker</code> 镜像可理解为一个刚好能运行应用/服务的最小操作系统，内部存放应用/服务的运行代码。</p><p>运行环境根据实际的需要提取设置好后，把整个“小操作系统”打包为一个镜像后，就可以分发到需要部署相关服务的机器上，直接启动 <code>Docker</code> 镜像就可以把服务运行起来，使服务的部署和运维变得非常简单。</p><p><code>Docker</code> 不仅仅是解决了容器化问题，还直接给云厂商提供了解决方案。</p><p>可以进一步查看这个视频，我觉得这个 <a href="https://www.bilibili.com/video/BV13GmDY9EtV/?spm_id_from=333.1007.tianma.8-3-29.click&amp;vd_source=c92c89dbfcf9cc30c48086469621f35b" target="_blank" rel="noopener noreferrer">关于 Docker 的视频</a> 讲得不错，并且评论区的一些讨论虽然不是全对，但是足够您了解到一些事情进入深度的思考。</p><h2 id="_3-docker-的安装" tabindex="-1"><a class="header-anchor" href="#_3-docker-的安装"><span>3.Docker 的安装</span></a></h2><p>下面演示在 <code>Ubuntu20.04.4 LTS</code> 下关于 <code>Docker</code> 换阿里源的安装，<span class="heimu" title="你知道的太多了"> 呵，那堵墙就是个 sb 玩意 </span></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Ubuntu20.04.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 安装</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 更新包管理器并且安装必要的依赖包</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">apt-transport-https </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ca-certificates </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">curl </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">gnupg </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">lsb-release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加 Docker 的 GPG 密钥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -fsSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gpg</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --dearmor</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/keyrings/docker-archive-keyring.gpg</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果您可以使用官方源: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加 Docker 软件源</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lsb_release</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -cs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stable</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tee</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/apt/sources.list.d/docker.list</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果您可以使用官方源:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># echo \\</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &quot; deb [arch = amd64 signed-by =/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># $(lsb_release -cs) stable &quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 更新包管理器并且开始安装 Docker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-cli</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containerd.io</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-compose-plugin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Docker 安装版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 27.1.1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6312585</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外，如果有需要的话，还可以给 <code>Docker</code> 配置代理，如果没有魔法的伙伴就可以直接跳过了（不过我觉得按照现在的情况没有魔法可能连 <code>Docker</code> 都用不顺畅...总之您多保重）。</p><p><code>docker pull</code> 命令是由 <code>dockerd</code> 守护进程执行。而 <code>dockerd</code> 守护进程是由 <code>systemd</code> 管理。因此，如果需要在执行 <code>docker pull</code> 命令时使用 <code>HTTP/HTTPS</code> 代理，需要通过 <code>systemd</code> 配置。</p><p>因此为 <code>Dockerd</code> 创建配置文件夹 <code>sudo mkdir -p /etc/systemd/system/docker.service.d</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 配置 Docker 的网络</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/systemd/system/docker.service.d</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/systemd/system/docker.service.d/http-proxy.conf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/systemd/system/docker.service.d/http-proxy.conf</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HTTP_PROXY=http://您配置的代理服务:代理端口/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HTTPS_PROXY=http://您配置的代理服务:代理端口/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重启 Docker 让配置生效</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>另外还可以修改 <code>Docker</code> 的存储目录。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 配置 Docker 的存储</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/docker/daemon.json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;data-root&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;path_value&gt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重启 Docker 让配置生效</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>好了好了，先到此为止，我们不再深入怎么使用 <code>Docker</code> 了，我们先探索以下关于 <code>Docker</code> 的原理再来谈及怎么使用的问题。</p><h2 id="_4-docker-的原理" tabindex="-1"><a class="header-anchor" href="#_4-docker-的原理"><span>4.Docker 的原理</span></a></h2><p>历史“废话”结束，接下来开始学习 <code>Docker</code>，可以 <a href="https://docs.docker.com/engine/" target="_blank" rel="noopener noreferrer">查看官方容器引擎文档</a>，因为我们之前下载的 <code>docker cli</code> 工具底层调用的就是 <code>Docker Engine</code>，也就是容器引擎。不嫌弃更新慢的话，<a href="https://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="noopener noreferrer">查看 Docker 菜鸟文档</a>也是可以的。</p><h3 id="_4-1-虚拟化容器化原理" tabindex="-1"><a class="header-anchor" href="#_4-1-虚拟化容器化原理"><span>4.1.虚拟化容器化原理</span></a></h3><ul><li>物理机：真实的计算机</li><li>虚拟化：从物理机中抽象出来的多台逻辑计算机/虚拟机，每台虚拟机都可以运行不同的操作系统，这些操作系统运行在宿主机器的原生操作系统上，依赖于原生操作系统</li><li>容器化：又叫“操作系统层虚拟化”，可以将操作系统内核抽象为多个逻辑内核（虚拟内核和虚拟内核之前有可能是不一样的），对于每个实例的拥有者来说，有点像进程地址空间一样，会误以为内核专属于自己，而 <code>docker</code> 目前就是容器技术的事实标准（容器技术需要两个基础，一个是通过命名空间控制资源视图，一个是通过控制组限制运行资源）</li></ul><figure><img src="`+t+`" alt="容器 vs 虚拟机" tabindex="0" loading="lazy"><figcaption>容器 vs 虚拟机</figcaption></figure><p>挑重点来说的话就是：</p><ul><li>虚拟机伪造的是硬件物理接口，进而实现在一个操作系统上加载别的操作系统的源代码</li><li>而容器伪造的是操作系统接口，进而实现在一个操作系统上模拟其他操作系统系统调用</li></ul><blockquote><p>补充：我们前面提到的虚拟机的实现虚拟机监视器作为宿主机器的软件被调度，而其实也有直接运行在物理机硬件上的虚拟机监视器软件，我们之前使用的 <code>Linxu</code> 虚拟机软件 <code>Vmware Workstation</code> 就属于前者，而 <code>Vmware ESX</code> 属于后者。</p></blockquote><blockquote><p>补充：为什么需要虚拟技术或容器技术呢？它们都主要是为了方便以下一些场景：</p><ul><li>资源细分化利用率高</li><li>环境标准化保证运行、开发、测试环境一致</li><li>资源弹性伸缩</li><li>差异化环境，可以使得不同项目满足不同的系统环境</li><li>避开不安全软件对整个物理机的影响，也就是沙箱安全</li></ul></blockquote><p>而一旦提及到容器化或 <code>docker</code>，就不得不提及 <code>LXC</code>，而 <code>LXC</code> 底层使用了两种非常重要的技术，一个是命名空间技术，一个是控制组技术。</p><h3 id="_4-2-命名空间技术原理" tabindex="-1"><a class="header-anchor" href="#_4-2-命名空间技术原理"><span>4.2.命名空间技术原理</span></a></h3><p>命名空间技术 您可以了解下 <code>unshare</code> 指令或接口的使用，这个指令您会使用就明白什么是命名空间了。<code>unshare</code> 指令主要就是为了不共享命名空间而服务的，语法格式为 <code>unshare [options] program [arguments]</code>，其底层其实也有配套的系统接口。</p><ul><li><p><code>[options]</code> 如下</p><ul><li><code>-i， --ipc</code> 不共享 <code>IPC(进程通信空间)</code></li><li><code>-m, --mount</code> 不共享 <code>MOUNT(挂载空间)</code></li><li><code>-n. --net</code> 不共享 <code>NET(网络空间)</code></li><li><code>-p, --pid</code> 不共享 <code>PID(进程空间)</code></li><li><code>-u, --uts</code> 不共享 <code>UTS(UNIX 时间共享空间)</code></li><li><code>-U, --user</code> 不共享 <code>USER(用户空间)</code></li></ul></li><li><p><code>program</code> 可以是任意程序</p></li><li><p><code>[arguments]</code> 如下</p><ul><li><code>--fork</code> 执行 <code>unshare</code> 的进程会 <code>fork()</code> 一个新子进程，在子进程中执行 <code>unshare</code> 传入的参数，这样子进程内部执行的 <code>unshare</code> 创建的孙进程在某些情况下（例如创建进程空间不共享的命名空间）就不会因为没有父进程而创建异常</li><li><code>--mount-proc</code> 执行子进程前，将 <code>/pros</code> 优先挂载过去，就不会导致命名空间看到同一个 <code>/pros</code> 进程目录（例如创建进程空间不共享的命名空间，如果看到同一个进程目录就没有意义了）</li></ul></li></ul><p>使用不同的 <code>[options]</code> 可以进入不同的命名空间，如果启动的是 <code>/bin/bash</code> 程序，则可以使用 <code>exit</code> 退出命名空间。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">使用</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># UTS 隔离</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 此时就会有一个子进程 /bin/bash 被创建, 运行在 UTX 不共享的命名空间中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pwd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># PID 隔离</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fork:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Cannot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> allocate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> memory</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 原因是这里的 /bin/bash 虽然是 unshare 的子进程, 但是由于此时进程 ID 和原系统进行了分离, 因此需要创建一个全新的进程, 否则 /bin/bash 就没有父进程无法被创建出来, 导致很多指令无法使用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 所以只能退出当前 bash 然后重新想办法创建命名空间</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --fork</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这种方式就可以避免上述的情况</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ef</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 但这里有一个新问题, 为什么 ps -ef 的结果和没有获取命名空间之前是一样的呢? 就是因为 /pros 目录没有提前做挂载而被子进程继承了...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --fork</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --mount-proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 此时就可以看到 pid 进行了隔离</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ef</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">UID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    PPID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> STIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TTY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          TIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">           1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 23:02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">           7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 23:02</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ef</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># MOUNT 隔离</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unshare</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --mount</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --fork</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> if=/dev/zero</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of=data.img</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bs=8k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> count=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10240</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10240+0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> records</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10240+0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> records</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">83886080</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (84 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) copied, 0.125023 s, 671 MB/s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ext4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./data.img</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mke2fs</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.46.5</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (30-Dec-2021)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Discarding</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> device</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blocks:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                            </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Creating</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filesystem</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20480</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 4k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blocks</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20480</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inodes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Allocating</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tables:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                            </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Writing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tables:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                            </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Creating</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> journal</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1024 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">blocks</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">done</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Writing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> superblocks</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filesystem</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> accounting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> information:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> mount</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ext4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./data.img</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./data</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这个挂载点在外部是无法被看见的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  data.img</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lost+found</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./data</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main.cc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lost+found</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  main.cc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  data.img</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  limou.txt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lost+found</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@bash:/$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ll</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：不过其实还挺奇葩的，叫命名空间却没有所谓的命名出现。不过 <code>unshare</code> 能得到不共享的命名空间，就说明原本的进程门在某些东西上是共享的，这个共享是偏向系统层次的，因为进程说到底都运行在同一个操作系统上，因此共享某一些东西其实也无可厚非。如果只从进程地址空间空间来看的活，确实是相互独立，因此是共享还是独立要根据视角而定，这里说的共享主要有以下资源。</p><ul><li><strong>MOUNT-文件系统挂载共享</strong> 在没有使用 <code>MOUNT</code> 命名空间的情况下，系统中的所有进程共享相同的文件系统挂载点和文件系统视图。即所有进程看到的文件系统结构是相同的，都是从根目录开始的目录树。使用 <code>MOUNT</code> 命名空间后，每个命名空间可以有自己独立的文件系统挂载点。</li><li><strong>NET-网络共享</strong> 在没有网络命名空间时，所有进程共享相同的网络接口、<code>IP</code> 地址、路由表。使用 <code>NET</code> 命名空间后，网络接口和网络配置可以在不同的命名空间中独立存在。</li><li><strong>PID-进程 ID 共享</strong> 没有使用 <code>PID</code> 命名空间时，系统中的所有进程都有一个全局唯一的 <code>PID</code>。使用 <code>PID</code> 命名空间后，每个命名空间内的进程可以有自己的 <code>PID</code> 视图，这样同一个 <code>PID</code> 在不同的命名空间中可能指代不同的进程。</li><li><strong>IPC-进程间通信共享</strong> 在没有 <code>IPC</code> 命名空间的情况下，所有进程共享同样的 <code>IPC</code> 资源，如消息队列、信号量和共享内存。使用 <code>IPC</code> 命名空间后，<code>IPC</code> 资源被隔离，不同命名空间的进程无法相互访问 <code>IPC</code> 资源。</li><li><strong>UTS-主机名共享</strong> 在没有 <code>UTS</code> 命名空间的情况下，系统中的所有进程共享相同的主机名和域名。使用 <code>UTS</code> 命名空间后，每个命名空间可以设置独立的主机名和域名。</li><li><strong>USER-用户共享</strong> 在没有 <code>USER</code> 命名空间的情况下，用户 <code>ID</code> 和组 <code>ID</code> 是全局唯一的。使用 <code>USER</code> 命名空间后，用户和组 <code>ID</code> 可以在不同的命名空间中映射为不同的值，从而实现更细粒度的权限控制。</li></ul></div><h3 id="_4-3-控制组技术的原理" tabindex="-1"><a class="header-anchor" href="#_4-3-控制组技术的原理"><span>4.3.控制组技术的原理</span></a></h3><p>控制组技术则需要通过 <code>mount</code> 指令来实现，不过您需要先使用 <code>cat /proc/filesystems | grep cgroup</code> 查看您的系统是否支持 <code>cgroup</code>，如果是较老版本可能没有显示，或者显示 <code>nodev cgroup</code>，较新的版本还具有 <code>nodev cgroup2</code>。并且可以使用 <code>cat /proc/cgroups</code> 查看可以控制的资源列表（这里面支持的每一种资源也可以叫子系统或者资源控制组，每个子系统代表了一种特定的资源管理功能）。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查 cgroups 的版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /proc/cgroups</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#subsys_name    hierarchy       num_cgroups     enabled</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cpuset</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cpu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cpuacct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">blkio</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">memory</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">devices</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">freezer</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">net_cls</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">perf_event</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">net_prio</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hugetlb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pids</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rdma</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">misc</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       118</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们把应用了某些资源限制的一组进程的集合称为一个控制组，<code>cgroup</code> 的资源控制非常有趣，是分层设计的，每个层级可以包含多个子系统，每个子系统可以应用不同的资源限制。</p><p>那怎么使用控制组呢？首先您需要明白 <code>Linux</code> 提供的控制组 <code>cgroup/cgroup2</code> 其实是一种基于文件系统接口的机制，所以也应该当作一种文件系统来对待，既然是文件系统，就可以把对应的文件系统的设备挂载起来，操作系统一般默认挂载到操作系统下的 <code>/sys/fs/cgroup/</code> 目录下，不过有可能有的操作系统没有这个行为，您可以自己手动进行挂载。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查是否有默认的挂载目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mount</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cgroup</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查看是否有挂载点</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cgroup2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 检查该目录的存在</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">aegis</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   cgroup.threads</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         io.cost.qos</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    sys-fs-fuse-connections.mount</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">aegisMonitor</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            cpu.pressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           io.pressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    sys-kernel-config.mount</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">aegisPythonLoder0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       cpuset.cpus.effective</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.prio.class</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  sys-kernel-debug.mount</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.controllers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      cpuset.mems.effective</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        sys-kernel-tracing.mount</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.max.depth</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        cpu.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               memory.numa_stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               system.slice</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.max.descendants</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev-hugepages.mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    memory.pressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                user.slice</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.procs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            dev-mqueue.mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       memory.stat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             init.scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             misc.capacity</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.subtree_control</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.cost.model</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          proc-sys-fs-binfmt_misc.mount</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果不存在这个目录，那就使用这条指令进行手动挂载，不过有个比较重要的问题是，实际上没有一种设备是属于 <code>cgroup/cgroup2</code> 这种设备因此实际上我们设备使用 <code>none</code> 作为占位符就行，不用把任何文件或设备进行挂载。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 手动挂载(如果您的系统已挂载了则无需操作这一步)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup/</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mount</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cgroup2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后我们才能开始创建一个控制组，如下进行操作即可。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建控制组并且配置限制条件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建一个控制组并且打开</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup/my_group/</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup/my_group/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 了解在控制组目录下的配置文件(以下文件您可以在通过 tree | grep &quot;...&quot; 的形式查看系统内其他的控制组是怎么设置的, 另外不同版本的 cgroup 有可能文件名后缀不同, 这里演示的是 cgroup2 的)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/cgroup.procs: 这个配置文件用于列出属于该控制组的所有进程 pid, 您可以将进程 pid 写入到这个文件中来将进程加入到该控制组中, 并且使用换行区分不同的进程 pid</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/memory.max: 设置控制组的最大内存使用限制, 写入 -1 则代表无限制, 若写入其他正整数值 num 则代表不得超过 num byte</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/cpu.max: 设置控制组的 CPU 使用限制, 写入 &lt;max&gt; &lt;period&gt;, 其中 &lt;max&gt; 表示允许的最大 CPU 时间(以微秒为单位), &lt;period&gt; 表示计算 CPU 使用时间的周期(以微秒为单位), 整体代表每 period 周期内最多可以运行的 max 时间长度的 CPU 时间。特殊的, 如果写入 max 100000 则代表没有限制</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/pids.max: 设置控制组中可以创建的最大进程数, 直接写入一个正整数值即可。特殊的, 如果写入 max 则代表没有限制</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/io.max: 设置 IO 设备的限制，例如读写速率限制, 写入 &lt;READ_RATE&gt; &lt;WRITE_RATE&gt;, 分别指读和写的速率限制(以字节每秒为单位)。特殊的, max max 代表对读写毫无限制</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# /sys/fs/cgroup/&lt;controller&gt;/cgroup.subtree_control: 在 cgroup 中控制启用或禁用某个子系统, 也就是随时启用和禁用某种资源限制, 书写格式例如 +memory +cpu 代表启用 memory 和 cpu 子系统, -memory 代表禁用 memory 子系统</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	# ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -al</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到我们仅仅是创建了一个 my_group 目录, 内部却自动创建了很多上述描述的配置文件, 如果您发现文件的名字或后缀有些不一样, 可能就是因为内核版本不同带来的 cgroup 版本不同带来的问题</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.controllers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      cgroup.type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            cpu.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         memory.current</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       memory.stat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.events</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           cpu.idle</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               cpu.uclamp.max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   memory.events</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        memory.swap.current</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.freeze</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           cpu.max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                cpu.uclamp.min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   memory.events.local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  memory.swap.events</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.kill</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             cpu.max.burst</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          cpu.weight</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       memory.high</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          memory.swap.high</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.max.depth</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        cpu.pressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           cpu.weight.nice</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  memory.low</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           memory.swap.max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.max.descendants</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  cpuset.cpus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            io.max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           memory.max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           pids.current</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.procs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            cpuset.cpus.effective</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.pressure</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      memory.min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           pids.events</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             cpuset.cpus.partition</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.prio.class</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    memory.numa_stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     pids.max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.subtree_control</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  cpuset.mems</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            io.stat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          memory.oom.group</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cgroup.threads</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          cpuset.mems.effective</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  io.weight</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        memory.pressure</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 不过这里我不测试所有的情况, 使用 stress 测压指令来简单测试内存控制和 CPU 控制的情况</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20971520</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> memory.max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 配置内存限制为 20 MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">30000 100000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cpu.max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 配置 CPU 使用率限制为 30%</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启用内存子系统, 让内存限制生效(同时关闭 CPU 限制, 避免影响)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+memory -cpu</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cgroup.subtree_control</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在启动一个测压进程进行测试</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --vm-bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看 stress 的 pid 具体值</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -aux</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        9503</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   3708</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1400</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --vm-bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        9505</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80.7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  54912</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  3804</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    R</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:03</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --vm-bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        9515</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6480</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2308</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    S+</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> grep</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --color=auto</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加 pid 到控制组中的管理文件中(两个都添加进去)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9503\\n9505</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cgroup.procs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 再次观察可以发现测压进程消失了...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -aux</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启用 CPU 子系统, 让 CPU 限制生效(同时关闭内存限制, 避免影响)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-memory +cpu</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup/my_cgroup/cgroup.subtree_control</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在后台启动一个测压进程进行测试</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查询测压进程的 PID 并且添加到测试组管理中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -aux</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查看 stress 的 pid 具体值</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        2332</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   3708</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1400</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --vm-bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        2334</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80.7</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  54912</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  3804</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    R</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:03</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --vm-bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1101</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6480</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2308</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pts/1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    S+</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   14:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> grep</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --color=auto</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加 pid 到控制组中的管理文件中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2332\\2334</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /sys/fs/cgroup/my_cgroup/cgroup.procs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 再次观察可以发现测压进程消失了...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -aux</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stress</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：上述过程我还是没有试验出来，很离谱 <code>Linux</code> 哪怕是我使用 <code>root</code> 也无法写入，以后换 <code>cgroup v1</code> 试试，待补充...</p></div><div class="hint-container note"><p class="hint-container-title">注</p><p>吐槽：有时会看到把两者都当作虚拟技术的情况，这种应该是认为两者实际上都是伪装术，只不过伪装的颗粒度不同的，因此统称为虚拟技术确实是可以的。另外还有一种模拟函数库的虚拟技术，最有名的就是 <code>Java</code> 的 <code>JVM</code> 虚拟机，模拟的就是函数库的接口，也就可以做到所谓的“一处运行，到处跑”。</p></div><h3 id="_4-3-lxc-的底层原理" tabindex="-1"><a class="header-anchor" href="#_4-3-lxc-的底层原理"><span>4.3.LXC 的底层原理</span></a></h3><p><code>Linux Containers</code> 简称为 <code>LXC</code>，实际上是依赖于 <code>Linux</code> 的命名空间、控制组等技术来构成的一个软件工具，可以认为 <code>Docker</code> 是其增强版本的软件，因此学习 <code>LXC</code> 可以一定程度迁移到 <code>Docker</code> 中。<code>LXC</code> 创建容器的过程要比直接调用底层的接口要来的方便，在 <code>Ubuntu</code> 中可以通过 <code>sudo apt-get install lxc</code> 的方式安装并且使用。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装 lxc 并且检查和查看一些配置</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装并且检查是否运行中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">●</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc.service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LXC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Initialization</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Autoboot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Code</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">     Loaded:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (/lib/systemd/system/lxc.service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> vendor</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preset:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">     Active:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> active</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (exited) since Mon 2024-08-12 16:15:32 CST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 2min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 38s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       Docs:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> man:lxc-autostart</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">             man:lxc</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Process:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14503</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ExecStartPre=/usr/lib/x86_64-linux-gnu/lxc/lxc-apparmor-load</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (code=exited, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">status=0/SUCCE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">S</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Process:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14508</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ExecStart=/usr/lib/x86_64-linux-gnu/lxc/lxc-containers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (code=exited, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">status=0/SUCCE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">S</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   Main</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PID:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14508</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (code=exited, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">status=0/SUCCESS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        CPU:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14ms</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查 lxc 当前的配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-checkconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LXC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /proc/config.gz</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> searching...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /boot/config-5.15.0-113-generic</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Namespaces</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Namespaces:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 命名空间功能已启用, 支持容器隔离</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Utsname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 主机名空间已启用, 容器可以有独立的主机名</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Ipc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # IPC 命名空间已启用, 容器可以有独立的进程间通信</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # PID 命名空间已启用, 容器可以有独立的进程 ID</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">User</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 用户命名空间已启用, 容器可以有独立的用户 ID 映射</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 网络命名空间已启用, 容器可以有独立的网络堆栈</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Control</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> groups</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroups:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 控制组功能已启用, 支持资源管理和限制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namespace:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # Cgroup 命名空间已启用, 支持 cgroup 命名空间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> points:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> points:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/sys/fs/cgroup</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # Cgroup v2 的挂载点</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> controller:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> missing</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 缺失, 系统 d 的 cgroup v1 控制器未启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> freezer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> controller:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> missin</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 缺失, cgroup v1 冻结控制器未启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ns_cgroup:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 需要, 容器需要 cgroup 名称空间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> device:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设备控制器已启用, 支持设备控制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sched:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 调度器控制器已启用, 支持调度器控制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cpu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> account:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # CPU 资源计量控制已启用, 支持 CPU 资源计量</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> memory</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> controller:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 内存控制器已启用, 支持内存控制</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Cgroup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cpuset:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # CPU 集合控制已启用, 支持 CPU 集合控制</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Misc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Veth</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pair</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> device:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 虚拟以太网对设备支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Macvlan:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # MAC 虚拟 LAN 支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Vlan:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 虚拟 LAN 支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Bridges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 桥接支持已启用并加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Advanced</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> netfilter:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 高级网络过滤支持已启用并加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_IP_NF_TARGET_MASQUERADE:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # IP 伪装支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_IP6_NF_TARGET_MASQUERADE:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # IPv6 IP 伪装支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_NETFILTER_XT_TARGET_CHECKSUM:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 网络过滤校验和支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_NETFILTER_XT_MATCH_COMMENT:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> loaded</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 网络过滤注释支持已启用, 但未加载</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FUSE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (for </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxcfs</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): enabled, not loaded </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># FUSE 支持已启用, 但未加载</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Checkpoint/Restore</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> ---</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">checkpoint</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restore:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 检查点和恢复功能已启用,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 支持容器检查点和恢复</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_FHANDLE:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 文件句柄支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_EVENTFD:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 事件支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_EPOLL:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 事件轮询支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_UNIX_DIAG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # UNIX 诊断支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_INET_DIAG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # IPv4 诊断支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_PACKET_DIAG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 数据包诊断支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONFIG_NETLINK_DIAG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enabled</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 网络链接诊断支持已启用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">File</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> capabilities:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Note</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Before</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> booting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> new</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kernel,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> can</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> check</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> its</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">usage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CONFIG=/path/to/config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/bin/lxc-checkconfig</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定要检查的内核配置文件路径, 或运行 lxc-checkconfig 工具</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看 lxc 提供的容器模板(目前有点少...后面再来下载)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -al</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/lxc/templates</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 56</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">drwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  4096</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Aug</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">drwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  4096</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Aug</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ..</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  8601</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-busybox</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14497</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-download</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  7178</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10737</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-oci</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>LXC</code> 本质上是 <code>Linux</code> 内核容器功能的一个用户空间接口，因此 <code>lxc</code> 本身是运行在用户空间的，它将应用系统打包为一个软件容器，内部可以包含应用软件本身的代码，以及 <strong>所需要的操作系统核心和库</strong>，通过统一的命名空间和共享 <code>API</code> 来分配不同软件容器的可用资源，进而创建出用户级的独立沙箱环境，使得 <code>Linux</code> 更加快捷创建和管理应用容器。</p><figure><img src="http://kube-portal.oss-cn-shenzhen.aliyuncs.com/uploads/20220314/241032c5a4e41328a4a8bacc9c4307e9.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>但是，<code>LXC</code> 的弱点也是明显的：</p><ul><li><strong>隔离性有限</strong> 相比虚拟机，<code>LXC</code> 的隔离性较弱，因为容器共享一台主机内核</li><li><strong>数据迁移困</strong> 数据从一个容器中迁移到另一个容器中可能涉及复杂的数据和配置迁移步骤</li><li><strong>内核依赖高</strong> 依赖于主机内核的特性，内核的变化可能影响容器的运行，并且 <code>LXC</code> 几乎只支持 <code>linux-like</code> 的操作系统</li><li><strong>功能限制多</strong> 与完整的虚拟机相比，某些功能和配置选项可能受限</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 简单使用 lxc 创建容器</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 首先我们需要安装 LXC 模板, 我们上面显示出来的模板目录中的内容是比较少的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-templates</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看目前下载好的模板</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -al</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/lxc/templates</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 528</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13630</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-alpine</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Alpine Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14170</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-altlinux</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # ALT Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 11214</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-archlinux</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # Arch Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  8601</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-busybox</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # BusyBox</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 30598</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-centos</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # CentOS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10368</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-cirros</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Cirros</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 26579</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-debian</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Debian</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14497</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-download</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # Download Template</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 41919</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-fedora</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Fedora</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 49755</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-fedora-legacy</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # Fedora Legacy</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 28398</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-gentoo</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Gentoo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  7178</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-local</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # Local Template</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10737</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-oci</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # OCI (Open Container Initiative) Template</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13890</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-openmandriva</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # OpenMandriva</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16701</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-opensuse</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # openSUSE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 41585</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-oracle</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Oracle Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13865</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-plamo</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # Plamo Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13086</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-pld</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # PLD Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 14277</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-sabayon</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # Sabayon Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19148</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-slackware</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # Slackware</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 26656</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-sparclinux</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     # Sparclinux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  6845</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-sshd</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">           # SSH Daemon</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 26276</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-ubuntu</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # Ubuntu</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 11747</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-ubuntu-cloud</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # Ubuntu Cloud</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  6009</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Mar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  2021</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-voidlinux</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # Void Linux</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-create</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ubuntu</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 格式为 sudo lxc-create -n 创建的容器名字 -t 指定的容器模板</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 繁多的容器初始化信息</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">##</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># The default user is &#39;ubuntu&#39; with password &#39;ubuntu&#39;!</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Use the &#39;sudo&#39; command to run tasks as root in the container.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">##</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 上面这里提示的就是默认的用户名为 ubuntu, 密码也是 ubuntu</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 而容器被放到 /var/lib/lxc/&lt;容器名&gt; 这个目录下</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/lxc/my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rootfs</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # config 是容器的配置文件, rootfs 是容器的根目录, 您可以简单查看一下</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器的配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/lxc/my-container/config</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Template used to create this container: /usr/share/lxc/templates/lxc-ubuntu</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Parameters passed to the template:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># For additional config options, please look at lxc.container.conf(5)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Uncomment the following line to support nesting containers:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#lxc.include = /usr/share/lxc/config/nesting.conf</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># (Be aware this has security implications)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Common configuration</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.include</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/lxc/config/ubuntu.common.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Container specific configuration</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.rootfs.path</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dir:/var/lib/lxc/my-container/rootfs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.uts.name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.arch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> amd64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Network configuration</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.net.0.type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> veth</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.net.0.link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxcbr0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.net.0.flags</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lxc.net.0.hwaddr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:16:3e:5d:49:40</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器的根目录结构</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/lxc/my-container/rootfs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  libx32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  tmp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  var</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  usr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看创建容器的过程中缓存的软件包(当您想另外建一个一样的容器时, 可以省去很多下载时间)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/cache/lxc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 列出当前所有的容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # -f 表示打印常用的信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         STATE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   AUTOSTART</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GROUPS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IPV4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IPV6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UNPRIVILEGED</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my-container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> STOPPED</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看某个容器当前的状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-info</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">State:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STOPPED</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这里显示目前的容器处于停止状态</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动容器然后查看容器的状态(可以看到地址、磁盘挂载信息、目录信息都和宿主机不一样)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-start</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-info</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">State:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          RUNNING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PID:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            41456</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IP:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">             10.0.3.227</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Link:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           vethRyGMCs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.26</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.39</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2.66</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入容器中, 像使用一台真正主机一样操作容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-attach</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # -- 被视为分隔符, 可以用来分割前面的选项和在容器内部执行的命令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@my-container:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  libx32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  tmp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  var</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  usr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 退出容器的 bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@my-container:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 和一般的主机一样使用 exit 或者 [ctrl+d] 即可退出容器的 bash</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在容器外面把命令交给容器去执行</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-attach</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --clear-env</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello limou</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # --clear-env 这个选项可先清除容器中当前的环境变量, 仅保留必要的最小环境变量集, 有助于确保在容器中执行的命令不会受到外部环境影响</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 停止容器然后查看查看容器的状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-stop</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-info</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Name:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           my-container</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">State:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STOPPED</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lxc-destroy</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-container</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此外还有一些比较轻小的指令，作为 <code>Linux</code> 下的快速实验环境还是非常不错的，毕竟容器的根目录树可以任意修改，也不怕系统奔溃。还有其他的指令这里就不再赘述，您可以在网上搜索，或者 <a href="https://linuxcontainers.org/" target="_blank" rel="noopener noreferrer">访问 LXC 的官网查询一下</a> 即可。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：不过只有命名空间技术和控制组技术其实还远远不够构成一个 <code>LXC</code> 软件，还需要其他的技术，有机会以后待补充...</p></div><h3 id="_4-4-docker-本身原理" tabindex="-1"><a class="header-anchor" href="#_4-4-docker-本身原理"><span>4.4.Docker 本身原理</span></a></h3><h4 id="_4-4-1-docker-早期设计" tabindex="-1"><a class="header-anchor" href="#_4-4-1-docker-早期设计"><span>4.4.1.Docker 早期设计</span></a></h4><p><code>Docker</code> 狭义理解来说本身其实不是容器，而是 <code>LXC</code> 之类的增强版，是使得容器易用的工具。容器是 <code>Linux</code> 中的技术，但是被 <code>Docker</code> 这项技术推广并且普及了。事实上 <code>Docker</code> 早期就是作为 <code>LXC</code> 的二次封装来发行的。</p><p><code>Docker</code> 是一个用 <code>Go</code> 编写的项目，主要目的是 <code>Build, ship and run any app, anywhere.(在任何地方构建，发布, 运行任何应用程序)</code> 使得用户的应用能一次封装，到处运行。</p><p>早期的 <code>Docker</code> 利用 <code>LXC</code> 做容器管理的引擎，但不再像 <code>LXC</code> 一样使用模板来安装生成，而是使用镜像技术，把一个操作系统用户程序所需要的接口库提前编排好并整体打包（<code>build</code>）为 <code>.image</code> 文件。而这些镜像文件会被集中运送（<code>ship</code>）到一个仓库中，当需要创建容器时，<code>Docker</code> 连接镜像服务器（也就是镜像仓库）来下载匹配的镜像文件，再基于镜像直接调用 <code>LXC</code> 的 <code>lxc-create</code> 工具启动容器即可（<code>run</code>）。</p><p>因此就是依靠前面的命名空间技术和控制组技术来达成容器化的目的。</p><h4 id="_4-4-2-docker-引擎迭代" tabindex="-1"><a class="header-anchor" href="#_4-4-2-docker-引擎迭代"><span>4.4.2.Docker 引擎迭代</span></a></h4><p>但是后来的 <code>Docker</code> 组件抛弃了 <code>LXC</code> 容器管理引擎，先后研发了 <code>libcontainer, CNCF, RunC(libcontainer其实就是RunC的核心模块)</code> 目前比较新的 <code>Docker</code> 使用的容器管理引擎就是 <code>RunC</code>，用户是通过 <code>containerd</code> 进行调用的（<code>containerd</code> 的作用和 <code>systemd</code> 类似，都是守护进行，也是由 <code>Docker</code> 官方自己进行维护）。后来，<code>RunC</code> 逐渐变成了容器标准，而和 <code>Google</code> 的第二次竞争中，<code>Google</code> 公司的 <code>k8s</code> 打败了 <code>Docker</code> 公司的 <code>Swarm</code>，成为了编排标准（编排就是对多个容器的管理方案）。</p><p>而后来 <code>Docker</code> 公司把 <code>Docker</code> 的命名交给收费版，原来的 <code>Docker</code> 项目改名为 <code>Moby</code>，<a href="https://mobyproject.org/" target="_blank" rel="noopener noreferrer">可以前往 Moby 的官网查看源代码</a>。发展到现在，我们对 <code>Docker</code> 主要有两个称呼，<code>Docker-CE(moby, containerd, runc...)</code> 和 <code>Docker-EE(Docker-CE本身, 其他组件和功能)</code>，前者是开源版本，后者是收费版本，<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">可以前往 Docker 官网查看</a>。</p><p>至此，我们就需要开始学习如何使用现代的 <code>Docker</code> 了，下面以我们之前下载好的 <code>Docker version 27.1.1</code> 版本作为演示。</p><h4 id="_4-4-3-docker-镜像原理" tabindex="-1"><a class="header-anchor" href="#_4-4-3-docker-镜像原理"><span>4.4.3.Docker 镜像原理</span></a></h4><p><code>Docker</code> 镜像的本质是一个只读的文件，内部包含文件系统、源代码、库文件、依赖、工具和一些运行镜像 <code>Docker</code> 所需的文件。通过镜像文件可以实例出很多的容器实体（就像一个压缩包）。</p><p>镜像文件本质是又多个层构成的，每一个层都是一个文件系统 <code>Union FS</code>，合起来就形成一个虚拟文件系统，每一层都有三种权限（只读、读写、写出），不过镜像文件基本都是设置为只读的。</p><p><code>Docker</code> 会根据一个 <code>dockerfile</code> 来一步步从最低一层开始构建镜像文件，上层的修改会覆盖下层的可见性。</p><p>而 <code>Docker</code> 项目最大的贡献就是定义了关于镜像文件分层的存储格式，这种分层非常方便共享，减少存储空间占用，提高可维护性。</p><p>因此如果之前的镜像文件中在远端仓库中已经存在，则会进行引用而不用推送，加快传输速度。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：理论上我们也可以自己编写镜像文件，不过我们后面再补充...</p></div><h4 id="_4-4-4-docker-容器原理" tabindex="-1"><a class="header-anchor" href="#_4-4-4-docker-容器原理"><span>4.4.4.Docker 容器原理</span></a></h4><p>容器其实就是镜像文件的一份实例化，本质就是操作系统的一个进程，容器有 <code>初建(created), 运行(running), 停止(stopped), 暂停(paused), 删除(deleted)</code> 五种状态。</p><p>不过，只有宿主机看得到各个容器的进程列表、环境变量、网络配置等，每一个容器内部只能知道自己的，而无法知道宿主主机的内容。</p><p>不过此时容器在实例的最上面一层添加了一层读写层（也就是容器层），这一层可以被使用容器的用户进行修改，进而影响整个镜像副本。</p><h2 id="_5-docker-的仓库" tabindex="-1"><a class="header-anchor" href="#_5-docker-的仓库"><span>5.Docker 的仓库</span></a></h2><h3 id="_5-1-常见镜像仓库分类" tabindex="-1"><a class="header-anchor" href="#_5-1-常见镜像仓库分类"><span>5.1.常见镜像仓库分类</span></a></h3><ul><li><p>按是否对外开放分类：</p><p>(1)<strong>公有仓库</strong>：像阿里云、<code>Docker Hub</code> 等放在公有网络上的仓库，用户无需登录即可下载镜像，供大家访问和使用</p><p>(2)<strong>私有仓库</strong>：不对外开放，通常位于私有网络，只有公司内部人员可以使用</p></li><li><p>按供应商和面向群体分类：</p><p>(1)<strong>Sponsor Registry(赞助)</strong>：第三方提供的仓库，供客户和 <code>Docker</code> 社区版用户使用</p><p>(2)<strong>Mirror Registry(镜像)</strong>：第三方提供的仓库，仅限注册用户使用，例如阿里云的镜像仓库需要注册才能访问</p><p>(3)<strong>Vendor Registry(供应商)</strong>：由发布 <code>Docker</code> 镜像的供应商提供的仓库，例如 <code>Google</code> 和 <code>Red Hat</code> 提供的镜像仓库服务</p><p>(4)<strong>Private Registry(私有仓库)</strong>：通过没有防火墙和额外安全层的私有实体提供的仓库，仅供内部使用</p></li></ul><p>实际工作中，开发者一般都是先 <code>pull</code> 公共公有仓库和公司私有仓库中的镜像，进行开发，开发结束后再制作为镜像 <code>push</code> 到公司私有仓库中，然后反复交给不同团队 <code>deploy(部署)</code> 到 <code>开发环境, 测试环境, 预发布环境, 生产环境</code> 中，确保运行环境统一。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：私有仓库部署工具有 <code>Harbor, Nexus, Docker registry(已停止维护)...</code> 您可以前往了解一下。</p></div><p>为了方便，我直接是哟个 <code>Docker Hub</code> 来存储镜像，这个网站类似 <code>github</code>，可以开放或私有镜像存储仓库。</p><h3 id="_5-2-使用官方公有镜像仓库" tabindex="-1"><a class="header-anchor" href="#_5-2-使用官方公有镜像仓库"><span>5.2.使用官方公有镜像仓库</span></a></h3><ul><li><code>docker login [-u &lt;用户&gt; -p &lt;密码&gt;]</code> 登录镜像仓库（这里的用户和密码是指在 <code>Docker Hub</code> 上的注册的账号）</li><li><code>docker logout</code> 登出镜像仓库（登出的默认也是 <code>Docker Hub</code> 中的账户）</li><li><code>docker pull &lt;镜像名称:镜像版本&gt;/&lt;镜像名称@&gt;</code> 默认从 <code>Docker Hub</code> 拉取镜像文件，使用 <code>-a</code> 则拉取所有镜像，使用 <code>--disable-content-trust</code> 则忽略镜像的校验（默认开启）</li><li><code>docker push</code> 默认从 <code>Docker Hub</code> 推送镜像文件，推送的过程中会发生压缩传输，并且不是简单把一个镜像文件直接传输上去，而是一个一个层传送上去，如果遇到远端仓库中已有某个镜像层，就会直接进行引用加快传输提高代码复用</li><li><code>docker search</code> 查看当前远端存储库 <code>Docker Hub</code> 中已有公开的镜像文件</li></ul><p>其中，如果是需要登录的镜像地址，就需要 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">到 Docker Hub 镜像仓库中创建一个账户</a>，然后才可以开始实践有关登录的指令，如下开始进行账户注册。</p><figure><img src="`+e+`" alt="image-20240904185051547" tabindex="0" loading="lazy"><figcaption>image-20240904185051547</figcaption></figure><p>注册好并且登录好账户后，我们开始使用指令。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试实践登录和登出指令</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 直接登录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> login</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> email</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hub.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> If</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> don</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">t have a Docker ID, head over to https://hub.docker.com/ to create one.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">You can log in with your password or a Personal Access Token (PAT). Using a limited-scope PAT grants better security and is required for organizations using SSO. Learn more at https://docs.docker.com/go/access-tokens/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Username: limou3434</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Password: </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">WARNING! Your password will be stored unencrypted in /home/ljp/.docker/config.json.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docs.docker.com/engine/reference/commandline/login/#credential-stores</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Login Succeeded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"># 退出登录</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$ docker logout</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Removing login credentials for https://index.docker.io/v1/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"># 使用参数一次性登录</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$ docker login -u limou3434 -p ******</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">WARNING! Your password will be stored unencrypted in /home/ljp/.docker/config.json.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docs.docker.com/engine/reference/commandline/login/#credential-stores</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Login Succeeded # 不过一般不建议使用这种带参数的</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试拉取镜像文件, 并查看当前已有镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用版本号拉取镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1.23.4:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f03b40093957:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0972072e0e8a:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a85095acb896:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d24b987aa74e:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6c1a86118ade:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">9989f7b33228:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/nginx:1.23.4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用字符串拉取镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx@sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这串字符源于 dockerhub 的 tag 界面中, 下面有给出图解</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/nginx@sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx@sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/nginx@sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看本地已有的镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+d+'" alt="image-20240904200507102" tabindex="0" loading="lazy"><figcaption>image-20240904200507102</figcaption></figure><p>然后我们开始在 <code>Docker Hub</code> 上创建属于自己的镜像存储仓库，用来推送镜像文件。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：存储仓库的名字必须和镜像文件名字相同。</p></div><p>而由于我们没有对 <code>Nginx</code> 镜像的推送权限，因此我们只能把自己的镜像 <code>push</code> 到自己的镜像存储库中，不过我们需要先有一个存储库，依照下图进行创建即可。</p><figure><img src="'+r+'" alt="image-20240904222537120" tabindex="0" loading="lazy"><figcaption>image-20240904222537120</figcaption></figure><figure><img src="'+A+'" alt="image-20240904231652356" tabindex="0" loading="lazy"><figcaption>image-20240904231652356</figcaption></figure><figure><img src="'+g+`" alt="image-20240904231729606" tabindex="0" loading="lazy"><figcaption>image-20240904231729606</figcaption></figure><p>创建成功后就会跳出 <code>docker push limou3434/my_test_repository:tagname</code> （就不要用我的存储库了，我没多久就释放掉这个库了）然后在命令行中尝试执行这个命令。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 推送单个镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看当前已有的镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 需要给我们自己的镜像设置名称和标签</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:0.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看此时的镜像文件列表</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 不过这里的镜像文件名字必须和远端仓库一样, 没办法只好删除掉这个镜像文件重新设置了</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rmi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Untagged:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:0.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:0.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3k</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 然后开始做 push, 不过登陆之前建议重新登录一下 docker 账户, 否者有时会验证失败</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> login</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> email</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hub.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> If</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> don</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">t have a Docker ID, head over to https://hub.docker.com/ to create one.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">You can log in with your password or a Personal Access Token (PAT). Using a limited-scope PAT grants better security and is required for organizations using SSO. Learn more at https://docs.docker.com/go/access-tokens/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Username: limou3434</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Password: </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docs.docker.com/engine/reference/commandline/login/#credential-stores</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Login Succeeded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$ docker push limou3434/my_test_repository:0.0.1</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">The push refers to repository [docker.io/limou3434/my_test_repository]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">4d33db9fdf22: Mounted from library/nginx </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6791458b3942: Mounted from library/nginx </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2731b5cfb616: Mounted from library/nginx </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">043198f57be0: Mounted from library/nginx </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5dd6bfd241b4: Pushed </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8cbe4b54fa88: Mounted from library/nginx </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.1: digest: sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf size: 1570 # 至此推送成功</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+y+'" alt="image-20240904235818330" tabindex="0" loading="lazy"><figcaption>image-20240904235818330</figcaption></figure><p><img src="'+c+`" alt="image-20240904235904948" loading="lazy"> 此时在这里就可以看到推送的记录，点进去也可以看到其他的详细信息，还可以一次性推送多个版本的同名镜像文件。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 推送多个镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:0.1.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:1.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> refers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> repository</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [docker.io/limou3434/my_test_repository]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4d33db9fdf22:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pushed</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6791458b3942:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2731b5cfb616:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pushed</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">043198f57be0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5dd6bfd241b4:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8cbe4b54fa88:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0.1:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1570</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4d33db9fdf22:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6791458b3942:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2731b5cfb616:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">043198f57be0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5dd6bfd241b4:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8cbe4b54fa88:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.1.0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1570</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4d33db9fdf22:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6791458b3942:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2731b5cfb616:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">043198f57be0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5dd6bfd241b4:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8cbe4b54fa88:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Layer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1.0.0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1570</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+D+`" alt="image-20240905102917103" tabindex="0" loading="lazy"><figcaption>image-20240905102917103</figcaption></figure><p>既然有镜像仓库了，那能不能在命令行中查找 <code>Docker Hub</code> 上这个存储仓库呢？可以使用 <code>images</code> 和 <code>search</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查找 Docker Hub 上存储仓库镜像内容</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 images 指令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 search 指令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> search</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:0.0.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-trunc</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #  --no-trunc 可以显示完整的镜像描述, 而不会因为信息较长发生截断</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                           DESCRIPTION</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           STARS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     OFFICIAL</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   My</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> repository.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 不过 search 指令还能更加详细进行查询</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> search</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is-official=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # --filter 选项用于过滤搜索结果, is-official = true 只过滤出官方镜像</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      DESCRIPTION</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                STARS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     OFFICIAL</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Official</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Nginx.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   20170</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">     [OK]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> search</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stars=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20171</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # stars 代表过滤大于 stars 值的仓库</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      DESCRIPTION</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STARS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     OFFICIAL</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外，也可以使用一些云服务厂商提供的服务，待补充...</p></div><h3 id="_5-3-使用个人私有镜像仓库" tabindex="-1"><a class="header-anchor" href="#_5-3-使用个人私有镜像仓库"><span>5.3.使用个人私有镜像仓库</span></a></h3><p>待补充...</p><h2 id="_6-docker-的基础" tabindex="-1"><a class="header-anchor" href="#_6-docker-的基础"><span>6.Docker 的基础</span></a></h2><h3 id="_6-1-更改软件配置" tabindex="-1"><a class="header-anchor" href="#_6-1-更改软件配置"><span>6.1.更改软件配置</span></a></h3><h4 id="_6-1-1-修改镜像加速地址" tabindex="-1"><a class="header-anchor" href="#_6-1-1-修改镜像加速地址"><span>6.1.1.修改镜像加速地址</span></a></h4><p>由于某些比较屮的原因，这里提供一个镜像源的更改方案，让镜像获取更加方便，我是参考 <a href="https://cloud.tencent.com/developer/article/2428707" target="_blank" rel="noopener noreferrer">这篇文章</a> 的。配置完毕后，可以运行以下代码进行测试。我的配置文件如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 我的配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docker.m.daocloud.io</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://noohub.ru</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://huecker.io</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://dockerhub.timeweb.cloud</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docker.mirrors.ustc.edu.cn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hub-mirror.c.163.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://mirror.ccs.tencentyun.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 测试配置是否成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Unable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> find</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello-world:latest</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> locally</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">latest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/hello-world</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">c1ec31eb5944:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:53cc4d415d839c98be39331c948609b659ed725170ad2ca8eb36951288f81b75</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world:latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker!</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> message</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> shows</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> that</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> appears</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> be</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> working</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> correctly.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">To</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> generate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> message,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> took</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> following</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> steps:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> client</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> contacted</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 2.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pulled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello-world</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hub.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">amd64</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 3.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> new</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> that</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> which</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> runs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    executable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> that</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> produces</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> currently</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reading.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 4.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> streamed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> that</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> client,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> which</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> it</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> terminal.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">To</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> try</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> something</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> more</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ambitious,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> can</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ubuntu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> $</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ubuntu</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Share</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> automate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> workflows,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> more</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> free</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> https://hub.docker.com/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">For</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> more</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> examples</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ideas,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> visit:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> https://docs.docker.com/get-started/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">注</p><p>吐槽：额...且用且珍惜叭，如果不行就配置下代理服务器叭...</p></div><p>镜像仓库网站的原理本身也不复杂，可以用如下图进行解释。</p><figure><img src="`+o+`" alt="image-20241111155918389" tabindex="0" loading="lazy"><figcaption>image-20241111155918389</figcaption></figure><p>而有关的镜像，可以 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">在 dockerhub 上进行查找不同的镜像</a>。</p><h4 id="_6-1-2-修改配置文件地址" tabindex="-1"><a class="header-anchor" href="#_6-1-2-修改配置文件地址"><span>6.1.2.修改配置文件地址</span></a></h4><p>待补充...</p><h3 id="_6-2-核心命令解析" tabindex="-1"><a class="header-anchor" href="#_6-2-核心命令解析"><span>6.2.核心命令解析</span></a></h3><p>核心指令这里只是一个快速阅览手册，实践这些指令的内容我大部分都写在文章的最后面。因此，您可以一边查看指令，一边阅读最低下的实践部分，并且打开自己的 <code>Linux</code> 进行实践。</p><h4 id="_6-2-1-镜像文件指令" tabindex="-1"><a class="header-anchor" href="#_6-2-1-镜像文件指令"><span>6.2.1.镜像文件指令</span></a></h4><ul><li><code>docker image ls</code> 查看当前本地存储库已有的镜像文件 <ul><li><code>-a</code> 把所有镜像包括中间映像层列出来，中间映像层通常是在某些镜像构建的过程中产生的，此时您可能会看到一些仓库名和版本号均为 <code>&lt;none&gt;</code> 的镜像，这些也叫做悬空镜像</li><li><code>--digests</code> 显示镜像的摘要信息</li><li><code>-q</code> 只显示镜像 <code>ID</code></li></ul></li><li><code>docker image inspect &lt;repository&gt;:&lt;tag&gt;</code> 查看镜像摘要信息，也就是镜像的哈希标识信息，用于标识镜像的唯一性</li><li><code>docker image history</code> 查看镜像的构建历史，提供每一层的详细信息，实际上 <code>pull</code> 指令就是把各个层给拉取下来, 然后在本地不断叠加层，最终形成一个完整的文件系统</li><li><code>docker image rm &lt;repository&gt;:&lt;tag&gt;</code> 删除镜像文件</li><li><code>docker image prune</code> 删除悬空镜像 <ul><li><code>-a</code> 删除所有未被使用的镜像，而不仅仅是悬空镜像</li><li>这个甚至可以设置定时删除，待补充...</li></ul></li><li><code>docker image tag &lt;old-repository&gt;:&lt;old-tag&gt;/&lt;existing-image-id&gt; &lt;new-repository&gt;:&lt;new-tag&gt;</code> 修改镜像文件的名称和标签，类似 <code>git</code> 做一个标记</li><li><code>docker image save &lt;镜像名称:镜像版本&gt; &lt;镜像压缩包名.tar&gt;</code> 将镜像文件保存为归档文件（完整地保存镜像的数据，包括镜像历史）</li><li><code>docker image load -i &lt;tar文件地址&gt;</code> 将归档文件加载为镜像文件（<code>save</code> 和 <code>load</code> 就有点像是压缩包压缩和解压的过程，很简单）</li><li><code>docker image build [--build-arg 构建参数符=构建参数值] -f &lt;dockfile文件目录&gt; [--label version=标签] [--no-cache] [--pull] [--quiet] [--rm] [--tag 镜像名称:镜像版本] [--network 网络模式]</code> 通过 <code>dockerfile</code> 制作镜像文件（这个指令很重要，我们后面进行实践） <ul><li><code>--build-arg 构建参数符=构建参数值</code> 使用构建参数，例如 <code>--build-arg MY_VAR=value</code></li><li><code>-f &lt;dockfile文件目录&gt;</code> 从自定义路径使用 <code>Dockerfile</code></li><li><code>--label version=标签</code> 添加标签</li><li><code>--no-cache</code> 禁用缓存以确保每层都重新构建</li><li><code>--pull</code> 尝试从仓库中更新依赖的基础镜像</li><li><code>--quiet</code> 使用安静模式输出</li><li><code>--rm</code> 删除中间容器</li><li><code>--tag 镜像名称:镜像版本</code> 设置镜像名称和镜像版本</li><li>设置网络模式为，比如 <code>host</code></li></ul></li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：有些指令解释起来比较麻烦，后面有篇幅比较大的实践时再来使用，这里简单试几个。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用镜像文件指令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --digests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       DIGEST</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                                    IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    sha256:f5747a42e3adcb3168049d63278d7251d91185bb5111d2563d58729a5c9179b0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     sha256:a97a153152fcd6410bdf4fb64f5622ecf97a753f07dcc89dab14509d059736cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    sha256:53cc4d415d839c98be39331c948609b659ed725170ad2ca8eb36951288f81b75</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> history</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.4</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 该层已丢失或是中间层, 则会显示 &lt;missing&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                      SIZE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      COMMENT</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 该层的注释</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   /bin/sh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot; daemon…   0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  STOPSIGNAL SIGQUIT           0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  EXPOSE 80                    0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  ENTRYPOINT [&quot;/docker-entr…   0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop) COPY file: e57eef017a414ca7…   4.62kB    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop) COPY file: abbcbf84dc17ee44…   1.27kB    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop) COPY file: 5c18272734349488…   2.12kB    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop) COPY file: 7b307b62e82255f0…   1.62kB    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c set -x     </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> addgroup</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --system</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -…</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   61.6MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  ENV PKG_RELEASE = 1~bullseye   0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  ENV NJS_VERSION = 0.7.11       0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  ENV NGINX_VERSION = 1.23.4     0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  LABEL maintainer = NGINX Do…   0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop)  CMD [&quot;bash&quot;]                 0B        </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">missing</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      15 months ago   /bin/sh -c </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#(nop) ADD file: 88252a7f118b4d6f5…   80.5MB </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试删除镜像失败</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world:latest</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Error</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> response</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> conflict:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> repository</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reference</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello-world:latest</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (must </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">force</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) - container 28bd08f31582 is using its referenced image d2c94e258dcb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查找当前还在用该镜像的容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ancestor=hello-world:latest</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">28bd08f31582</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   hello-world</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/hello</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> days</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 7 days ago             fervent_austin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 停止容器(后面学)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28bd08f31582</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">28bd08f31582</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除容器(后面学)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28bd08f31582</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 再次尝试删除镜像成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world:latest</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Untagged:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world:latest</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Untagged:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello-world@sha256:53cc4d415d839c98be39331c948609b659ed725170ad2ca8eb36951288f81b75</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Deleted:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:d2c94e258dcb3c5ac2798d32e1249e42ef01cba4841c2234249495f87264ac5a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看镜像是否已经被删除</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="_6-2-2-镜像容器指令" tabindex="-1"><a class="header-anchor" href="#_6-2-2-镜像容器指令"><span>6.2.2.镜像容器指令</span></a></h4><ul><li><p><code>docker container ls</code> 列出容器信息列表</p><ul><li><code>-a</code> 显示所有的容器，包括未运行的</li><li><code>-f/--filter</code> 根据条件过滤显示的内容</li><li><code>--format</code> 指定返回值的模板文件，如 <code>json</code> 或者 <code>table</code></li><li><code>-l</code> 显示 <code>latest(最新)</code> 的容器</li><li><code>-n</code> 列出最近创建的 <code>n</code> 个容器</li><li><code>--no-trunc</code> 不截断输出容器详细信息</li><li><code>-q</code> 静默模式，只显示容器编号</li><li><code>-s</code> 显示总的文件大小</li></ul></li><li><p><code>(初建|Created)docker container create</code> 创建容器后，不立即启动运行，容器进入初建状态</p></li><li><p><code>(运行|Running)docker container start</code> 容器转为运行状态</p></li><li><p><code>(初建+运行|Created+Running)docker container run [--oom-kill-disable] --name &lt;容器名&gt; [--rm] [-it] [-d] [-p &lt;本地端口:容器端口&gt;/-P] [-h &lt;主机名&gt;] [-v &lt;本地目录:容器目录&gt;] [-e 环境变量名=&quot;环境变量值&quot;] [--cpuset-cpus=&quot;1,2,...&quot;] [-m &lt;数值k/b/m/g&gt;] [--network &lt;连接类型&gt;] [--restart=...] &lt;镜像名称:镜像版本&gt; [&lt;指令&gt;]</code> 启动容器，注意这个指令是二合一的指令，一个容器不能重复使用 <code>run</code> 指令，因为容器已经被创建了，只能使用 <code>start</code> 使得容器转为运行状态</p><ul><li><p><code>--oom-kill-disable</code> 禁用 <code>OOM</code> 杀手（后面会提到这个事情）</p></li><li><p><code>--name &lt;容器名&gt;</code> 指定容器名称</p></li><li><p><code>--rm</code> 可以在容器退出时自动退出容器（并且容器也被销毁清理），适合做临时测试</p></li><li><p><code>-it</code> 其中 <code>-i</code> 表示保持标准输入并且为容器分配一个类似本地操纵的伪终端，<code>-t</code> 为容器重新分配一个为输入终端</p></li><li><p><code>-d</code> 以后台模式启动容器，因此没有交互终端可以使用</p></li><li><p><code>-p &lt;本地端口:容器端口&gt;/-P</code> 做端口映射，<code>-P</code> 是做随机端口映射</p></li><li><p><code>-h &lt;主机名&gt;</code> 指定容器的 <code>hostname</code></p></li><li><p><code>-v &lt;本地目录:容器目录&gt;</code> 做目录映射, 两端共享目录（必须是绝对路径）下所有数据，挂载末尾还可以加 <code>:ro</code> 成为只读模式挂载（另外这个选项其实有三种模式，后面我会展开细说）</p></li><li><p><code>-e 环境变量名=&quot;环境变量值&quot;</code> 给容器内部设置环境变量</p></li><li><p><code>--cpuset-cpus=&quot;1,2,...&quot;</code> 限制只能使用处理器 <code>1</code> 和 <code>2</code> 等</p></li><li><p><code>-m &lt;数值k/b/m/g&gt;</code> 限制内存大小，可以更换单位</p></li><li><p><code>--memory-swap &lt;数值k/b/m/g&gt;</code> 设置总内存（物理内存 + 交换内存）限制，当物理内存不足时, 操作系统会把不常用的数据暂时存放到磁盘上的交换空间，以腾出 <code>RAM</code> 供其他需要更多内存的进程使用</p></li><li><p><code>--network &lt;连接类型&gt;</code> 指定网络的连接类型</p></li><li><p><code>[--restart=...]</code> 设置是否自动重启容器</p><p><code>--restart=no [容器名]</code> 默认值不自动重启</p><p><code>--restart=on-failure:&lt;最多重启次数&gt; [容器名]</code> 若容器的退出状态非 <code>0</code>，则 <code>docker</code> 自动重启容器，可以指定重启次数，若超过指定次数未能启动容器则放弃重启</p><p><code>--restart=always [容器名] :always</code> 容器退出时总是重启</p><p><code>--restart=unless-stopped [容器名]</code> 容器退出时总是重启，但不考虑 <code>Docker</code> 守护进程启动时就已经停止的容器</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果容器启动时没有设置 <code>--restart</code> 参数，则通过下面命令进行更新 <code>docker update --restart=always &lt;容器名&gt;</code></p></div></li><li><p><code>&lt;镜像名称:镜像版本&gt;</code> 要启动的目标镜像文件</p></li><li><p><code>&lt;指令&gt;</code> 这里会运行一个指令，填入 <code>bash</code> 就表示在容器内部启动一个 <code>bash</code> 程序</p></li></ul></li><li><p><code>(开始暂停|Start Pause)docker container pause</code> 容器进入暂停状态，暂停的实质是剥夺 <code>CPU</code> 资源，因此容器内部的所有进程都会被暂停</p></li><li><p><code>(取消暂停|End Pause)docker container unpause</code> 取消暂停状态，容器进入运行状态</p></li><li><p><code>(退出|Exited)docker container stop &lt;容器id&gt;/&lt;容器名称&gt;[, ...]</code> 停止运行容器并且退出，完全关闭并且进行资源清理（但是容器本身还存在），如果超过过时间就会发送信号终止容器进程</p></li><li><p><code>(退出|Exited)docker container kill</code> 容器在故障（死机）时，执行 <code>kill</code>（断电），容器转入停止状态，这种操作容易丢失数据，除非必要，否则不建议使用</p></li><li><p><code>(删除|Removing)docker container rm</code> 删除容器，容器转入删除状态，不过只能删除处于停止状态的容器</p></li><li><p><code>(删除|Removing)docker container prune</code> 和上面指令类似，但是自动检测已经停止运行的容器</p></li><li><p><code>docker container restart</code> 重启容器，容器转入运行状态</p></li><li><p><code>docker container cp 宿主主机源路径 容器名:容器路径</code> 可以把一些放在宿主主机上的文件或目录拷贝到容器里。另外，这个指令也可以进行反方向的操作，也就是从容器主机拷贝到宿主主机中，有些情况下很方便</p></li><li><p><code>docker container exec -it &lt;容器名&gt; &lt;shell类型&gt;</code> 有时需要启用后台模式中运行容器的 <code>shell</code> 终端，此时就需要启动 <code>shell</code>，这个时候就可以使用 <code>-it</code> 来启动终端</p></li><li><p><code>docker container attach &lt;容器名&gt;</code> 用于连接到一个已经在运行的容器的终端，可以查看容器输出并与容器进行交互。与 <code>docker exec</code> 不同的是，<code>docker attach</code> 是直接连接到容器的主进程（这代表着可以直接看到主进程的标准输出和标准错误，但是一旦使用 <code>[ctrl+c]</code> 就会导致容器也跟着退出...挺危险的），而 <code>docker exec</code> 可以在容器内启动一个新的进程</p></li><li><p><code>docker container logs [-f] [-n 行数] &lt;容器名&gt;</code> 可以查看容器输出的日志消息，尤其是标准输出和标准错误，加个 <code>-f</code> 就可以实时查看日志输出，否则日志输出就是静态的，<code>-n</code> 只会显示出最新的指定行数的日志信息</p></li><li><p><code>docker container port &lt;容器名&gt;</code> 可以查看容器的端口映射</p></li><li><p><code>docker container rename &lt;容器名&gt;</code> 重命名容器的名称</p></li><li><p><code>docker container update [一些新配置] &lt;容器名&gt;</code> 更新容器的资源配置</p><ul><li><code>--cpus</code> 指定容器可以使用的 <code>CPU</code> 核心数。例如 <code>--cpus=&quot;1.5&quot;</code> 允许容器使用 <code>1.5</code> 个 <code>CPU</code> 核心</li><li><code>--memory</code> 设置容器的最大内存限制。例如，<code>--memory=&quot;500m&quot;</code> 限制容器使用的内存不超过 <code>500MB</code></li><li><code>--memory-swap</code> 设置容器的交换空间限制。例如，<code>--memory-swap=&quot;1g&quot;</code> 允许容器使用最多 <code>1GB</code> 的交换空间</li><li><code>--cpu-shares</code> 调整容器的 <code>CPU</code> 共享权重，相对值用于 <code>CPU</code> 调度</li><li><code>--oom-kill-disable</code> 禁用内存不足（<code>OOM</code>）杀死功能</li><li><code>[--restart=...]</code> 前面有介绍过</li></ul></li><li><p><code>docker container top &lt;容器名&gt; [ps参数]</code> 可以从宿主机器上查看容器内部的进程消息，并且支持 <code>ps</code> 命令参数</p></li><li><p><code>docker container stats &lt;容器名&gt;</code> 显示容器资源的使用情况，包括 <code>CPU, 内存, 网络 I/O...</code> 但是时动态的，非常好用</p></li><li><p><code>docker container inspect &lt;容器名&gt;</code> 查看容器详细信息，这个更加有用，可以看到一些 <code>Json</code> 信息，包含了非常详细的容器配置信息</p><ul><li><code>-f</code> 指定返回值的模板文件，如 <code>table, json</code></li><li><code>-s</code> 显示总的文件大小</li></ul></li><li><p><code>docker container diff &lt;容器名&gt;</code> 可以查看容器内部文件系统的变化（比如删除或新增了某些文件，通常 <code>A</code> 表示新增的文件或目录，<code>D</code> 表示删除的文件或目录，<code>C</code> 表示修改过的文件或目录</p></li><li><p><code>docker container commit [-a &lt;作者信息&gt;] [-m &lt;说明信息&gt;] [-p] [-c &lt;描述信息&gt;] &lt;容器名&gt; 新镜像名称:新镜像版本</code> 命令将基于某个已存在的容器的当前状态创建一个新的镜像，可以把容器的当前文件系统和配置保存为一个新的 <code>Docker</code> 镜像。这个新镜像可以用来创建新的容器，继承了原容器的所有更改</p><ul><li><code>-a &lt;作者信息&gt;</code> 提交的镜像作者</li><li><code>-m &lt;说明信息&gt;</code> 提交时的说明文字</li><li><code>-p</code> 在 <code>commit</code> 时，将当前容器暂停</li><li><code>-c &lt;描述信息&gt;</code> 使用 <code>Dockerfile</code> 指令来创建镜像，可以用来修改启动指令</li></ul></li><li><p><code>docker container export &lt;容器名&gt; -o &lt;容器快照名.tar&gt;</code> 将容器导出为容器快照（只保留容器当前的状态，丢失所有元数据和历史记录）</p></li><li><p><code>docker container import &lt;容器快照地址&gt; &lt;镜像名称:镜像版本&gt;</code> 将容器快照导入创建出新镜像文件（其实容器快照也可以使用 <code>docker load</code> 来导入...）</p></li><li><p><code>docker container wait &lt;容器名&gt;</code> 适用于需要等待容器完成任务并获取其退出状态的场景，常用于脚本化流程中的同步操作</p></li><li><p><code>docker container logs &lt;容器名&gt;</code> 可以查看容器日志，如果需要动态查看日志可以加上 <code>-f</code></p></li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：有些指令解释起来比较麻烦，后面有篇幅比较大的实践时再来使用，这里简单试几个。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 run 启动容器后再 exit 就会使容器处于退出状态, 如果退出后手动使用 start 再退出就不会有这种行为</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动容器后直接退出</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@abb0cb095eaf:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">abb0cb095eaf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 3 seconds ago             my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新使容器运行起来</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查容器状态是否为运行状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">abb0cb095eaf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   46</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重写打开容器内部的模拟终端并且也直接退出</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@abb0cb095eaf:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新查看容器状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">abb0cb095eaf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 attach 后再使用 [ctrl+c] 退出后容器也会一起退出, 除非使用 -d 启动容器</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash1 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 只有这个第一次启动的进程才会显示日志</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 13#13: using the </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">epoll</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> event method</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 13#13: nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 13#13: built by gcc 10.2.1 20210110 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.2.1-6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 13#13: OS: Linux 5.15.0-113-generic</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 13#13: getrlimit(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">RLIMIT_NOFILE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): 1048576:1048576</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 14#14: start worker processes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 14#14: start worker process 15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:08:37</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 14#14: start worker process 16</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 210.21.79.236</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [12/Sep/2024:16:08:50 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+0000]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; bash2 begin &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 这个终端是在没有浏览器访问前启动的, 无论前端浏览器怎么访问都无法在这里获取日志</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">824adac62bde</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   50</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 哪怕是退出了</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到容器也不会被退出</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sudo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> password </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ljp: </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">824adac62bde</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 但是使用 attach 情况就不一样了</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash1 &gt;&gt;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ... 忽略了之前的输出 ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这个 ls 不是 bash1 执行的, 而是 bash2 执行的时候同步过来的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-entrypoint.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  tmp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  var</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker-entrypoint.d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  usr</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 210.21.79.236</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [12/Sep/2024:16:38:00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+0000]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 304</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash2 &gt;&gt;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attach</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这个 ls 是 bash2 自己执行的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-entrypoint.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  tmp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  var</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker-entrypoint.d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  usr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以看到上下两个 bash 在浏览器访问时, 就会两同步出现日志输出</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@824adac62bde:/#</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 210.21.79.236</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [12/Sep/2024:16:38:00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+0000]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 304</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到这个 bash2 执行了 exit, 导致 bash1 也会退出, 并且容器也退出了</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">824adac62bde</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   37</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 7 seconds ago             my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_7-docker-的错误" tabindex="-1"><a class="header-anchor" href="#_7-docker-的错误"><span>7.Docker 的错误</span></a></h2><p><code>Docker</code> 有两种比较常见的错误 <code>killed by out-of-memory(内存溢出)</code> 和 <code>container process exitde(异常终止)</code>，出现后者这种状况则会进入 <code>Should restart?</code> 选择是否重启。</p><h3 id="_7-1-内存溢出" tabindex="-1"><a class="header-anchor" href="#_7-1-内存溢出"><span>7.1.内存溢出</span></a></h3><p><code>Docker</code> 在处理 <code>OOM</code> 事件时分为三种情况。</p><h4 id="_7-1-1-超过内存限制" tabindex="-1"><a class="header-anchor" href="#_7-1-1-超过内存限制"><span>7.1.1.超过内存限制</span></a></h4><p>当容器中的应用程序使用的内存超过了主机系统分配给该容器的内存限制时，会触发 <code>OOM</code> 事件。此时容器会被强制关闭，但是关闭容器的不是 <code>Docker Daemon(Docker守护进程)</code>，而是宿主机的操作系统。因为容器实际上是运行在宿主机操作系统上的一组进程。宿主机通过 <code>cgroups(控制组)</code> 对这些进程设定资源上限，当进程申请的资源达到上限时，宿主机内核会触发 <code>OOM</code> 事件并关闭相关进程。</p><h4 id="_7-1-2-禁用内存限制" tabindex="-1"><a class="header-anchor" href="#_7-1-2-禁用内存限制"><span>7.1.2.禁用内存限制</span></a></h4><p>如果用户不希望容器在内存耗尽时被关闭，可以使用 <code>--oom-kill-disable</code> 参数来禁用 <code>OOM-Killer</code>。此时如果使用 <code>-m</code> 参数设置了容器的内存上限，即便是容器达到内存资源上限，主机也不会立刻关闭容器，但也不会继续分配资源。此时容器将处于 <code>hung(卡住)</code> 状态，无法继续执行，陷入一种类似停滞的状态。</p><h4 id="_7-1-3-没有内存限制" tabindex="-1"><a class="header-anchor" href="#_7-1-3-没有内存限制"><span>7.1.3.没有内存限制</span></a></h4><p>如果用户使用了 <code>--oom-kill-disable</code>，但没有使用 <code>-m</code> 设置内存上限，容器将尽可能多地使用主机的内存资源。容器可以使用主机的所有可用内存，直到主机内存耗尽（这有可能会影响宿主主机的健康运行）。</p><h3 id="_7-2-异常终止" tabindex="-1"><a class="header-anchor" href="#_7-2-异常终止"><span>7.2.异常终止</span></a></h3><p>每个容器内部都有一个 <code>Init</code> 进程，其他所有进程都是其子进程。容器的运行依赖于 <code>Init</code> 进程。如果一个子进程因某种原因退出，<code>Init</code> 进程也会同步退出，最终导致整个容器关闭，因此 <code>Docker</code> 无法区分进程的退出是正常还是异常。</p><h2 id="_8-docker-的拓展" tabindex="-1"><a class="header-anchor" href="#_8-docker-的拓展"><span>8.Docker 的拓展</span></a></h2><p>在基于上述的学习中，您对 <code>Docker</code> 的使用和了解应该已经足够清晰了，但是还有一些值得补充的东西值得您学习...</p><h3 id="_8-1-docker-的存储" tabindex="-1"><a class="header-anchor" href="#_8-1-docker-的存储"><span>8.1.Docker 的存储</span></a></h3><p><strong>存储卷</strong> 是一种在 <code>Docker</code> 容器和宿主机之间共享文件或目录的机制。它通过将宿主机上的一个目录与容器内的一个目录绑定起来实现。这样容器对这个目录的读写操作都会直接影响宿主机上的相应目录。这使得容器和宿主机可以共享数据（容器中的进程向这个目录写入数据时是直接写在宿主机的目录上的，这绕过了容器的文件系统，直接与宿主机的文件系统建立关联关系），数据在两者之间是同步的。</p><p>在有些时候，这种机制也可以达到保护数据的目的，例如容器虽然被销毁了，但是只要宿主机还在就不会出现数据丢失的问题。</p><p>而且不仅仅是容器主机和宿主主机进行共享，可以设置多个容器共享一个存储卷目录。</p><p>并且也有助于维护容器，数据的可持久化，保持容器的无状态属性（其实就是看有没有数据需要被持久化，没有就是无状态的），这使得容器是开箱即用而无需深度配置的装置。</p><p>而 <code>Docker</code> 镜像技术的基础是联合文件系统 <code>UnionFS</code>，这种文件系统的特点是允许将多个文件系统合并为一个虚拟的文件系统。这些文件系统可以在同一层次或不同层次，通过一个统一的视图提供给用户或程序。</p><p>但是问题是，这种文件系统的缺点也非常明显，删除和修改的效率比较低下，对于某些特殊应用来说（例如 <code>Redis</code>）就会显得不够使用。</p><p>因此 <code>Docker</code> 提供了三种方式来将数据从宿主机挂载到容器主机中。</p><h4 id="_8-1-1-默认挂载存储卷" tabindex="-1"><a class="header-anchor" href="#_8-1-1-默认挂载存储卷"><span>8.1.1.默认挂载存储卷</span></a></h4><p><code>Volume(默认存储卷)</code> 是 <code>Docker</code> 管理的存储卷，默认存储在宿主机的 <code>/var/lib/docker/volumes</code> 目录下。创建存储卷后，用户使用 <code>Volume</code> 时，只需要在容器内指定挂载点（其实就是 <code>run</code> 的时候提供了 <code>-v</code> 选项，并且写成 <code>-v 存储卷名:容器内部文件路径</code>），<code>Docker Daemon(Docker引擎)</code> 会自动创建或使用一个已有的目录来建立卷与宿主机的关系。而有关存储卷的相关指令如下：</p><ul><li><code>docker volume create [--driver/-d ...] [--label ...] &lt;存储卷名&gt;</code> 创建存储卷 <ul><li><code>--driver/-d</code> 指定驱动，默认是 <code>local</code></li><li><code>--label</code> 指定元数据</li></ul></li><li><code>docker volume inspect [--format=&lt;格式&gt;]</code> 显示存储卷详细信息 <ul><li><code>--format/-f</code> 可以指定相应的格式进行输出</li></ul></li><li><code>docker volume ls [--format=&lt;格式&gt;] [--filter/-f 过滤条件]</code> 列出存储卷</li><li><code>docker volume prune [--filter &lt;过滤条件&gt;] [--force/-f]</code> 清理所有无用数据卷 <ul><li><code>--force/-f</code> 不提示是否删除</li></ul></li><li><code>docker volume rm [--force/-f] &lt;存储卷名&gt; [, &lt;存储卷名&gt;, ...]</code> 删除卷，正在使用中存储卷无法直接删除 <ul><li><code>--force/-f</code> 强制删除</li></ul></li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用默认存储卷 Volume</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建一个存储卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> create</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_volume</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看存储卷是否创建成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    VOLUME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NAME</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">local</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">     my_volume</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看存储卷的位置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">backingFsBlockDev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  metadata.db</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  my_volume</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 实际这个存储卷就是一个目录</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看存储器此时的内容</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CreatedAt</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2024-09-16T12:19:03+08:00</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Labels</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: null,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mountpoint</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/docker/volumes/my_volume/_data</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">my_volume</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: null,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Scope</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> volume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --format=json</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">{</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CreatedAt</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2024-09-16T12:19:03+08:00</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Labels</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:null,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mountpoint</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/docker/volumes/my_volume/_data</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">my_volume</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:null,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Scope</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新运行一个容器, 同时挂载一个存储卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume:/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在容器内部打开和宿主机挂载的文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> InRelease</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [116 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian-security</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye-security</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> InRelease</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [27.2 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye-updates</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> InRelease</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [44.1 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye/main</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> amd64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Packages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [8066 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian-security</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye-security/main</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> amd64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Packages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [294 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                                       </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Get:6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://deb.debian.org/debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bullseye-updates/main</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> amd64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Packages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [18.8 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                                                </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fetched</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8566</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 51s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (16.1 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB/s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)                                                                                          </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Reading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lists...</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Done</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在容器内部安装 vim 编辑器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 一大堆输出信息...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编辑并且查看文件是否已经保存完毕</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/test.cpp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/test.cpp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">int</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 退出容器查看宿主主机是否存在共享的文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@f67abaa2707e:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sudo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> password </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ljp: </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f67abaa2707e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 12 seconds ago             my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tree</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes/my_volume</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/var/lib/docker/volumes/my_volume</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> _data</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes/my_volume/_data/test.cpp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">int</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过，如果存在多个容器挂载同一个存储卷会怎么样呢？从下面现象可以看到这是完全可以的。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 多个容器共享一个存储卷</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 观察此时的容器数量</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f67abaa2707e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 6 minutes ago             my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 多运行一个容器, 并且挂载的存储卷和之前的容器是同一个</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_another_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8087:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume:/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看是否存在上一个容器中写入的文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   docker-entrypoint.d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  var</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker-entrypoint.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   tmp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   usr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">test</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.cpp</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">int</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写新的文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">another_test.cpp</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> another_test.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">another_test.cpp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  test.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7237fb621034:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看是否成功写入到宿主主机中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tree</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes/my_volume</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/var/lib/docker/volumes/my_volume</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> _data</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> another_test.cpp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> files</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看此时两个容器的状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">7237fb621034</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 2 seconds ago             my_another_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f67abaa2707e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   27</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 9 minutes ago             my_nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过，既然存在共享，有一个令人担忧的问题，这个存储卷是否有数据一致性的保护？我们来检查一下。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查是否有数据保护</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash1 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看已有容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">7237fb621034</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   38</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 36 minutes ago             my_another_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f67abaa2707e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hour</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Exited</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0) 45 minutes ago             my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写一个循环脚本, 实时检查文件的内容</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> while</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> do</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes/my_volume/_data/test.cpp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sleep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> done</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash1 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume:/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/test.cpp</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 尝试同时进行编辑和保存</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: bash2 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_another_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8087:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume:/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/test.cpp</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 尝试同时进行编辑和保存</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+B+`" alt="image-20240917234451874" tabindex="0" loading="lazy"><figcaption>image-20240917234451874</figcaption></figure><p>可以看到这个提示是 <code>Vim</code> 的一个警告信息，表示文件 <code>test.cpp</code> 在您开始编辑后发生了变化，这是由于另一个程序对该文件进行了修改。您此时有两个选择：</p><ul><li><code>(O)</code> 继续当前编辑状态，不加载最新版本的文件</li><li><code>(L)</code> 重新加载文件，将外部更改的内容应用到你的编辑窗口中</li></ul><p>很遗憾 <code>Docker</code> 貌似无法保证存储卷的写入过程不是完全安全的（因为用户可以同时编辑一个文件，但是这种责任其实也不该交给 <code>Docker</code>），不过至少默认的数据同步还是有的，这部分我们后面会提到一些解决方案。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果 <code>-v</code> 的选项中 <code>:</code> 的前面没有指定存储卷的名字，<code>Docker</code> 会使用默认的一串随机数字作为存储卷的名字。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：这种默认存储卷挂载不会导致容器挂载点内的现有文件被覆盖。</p></div><h4 id="_8-1-2-绑定挂载存储卷" tabindex="-1"><a class="header-anchor" href="#_8-1-2-绑定挂载存储卷"><span>8.1.2.绑定挂载存储卷</span></a></h4><p><code>Bind Mount(绑定挂载存储卷)</code> 允许用户将宿主机上的特定路径挂载到容器内。用户需要明确指定宿主机上的路径和容器内的路径（其实就是 <code>-v 宿主主机路径:容器主机路径</code>）。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 绑定挂载存储卷</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动容器的同时绑定挂载存储卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bind_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8088:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp:/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在容器内部保存文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@81c081ab4cc5:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/t.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@81c081ab4cc5:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/t.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@81c081ab4cc5:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看是否共享了文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/t.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：这种绑定存储卷挂载会导致容器挂载点内的现有文件被覆盖。</p></div><h4 id="_8-1-3-临时挂载存储卷" tabindex="-1"><a class="header-anchor" href="#_8-1-3-临时挂载存储卷"><span>8.1.3.临时挂载存储卷</span></a></h4><p><code>Tmpfs Mount(临时挂载存储卷)</code> 还有一个之前没有提到过的选项，就是在 <code>run</code> 的时候加上选项 <code>--mount type=挂载类型,target=容器主机内部挂载点</code>，挂载类型指定了如何将宿主机的文件系统与容器的文件系统进行连接有一个最经典的挂载类型就是 <code>tmpfs</code>，这种类型将文件存储在内存中，通常会比较快，但数据也会在容器重启或停止时消散。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 运行容器的同时使用临时挂载存储卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8088:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> type=tmpfs,target=/temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试存储文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">temp</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/temp.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/temp.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">temp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以发现没有任何明显的存储卷出现在默认的路径上</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -al</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/lib/docker/volumes/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 36</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">drwx-----x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4096</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 23:55</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">drwx--x---</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4096</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10:27</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ..</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">brw-------</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 252,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10:27</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> backingFsBlockDev</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rw-------</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  32768</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 23:42</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> metadata.db</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">drwx-----x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4096</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 12:19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_volume</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新启动容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">temp_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新进入容器的内部查看文件是否存在</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/temp.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /temp/temp.txt:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> such</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 果然找不到这个文件了, 这个文件是内存级别的文件, 现在已经被销毁了</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@08cf5f2e75a7:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 没有任何输出</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：这种临时存储卷挂载会导致容器挂载点内的现有文件被覆盖。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：除了使用 <code>-v</code> 其实还可以使用 <code>--mount &lt;key=value&gt; [, &lt;key=value&gt;, ...]</code>，这个参数语义会更加明确一些，常见的 <code>key</code> 有下面的几个</p><ul><li><p><code>type</code> 指定挂载的类型，可以是 <code>volume | bind | tmpfs</code> 也就是对应我们上面提到的三种</p></li><li><p><code>source</code> 指定挂载源的位置</p><ul><li>对于 <code>volume</code> 类型，源是存储卷的名称</li><li>对于 <code>bind</code> 类型，源路径是宿主主机上的目录或文件</li></ul></li><li><p><code>target</code> 目标路径，也就是容器内对应的挂载点</p></li><li><p><code>readonly | ro</code> 指定挂载为只读模式，容器内无法修改这个挂载点的数据（这种可以作为解决 <code>Docker</code> 无法保证数据安全的方案，即只使用一个容器进行修改，其他容器进行读取），并且只需要设置这个 <code>kye</code> 值即可，<code>value</code> 是不需要设置的</p></li><li><p><code>consistency</code> 关键字允许指定挂载的数据一致性级别，有助于优化不同挂载类型的数据读写行为，它通常有以下几种 <code>value</code> 值可以指定</p><ul><li><p><code>consistent(默认)</code> 可以确保读写操作的一致性。所有文件读写操作都经过同步，保证读到的是最新的数据</p><p>适合需要确保数据一致性和同步的应用，比如数据库系统或需要高一致性的应用</p></li><li><p><code>cached</code> 优化文件访问性能，减少延迟。数据可能会被缓存，因此读操作可能会读到旧的数据，直到缓存更新</p><p>适合读多写少的场景，比如静态文件服务，能够容忍短时间内的数据不一致</p></li><li><p><code>delegated</code> 优化写操作性能，写入操作可能会延迟到背景（其实就是后台的一种说法）中进行，不一定会立刻同步到宿主机上的最新数据，而是先把写入的数据缓存起来。这样读取操作可能读取到旧的未修改数据</p><p>适合写操作频繁但读操作较少的场景，例如日志文件或临时数据</p></li></ul></li><li><p><code>tmpfs-size</code> 选项用于指定内存文件系统的最大容量，只对 <code>tmpfs</code> 类型的存储卷有效</p></li><li><p><code>tmpfs-mode</code> 使用与 <code>Unix/Linux</code> 文件权限相同的模式表示法来设置文件权限，只对 <code>tmpfs</code> 类型的存储卷有效</p></li></ul><p>您可以自己尝试一下，和我们前面的结果大差不差...</p></div><h3 id="_8-2-docker-的网络" tabindex="-1"><a class="header-anchor" href="#_8-2-docker-的网络"><span>8.2.Docker 的网络</span></a></h3><p>这个也是非常重要的拓展之一，我们需要考虑的问题很多：</p><ul><li>多个容器之间是如何通信的？</li><li>容器和宿主机是如何通信的？</li><li>容器和外界主机是如何通信的？</li><li>容器内的网络怎么样才能和其他容器进行隔离？</li><li>容器根本不需要网络的时候应该如何做？</li><li>容器需要更高的定制化网络该怎么办？</li></ul><div class="hint-container caution"><p class="hint-container-title">警告</p><p>警告：下文提到的网桥、网卡是同一个东西。</p></div><h4 id="_8-2-1-容器网络模型" tabindex="-1"><a class="header-anchor" href="#_8-2-1-容器网络模型"><span>8.2.1.容器网络模型</span></a></h4><p>因此这方面 <code>Docker</code> 做足了功夫，<code>CNM(Container Network Model, 容器网络模型)</code> 规定对应的解决方案及架构需要依赖三个部分：</p><ul><li><strong>Sandbox</strong> 提供了容器的虚拟网络栈，即端口、套接字、<code>IP</code> 路由表、防火墙、 <code>DNS</code> 配置等内容。用于隔离容器网络与宿主机网络，形成了完全独立的容器网络环境。</li><li><strong>Network</strong> <code>Docker</code> 内部的虚拟子网，使得网络内的参与者能够进行通讯。</li><li><strong>Endpoint</strong> 就是虚拟网络的接口，就像普通网络接口一样，<code>Endpoint</code> 的主要职责 是负责创建连接。<code>Endpoint</code> 类似于常见的网络适配器，那也就意味着一个 <code>Endpoint</code> 只能接入某一个网络， 当容器需要接入到多个网络，就需要多个 <code>Endpoint</code>。</li></ul><p>而开源库 <code>Libnetwork</code> 是 <code>CNM</code> 的一个标准实现，该库本身采用 <code>Go</code> 语言编写，并且是跨平台的，也是 <code>Docker</code> 所使用的库，<code>Docker</code> 网络架构的核心代码都在这个库中。 <code>Libnetwork</code> 除了实现了 <code>CNM</code> 中定义的全部三个核心组件，还实现了本地服务发现、基于 <code>Ingress</code> 的容器负载均衡，以及网络控制层和管理层...功能。</p><h4 id="_8-2-2-容器网络驱动" tabindex="-1"><a class="header-anchor" href="#_8-2-2-容器网络驱动"><span>8.2.2.容器网络驱动</span></a></h4><p><code>Docker</code> 内置了若干驱动，通常被称作原生驱动或者本地驱动。例如 <code>Bridge Driver, Host Driver, Overlay Driver, MacVLan Driver, IPVLan Driver, None Driver...</code>。每个驱动负责创建其上所有网络资源的创建和管理，详细信息可以 <a href="https://docs.docker.com/engine/network/drivers/" target="_blank" rel="noopener noreferrer">查看官方文档对网络驱动的解释</a>。</p><p>驱动主要负责实现数据层相关内容，网络的连通性和隔离性等都是由驱动来处理的。驱动通过实现特定网络类型的方式扩展了 <code>Docker</code> 网络栈，例如桥接网络和覆盖网络。</p><figure><img src="`+C+'" alt="image-20240919090530115" tabindex="0" loading="lazy"><figcaption>image-20240919090530115</figcaption></figure><p>而这些驱动通过可插拔的接口来支持不同的容器网络模型。</p><h4 id="_8-2-3-容器网络类型" tabindex="-1"><a class="header-anchor" href="#_8-2-3-容器网络类型"><span>8.2.3.容器网络类型</span></a></h4><ol><li><p><strong>Bridge 网络</strong></p><ul><li><strong>描述</strong>：<code>bridge</code> 驱动会在 <code>Docker</code> 主机上创建一个 <code>Linux</code> 网桥。默认情况下，连接到同一网桥的容器可以相互通信</li><li><strong>应用场景</strong>：当多个容器需要在同一台 <code>Docker</code> 主机上通信时使用。是 <code>Docker</code> 容器的默认网络模式。</li><li><strong>特点</strong>：容器与宿主机隔离，容器间可以使用同一个虚拟网桥进行通信</li></ul><figure><img src="'+v+'" alt="image-20240920190050185" tabindex="0" loading="lazy"><figcaption>image-20240920190050185</figcaption></figure></li><li><p><strong>Host 网络</strong></p><ul><li><strong>描述</strong>：容器与 <code>Docker</code> 主机之间没有网络隔离，容器直接使用主机的网络栈（原理其实就是和宿主主机使用同一个网络命名空间）</li><li><strong>应用场景</strong>：当容器需要直接使用主机网络，避免 <code>NAT</code> 和额外的网络层时使用，通常用于高性能需求场景，但是有可能导致宿主主机网络资源耗尽</li><li><strong>特点</strong>：网络与宿主机共享，但其他资源如文件系统、进程等仍被隔离</li></ul><figure><img src="'+u+'" alt="image-20240920190141005" tabindex="0" loading="lazy"><figcaption>image-20240920190141005</figcaption></figure></li><li><p><strong>Container 网络</strong></p><ul><li><strong>描述</strong>：新创建的容器与指定的现有容器共享同一个网络。它们共享 <code>IP</code> 地址和端口等网络资源</li><li><strong>应用场景</strong>：当两个容器需要共享相同的网络环境时使用，但文件系统和进程仍然独立</li><li><strong>特点</strong>：两个容器通过 <code>lo</code> 回环设备通信，共享网络资源但其他资源隔离，但是会导致容器之间产生依赖性，如果启动顺序不正确就会导致部分涉及到网络的容器无法启动</li></ul><figure><img src="'+m+`" alt="image-20240920190211931" tabindex="0" loading="lazy"><figcaption>image-20240920190211931</figcaption></figure></li><li><p><strong>None 网络（真空网络环境）</strong></p><ul><li><strong>描述</strong>：<code>Docker</code> 容器拥有自己的网络命名空间，但不进行任何网络配置，容器没有网络功能（除了本地环回）。</li><li><strong>应用场景</strong>：需要完全隔离的容器时使用，尤其是对网络安全有严格要求的场景</li><li><strong>特点</strong>：容器无网卡、无 <code>IP</code>、无路由，完全网络隔离</li></ul></li><li><p><strong>Overlay 网络（远程宿主主机通信）</strong></p><ul><li><strong>描述</strong>：用于跨多台 <code>Docker</code> 主机的容器通信，适用于 <code>Docker Swarm</code> 集群中，将多个 <code>Docker</code> 守护进程连接在一起</li><li><strong>应用场景</strong>：当需要多个 <code>Docker</code> 主机上的容器协同工作时使用，如分布式集群服务</li><li><strong>特点</strong>：跨主机的容器通信，集群内的服务可以相互通信</li></ul></li></ol><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外 <code>Docker</code> 安装后会默认创建一个网络接口 <code>docker0</code>（可以使用 <code>ifconfig</code> 查看网卡），它是一个网桥设备，允许 <code>Docker</code> 容器和宿主机之间进行通信，默认用于桥接网络中的容器。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看默认网络接口 docker0, 查询结果为 172.17.0.1, 可看作 Docker 默认网络模式中的路由器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flags=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4163</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UP,BROADCAST,RUNNING,MULTICAS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      inet</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.17.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  netmask</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 255.255.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  broadcast</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.17.255.255</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 上面这一行就是本网卡携带的网络 IP 地址, 后面是掩码和广播地址	</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fe80::42:a4ff:fed5:52f7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  prefixlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  scopeid</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x20</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">lin</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">k</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:42:a4:d5:52:f7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  txqueuelen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  (Ethernet)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 62648</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3674514</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (3.6 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  frame</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 92966</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 114284565</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (114.2 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  carrier</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  collisions</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="_8-2-4-容器网络指令" tabindex="-1"><a class="header-anchor" href="#_8-2-4-容器网络指令"><span>8.2.4.容器网络指令</span></a></h4><ul><li><code>docker network create [--driver/-d &lt;网络驱动类型&gt;] [--gateway=&lt;网关地址Gateway&gt;] [--subnet=&lt;网络子网IPAddress(携带子网掩码IPPrefixLen)&gt;] [--ipv6] &lt;网络名称&gt;</code> 创建自定义 <code>Docker</code> 网络（可以理解为创建了一张虚拟网卡）</li><li><code>docker network rm [-f]</code> 删除一个或多个 <code>Docker</code> 网络，<code>-f</code> 是指强制删除</li><li><code>docker network ls [--filter &lt;过滤条件&gt;] [--format &lt;指定输出格式&gt;] [--no-trunc] [--quiet/-q]</code> 列出所有的网络，这里的 <code>-q</code> 表示仅显示网络的 <code>ID</code> 即可（容器网络除了有自己的网络名字还有网络 <code>ID</code>）</li><li><code>docker network inspect &lt;网络名称&gt; [--format/-f &lt;输出格式&gt;]</code> 查看指定网络的详细信息</li><li><code>docker network connect &lt;网络名称&gt; &lt;容器名称&gt; [--ip &lt;指定容器的IPv4地址&gt;] [--ip6 指定容器IPv6地址]</code> 将容器连接到网络</li><li><code>docker network disconnect &lt;网络名称&gt; &lt;容器名称&gt; [-f]</code> 断开容器与网络的连接，<code>-f</code> 就是强制断开的意思</li><li><code>docker network prune [--force/-f]</code> 删除未使用的 <code>Docker</code> 网络，这里的 <code>-f</code> 是去除删除提示直接删除</li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：启动时将容器连接到网络也是可以做到的。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -itd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network=multi-host-network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox-container</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><p>稍微使用一下指令，并且验证一些事情就行，关于五种网络模式的实践，我们后面进行实操。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">初步使用指令,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 并且验证一些现象</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查询默认网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flags=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4163</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UP,BROADCAST,RUNNING,MULTICAS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        inet</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.17.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  netmask</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 255.255.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  broadcast</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.17.255.255</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fe80::42:a4ff:fed5:52f7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  prefixlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  scopeid</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0x20</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">lin</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">k</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:42:a4:d5:52:f7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  txqueuelen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  (Ethernet)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 62648</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3674514</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (3.6 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  frame</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 92966</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 114284565</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (114.2 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  carrier</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  collisions</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 请记下 172.17.0.1 这个网关地址, 后面有用</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查询 docker 创建的网络(都可以理解为虚拟网卡)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NETWORK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d76247a506b9</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">641718df1c49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a65bf697fc48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      null</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查询 bridge 这张网卡的详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bridge</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bridge</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">d76247a506b9ed3e0b4f2865b438744436172e06e94f249804d26da2b7cdf273</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Created</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2024-09-05T10:27:51.728180128+08:00</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Scope</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bridge</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 默认指定的 Docker 容器网络类型就是 bridge</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EnableIPv6</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPAM</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: null,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Config</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Subnet</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.0/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 虚拟网卡(虚拟路由器)可以利用这个掩码规则组件属于自己的局域网络</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Gateway</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到这里和上面使用 Linux 命令行查询的地址是一样的, 这里其实配置的就是这个虚拟网卡所携带的地址, 也就是一个虚拟路由器所携带的地址, 因此和命令行在这里是同步的</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Internal</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Attachable</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Ingress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigFrom</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Network</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigOnly</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Containers</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">a1e9275aac164a249f62e90fa2a82fe54a9d33d1762574d2866f350d0f665ce1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test_nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EndpointID</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8e1665f75ab26ad4e37789e8f848dcd0b3a3aa13972655400ad146326a152ae1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MacAddress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:11:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv4Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.2/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv6Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.bridge.default_bridge</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.bridge.enable_icc</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.bridge.enable_ip_masquerade</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.bridge.host_binding_ipv4</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.bridge.name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.docker.network.driver.mtu</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1500</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Labels</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拉取镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1.23.3:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f1f26f570256:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">84181e80d10e:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1ff0f94a8007:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d776269cad10:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e9427fcfa864:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d4ceccbfc269:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看镜像是否被成功拉取</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 后台启动容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8088:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a1e9275aac164a249f62e90fa2a82fe54a9d33d1762574d2866f350d0f665ce1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器的详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ... 我们这里只看网络设置 ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3f5ec294b0995857c1e5fec1e3b2dc37a1e52fc10bbd566c7d211468a50dc76c</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/3f5ec294b099</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这里规定了宿主主机到容器主机的端口映射</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;80/tcp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8088</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">::</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8088</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            },</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8e1665f75ab26ad4e37789e8f848dcd0b3a3aa13972655400ad146326a152ae1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 容器网络的网关地址, 可以看到就是 Docker 为我们创建的虚拟网卡所携带的 ip 地址, 因此我们成功验证容器的默认网路是</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:11:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:11:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">d76247a506b9ed3e0b4f2865b438744436172e06e94f249804d26da2b7cdf273</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8e1665f75ab26ad4e37789e8f848dcd0b3a3aa13972655400ad146326a152ae1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.17.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试使用 Docker 自己创建一个虚拟网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> create</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --driver</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bridge</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --gateway=172.18.0.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --subnet=172.18.0.0/16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_network</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">b94066dba3c89ed9393042c13baa698a4a03cd063f3e5a3975288411b4f3a1cc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证是否创建成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NETWORK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d76247a506b9</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">641718df1c49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a65bf697fc48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           null</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">b94066dba3c8</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   test_network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动容器的同时接入网络</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> another_test_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_network</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8087:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fd4636b2864b3d1a90ab57cff60dd89b383f6edd84f445019f77a7baf0e9df2d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器的详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> another_test_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">aabeb6d278b501eb3158394a1ab57fa6998c51cff008331853bfbeb1f0107353</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/aabeb6d278b5</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;80/tcp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8087</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">::</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8087</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    },</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;test_network&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:12:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">b94066dba3c89ed9393042c13baa698a4a03cd063f3e5a3975288411b4f3a1cc</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">14335f8c2be3b9f8f594712b77ecfa342c52f205c2ad84c2e2adec91ef32cc16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.18.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 172.18.0.1 是网关地址, 被路由器所占用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.18.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 因此根据子网掩码, 自动分配一个子网地址给本容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;another_test_nginx&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;fd4636b2864b&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-docker-的编写" tabindex="-1"><a class="header-anchor" href="#_8-3-docker-的编写"><span>8.3.Docker 的编写</span></a></h3><p>这里的编写是指元素编写一个独属于自己的镜像文件，其实这个过程就是编写 <code>Dockerfile</code> 配置文件，编写好后就可以交给 <code>docker</code> 工具进行镜像构建，这个其实只需要 <a href="https://docs.docker.com/reference/dockerfile/" target="_blank" rel="noopener noreferrer">查看官方文档学习</a> 就可以了，我会在后面需要的地方进行实践。后续如果要系统整理的话再来，待补充...</p><h3 id="_8-4-docker-的编排" tabindex="-1"><a class="header-anchor" href="#_8-4-docker-的编排"><span>8.4.Docker 的编排</span></a></h3><p>为什么需要学习编排技术？因为我们之前学习的有关容器的内容，基本都是单单对一个具体容器的操作，我们未来会接触到更多的容器，一个一个管理未免也太繁琐了，这个时候就需要一个对容器们进行一个管理，也就是所谓的容器编排工具。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：例如我们前面提到关于存储卷的问题，一旦存储卷和容器多了起来就不好管理了（例如启动参数未知、无法简单进行跨主机使用、运维场景复杂多变等）...</p></div><p>这里我只介绍单机容器管理工具 <code>Docker Compose</code> 这是官方的编排工具，可以查看 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose 官方文档</a> 进行学习。</p><p>官方文档也有提及，<code>Docker Compose</code> 在传统上是面向开发环境和测试环境的，它并不适合作为生产环境使用（这方面 <code>k8s</code> 更加擅长）。</p><p>您可以使用 <code>sudo apt-get install docker-compose</code> 进行安装。</p><p><code>Docker Compose</code> 使用 <code>json</code> 的超集 <code>yaml</code> 来在单机上进行配置 <code>compose.yaml</code>，然后通过 <code>Compose CLI</code> 也就是命令行工具来从配置中创建并且启动所有容器（服务）。</p><p>而 <code>CLI</code> 工具也很容易使用，和 <code>Docker CLI</code> 也有些类似：</p><ul><li><code>docker compose up [--bulid] [--watch] [-d]</code> 启动您在 <code>compose.yaml</code> 文件中定义的所有服务（使用 <code>--bulid</code> 可以重新构建镜像文件并且启动对应的容器；<code>--watch</code> 会自动监视项目中的文件变化，并在检测到变化时重新构建或重启相关的服务；<code>-d</code> 表示分离可以在后台运行本指令对应的服务）</li><li><code>docker compose stop</code> 暂停服务</li><li><code>docker compose start</code> 启动服务</li><li><code>docker compose restart</code> 重启服务</li><li><code>docker compose down</code> 要暂停并移除正在运行的服务</li><li><code>docker compose logs [service_name]</code> 查看容器的输出日志，用 <code> service_name</code> 可指定不同容器避免日志混乱</li><li><code>docker compose ps</code> 列出所有服务及其当前状态</li><li>如果 <code>.yml</code> 配置文件是自定义的名字，则需要在每个 <code>compose</code> 指令加个 <code>-f &lt;yml_config_path&gt;</code> 参数指定配置文件的实际路径</li><li><code>docker compose ls</code> 如果已经有启动完毕的项目，就会被列出来，默认项目的名称就是配置文件所在的父目录</li></ul><p>同样，实践部分的内容我放在了后面。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果新增加编排配置文件的内容并希望加载新配置，而不影响已存在的容器和镜像，可以使用以下命令来实现。</p><ul><li>使用 <code>docker-compose up</code> 更新配置，这个命令会尝试重新创建、更新服务的容器，但不会影响已存在的镜像，除非您显式地更新了镜像版本。它会根据 <code>compose.yaml</code> 文件中的配置，检查现有容器是否需要更新。如果您没有修改镜像（例如没有修改 <code>image</code> 或 <code>build</code> 字段），<code>Docker</code> 会尝试重新启动并应用新的配置，而不会重新拉取镜像，也不会删除任何镜像。</li><li>使用 <code>docker-compose up --no-deps &lt;server_name&gt;</code> 只重启某个服务，这会更新 <code>work-gitea-server</code> 服务，而不会影响它所依赖的服务。</li><li>如果你只是想重启服务，而没有修改任何配置，可以使用 <code>docker-compose restart</code>。这将会重启所有服务的容器，不会影响镜像和原有数据。</li></ul></div><h2 id="_9-docker-的实操" tabindex="-1"><a class="header-anchor" href="#_9-docker-的实操"><span>9.Docker 的实操</span></a></h2><h3 id="_9-1-使用别人制作的镜像文件" tabindex="-1"><a class="header-anchor" href="#_9-1-使用别人制作的镜像文件"><span>9.1.使用别人制作的镜像文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用别人制作的镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hello-world</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    d2c94e258dcb</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   13.3kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查端口合法</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lsof</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :8086</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 没有任何输出就是没有任何服务占用该端口</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 运行镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 注意这里的 --rm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 唤出了类似本地终端的交互提示符, 后面的字符串 7a86d1b1da47 代表容器编号, 可以使用这个 bash 简单看下操作系统版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">release</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">PRETTY_NAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Debian GNU/Linux 11 (bullseye)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">NAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Debian GNU/Linux</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">VERSION_ID</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">11</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">VERSION</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">11 (bullseye)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">VERSION_CODENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bullseye</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ID</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">debian</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HOME_URL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://www.debian.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SUPPORT_URL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://www.debian.org/support</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">BUG_REPORT_URL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://bugs.debian.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 不过我们就不做配置文件了, 因为这个环境几乎没有一个常用编辑器(您也可以考虑使用 apt-get update 进行更新后再下载下面这些文本编辑工具)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nano</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nano:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> command</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> command</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vi:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> command</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> found</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 直接启动 Nginx(用 Nginx 的原生指令, 而不使用 systemd, 因为我们没有下载...)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 32#32: using the </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">epoll</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> event method</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 32#32: nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 32#32: built by gcc 10.2.1 20210110 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Debian</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.2.1-6</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 32#32: OS: Linux 5.15.0-113-generic</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 32#32: getrlimit(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">RLIMIT_NOFILE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">): 1048576:1048576</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 33#33: start worker processes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 33#33: start worker process 34</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:33:29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [notice] 33#33: start worker process 35</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果希望查看容器内部的进程，不推荐直接在容器内部使用 <code>ps</code> 等指令，因为有可能没有下载在里面，而是在宿主机器中使用 <code>Docker</code> 的内置命令，如下命令行。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器内部的进程列表</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> top</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 7a86d1b1da47</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">UID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 PID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 PPID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   STIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               TTY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 TIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                CMD</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                530223</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              530202</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   Sep07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                531963</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              530223</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemd+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            531964</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              531963</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> worker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemd+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            531965</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              531963</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> worker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：这里提前说明一下，开发者可以设置镜像文件基于不同系统中，而 <code>Docker</code> 会根据这个设置来模拟不同 <code>Shell</code>，这样方便别人使用镜像文件进行二次开发，而实际的镜像文件如果没有打开 <code>Shell</code>，运行的时候只会调用 <code>Docker</code> 根据本地系统调用模拟出来的系统调用来支持实际需要运行的镜像程序。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：有些情况下我们不得不进入容器内部进行配置，但是每次都需要安装各种各样的指令实在事太过于繁琐，因此您可以尝试使用 <code>apt install -y busybox</code> 这个 <code>busybox</code> 内部集成了相当多的 <code>Linux</code> 指令，总体积却非常的小，不过每次执行指令就需要在指令前面加上 <code>busybox</code>，例如 <code>busybox ls</code>，如果容器不需要使用则可以使用 <code>apt --purge autoremove busybox</code> 来卸载。</p></div><p>然后我们开始进行关于 <code>Nginx</code> 的配置，这个方面需要您自己去补补课了，我也有结合官方文档写过类似的新手教程。不过这里我们简单点，不配置什么，就用 <code>Nginx</code> 默认的配置来试试。在浏览器中访问宿主机的 <code>ip:8086</code> 端口，看看能不能访问得到，结果如下。</p><figure><img src="`+b+`" alt="image-20240908004413851" tabindex="0" loading="lazy"><figcaption>image-20240908004413851</figcaption></figure><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 容器对应的日志输出</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 120.235.190.119</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [07/Sep/2024:16:42:18 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+0000]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024/09/07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16:42:19</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [error] 39#39: </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2 </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">open</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/share/nginx/html/favicon.ico</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> failed </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> such</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, client: 120.235.190.119, server: localhost, request: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET /favicon.ico HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, host: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">47.121.195.60:8086</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, referrer: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://47.121.195.60:8086/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">120.235.190.119</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [07/Sep/2024:16:42:19 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+0000]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET /favicon.ico HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 404</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 555</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://47.121.195.60:8086/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果退出了容器的命令行，由于设置了 <code>--rm</code> 就会导致容器停止并且被输出。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 观察退出容器的现象</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@7a86d1b1da47:/etc/nginx/conf.d#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+E+`" alt="image-20240908004736665" tabindex="0" loading="lazy"><figcaption>image-20240908004736665</figcaption></figure><p>果然无法访问了...</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：您也可以尝试使用容器来管理数据库，例如 <code>MySQL</code> <code>Redis</code>，这样数据库就可以借用镜像文件来做迁移，非常方便，至于如何迁移，我后面再来实践。</p></div><h3 id="_9-2-使用自己制作的镜像文件" tabindex="-1"><a class="header-anchor" href="#_9-2-使用自己制作的镜像文件"><span>9.2.使用自己制作的镜像文件</span></a></h3><p>开发者在构建 <code>Docker</code> 镜像时，会在一个叫 <code>Dockerfile</code> 中指定基础镜像（通常包含操作系统），这个基础镜像决定了容器运行时的操作系统环境。其他开发者 <code>pull</code> 拉取下来后，使用 <code>Docker</code> 运行，并且 <code>Docker</code> 的容器化可以保证镜像在任何环境产生一样的效果，并且具有隔离性，原理我们之前提到过。</p><p>待补充...</p><h3 id="_9-3-实时更新容器的资源限制" tabindex="-1"><a class="header-anchor" href="#_9-3-实时更新容器的资源限制"><span>9.3.实时更新容器的资源限制</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 实时更新容器的资源限制</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用 stats 来观察容器的资源限制, 如果资源不够使用可以进行拓展</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   29</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hours</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 29</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hours</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 调整内存</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 300m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --memory-swap</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 600m</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># -m 300m 指定容器的内存限制为 300MB, 这表示容器在物理内存中最多只能使用 300MB 内存。一旦容器的内存使用达到这个限制, 它将尝试释放内存, 否则将会触发内存不足(OOM)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># --memory-swap 600m: 设置容器的总内存和 swap 限制为 600MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     MEM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LIMIT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   MEM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NET</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I/O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          BLOCK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I/O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        PIDS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.08%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     64.46MiB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 300MiB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   21.49%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    15.2MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 505kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   201kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 31.2MB</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 调整处理器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --cpu-period=100000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --cpu-quota=10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     MEM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LIMIT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   MEM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> %</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NET</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I/O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        BLOCK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I/O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        PIDS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.09%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     64.52MiB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 300MiB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   21.51%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    17MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 589kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   201kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 32.8MB</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-4-宿主机容器主机共享文件" tabindex="-1"><a class="header-anchor" href="#_9-4-宿主机容器主机共享文件"><span>9.4.宿主机容器主机共享文件</span></a></h3><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外 <code>cp</code> 也算是一种共享机制，虽然使用起来是比较麻烦的，但有些特殊情况也很有用。</p></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 宿主机容器主机共享文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建需要共享的文件夹</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/temp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 我们启动一个 nginx 服务, 并且共享一个目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/您的用户名/temp:/temp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d77f03ea1deb218d4aaf593f4ae0da3e6496c3c37af2cf58f59b2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看容器的运行状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   33</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 33</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello container</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/temp/test.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/temp/test.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查是否共享</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  docker-entrypoint.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lib64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  proc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   srv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  temp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  usr</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">boot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  docker-entrypoint.d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  etc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   lib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   media</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sbin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  sys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  tmp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   var</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">test</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 确实是实时共享了这个文件</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 试试能不能从宿主数据其他非共享文件夹中的文件直接拷贝到容器主机内部</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> other</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello container~~~</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/other/test.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/ljp/other/test.txt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:/temp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Successfully</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> copied</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.05kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:/temp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> temp/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">test</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@1bd761f8ab2d:/temp#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test.txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container~~~</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 果然内容发送了改变</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-5-离库迁移现有镜像和容器" tabindex="-1"><a class="header-anchor" href="#_9-5-离库迁移现有镜像和容器"><span>9.5.离库迁移现有镜像和容器</span></a></h3><h4 id="_9-5-1-迁移镜像文件" tabindex="-1"><a class="header-anchor" href="#_9-5-1-迁移镜像文件"><span>9.5.1.迁移镜像文件</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 离库迁移现有镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 迁移镜像</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; Centos 下的 Docker &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> swap</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 创建一个共享目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 777</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> swap</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 保证共享目录所有人均可使用</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; Ubuntu 下的 Docker &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查询当前拥有的镜像</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.1.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                          1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> save</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:1.0.0</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434_my_test_repository_1_0_0.tar</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 制作镜像压缩包</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查看压缩包是否存在</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434_my_test_repository_1_0_0.tar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434_my_test_repository_1_0_0.tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 用户名@主机地址:/home/用户名/swap</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 传输文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可能需要先输入本机的管理员密码</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 然后肯定是需要输入对端服务器的管理员密码的</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...等待传输完毕, 有点 hhhh, 将就用叭...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; Centos 下的 Docker &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/用户名/swap</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434_my_test_repository_1_0_0.tar</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 成功接收到镜像压缩包</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> doxker</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 启动 docker 守护进程</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> load</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/swap/limou3434_my_test_repository_1_0_0.tar</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8cbe4b54fa88:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  84.01MB/84.01MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5dd6bfd241b4:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  62.51MB/62.51MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">043198f57be0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  3.584kB/3.584kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2731b5cfb616:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  4.608kB/4.608kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6791458b3942:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  3.584kB/3.584kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4d33db9fdf22:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> layer</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [==================================================&gt;]  7.168kB/7.168kB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou3434/my_test_repository:1.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">limou3434/my_test_repository</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     a7be6198544f</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 转化为本地的镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-5-2-迁移镜像容器" tabindex="-1"><a class="header-anchor" href="#_9-5-2-迁移镜像容器"><span>9.5.2.迁移镜像容器</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 离库迁移现有镜像容器</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; Ubuntu 下的 Docker &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1bd761f8ab2d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> days</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> days</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> export</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx.tar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx.tar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rsync</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Reading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lists...</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Done</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Building</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dependency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tree...</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Done</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Reading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> state</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> information...</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Done</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rsync</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (3.2.7-0ubuntu0.22.04.2).</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upgraded,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newly</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installed,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 193</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upgraded.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rsync</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -avz</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --progress</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/my_nginx.tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 接受主机用户@接受主机地址:/home/接受主机用户名/temp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sending</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> incremental</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx.tar</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    320,359,936</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 100%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  349.55kB/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    0:14:54</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (xfr#1, to-chk = 0/1)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 126,043,159</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  received</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  135,022.17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes/sec</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 320,359,936</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  speedup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.54</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; Centos 下的 Docker &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx.tar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx.tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_nginx:2.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sha256:6f143ac5b5dde633bea81eb0f4c9a56967e48df069fc81d8e03c3584422badcf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">my_nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                       2.0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     6f143ac5b5dd</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        314MB</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-6-使用存储卷达到灾难恢复" tabindex="-1"><a class="header-anchor" href="#_9-6-使用存储卷达到灾难恢复"><span>9.6.使用存储卷达到灾难恢复</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用存储卷达到灾难恢复</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拉取 MySQL 镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:5.7</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5.7:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">20e4dcae4c69:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1c56c3d4ce74:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e9f03a1c24ce:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">68c3898c2015:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6b95a940e7b6:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">90986bb8de6e:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ae71319cb779:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ffc89e9dfd88:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">43d05e938198:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">064b2d298fba:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">df9a4d85569b:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:4bc6bc963e6d8443453676cae56536f4b8156d78bae03c0145cbe47c2aad73bb</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:5.7</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/mysql:5.7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建并运行容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql-demo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MYSQL_ROOT_PASSWORD=limou3434</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/您的用户名/data/myworkdir/mysqldata:/var/lib/mysql</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:5.7</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 注意这里使用环境参数 MYSQL_ROOT_PASSWORD 来传递 MySQL 密码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 登陆容器私用数据库</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql-demo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> password:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Welcome</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MySQL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> monitor.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Commands</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> end</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> or</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MySQL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5.7.44</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MySQL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Community</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (GPL)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (c) 2000, 2023, Oracle and/or its affiliates.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Oracle</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> registered</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> trademark</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oracle</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Corporation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and/or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> its</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">affiliates.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Other</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> names</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> may</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> be</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> trademarks</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> their</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> respective</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">owners.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Type</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">help;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\\h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> help.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Type</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\\c</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clear</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> current</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> input</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> statement.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> databases</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Database</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">           |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> information_schema</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> mysql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">              |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> performance_schema</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sys</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rows</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> database</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Query</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> row</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> affected</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Database</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> changed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> student</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sno</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> char</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> varchar</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Query</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rows</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> affected</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.02 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> into</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> student</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> values</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;1&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dimou</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;2&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">eimou</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Query</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rows</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> affected</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.01 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Records:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Duplicates:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Warnings:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">select</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> student</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sno</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sname</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> dimou</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> eimou</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rows</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Bye</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看数据库的存储位置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tree</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">\\myworkdir</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysqldata</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto.cnf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ca-key.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ca.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> client-cert.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> client-key.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ib_buffer_pool</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ibdata1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ib_logfile0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ib_logfile1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ibtmp1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> limou</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 我们自己创建的数据库</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql.sock</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/run/mysqld/mysqld.sock</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> performance_schema</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> private_key.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> public_key.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server-cert.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server-key.pem</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sys</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">www</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 404.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50x.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> access.log</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error.log</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image1.jpg</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image2.jpg</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└──</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> index.html</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> directories,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> files</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看持久化的内容, 可以看到变成了二进制几乎无法阅读</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> myworkdir/mysqldata/limou</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">db.opt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  student.frm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  student.ibd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> myworkdir/mysqldata/limou/db.opt</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">default-character-set</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">latin1</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">default-collation</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">latin1_swedish_ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> myworkdir/mysqldata/limou/student.frm</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">�</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      8�//</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ��</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   InnoDB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                       �@</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">P@</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)                                        snosname��</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">�sno�sname�%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                                                                                                                      </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> myworkdir/mysqldata/limou/student.ibd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">�-�</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">��@!��������������������������</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">�������������������������-�</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">��_M͔�t$M͔�t$</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&lt;�</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">��_���������������������������������i������������������������������������������������������������������������������������������������������������������������������������������������������i���������������������������������������������������������������������������������������������������������������������������������&lt;�</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">��_��r�����������E����)�2infimum</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                                          supremum</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;     �  dimou��      �  eimoupc��r���%  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 假设此时发生意外(容器因为停电而停止), 并且有人失误删除了容器以节省磁盘空间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker stop mysql-demo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker rm mysql-demo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 重新正确启动容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker container run --name mysql-demo -e MYSQL_ROOT_PASSWORD=limou3434 -it -d -v /home/ljp/data/myworkdir/mysqldata:/var/lib/mysql mysql:5.7</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dc88ef57752021a84ec67841fefd94ada18836bd1364f75a0366ef7ff2008340</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 重新进入容器的 bash 进行交互</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker container exec -it mysql-demo bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 重新登录数据库</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2# mysql -u root -p</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter password: </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Your MySQL connection id is 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server version: 5.7.44 MySQL Community Server (GPL)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Oracle is a registered trademark of Oracle Corporation and/or its</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">affiliates. Other names may be trademarks of their respective</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">owners.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 重新查看数据库和数据表以及其中的数据, 可以看到灾难恢复成功, 数据没有发生丢失</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; show databases;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| Database           |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| information_schema |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| limou              |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| mysql              |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| performance_schema |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| sys                |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5 rows in set (0.00 sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; use limou;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Reading table information for completion of table and column names</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">You can turn off this feature to get a quicker startup with -A</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Database changed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; show tables;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+-----------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| Tables_in_limou |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+-----------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| student         |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+-----------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1 row in set (0.00 sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; select * from student;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| sno  | sname |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| 1    | dimou |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| 2    | eimou |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+------+-------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2 rows in set (0.00 sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Bye</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2# exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 尝试删除存储卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo rm -rf ~/data/myworkdir</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"># 果然会发生数据灾难, 持久化的数据不见了</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo docker container exec -it mysql-demo bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2# mysql -u root -p</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter password: </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Your MySQL connection id is 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server version: 5.7.44 MySQL Community Server (GPL)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Oracle is a registered trademark of Oracle Corporation and/or its</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">affiliates. Other names may be trademarks of their respective</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">owners.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; show databases;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| Database           |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">| information_schema |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">+--------------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1 row in set (0.00 sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql&gt; exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Bye</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bash-4.2# exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker container stop mysql-demo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql-demo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$ sudo docker container rm mysql-demo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mysql-demo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-7-使用桥接网络来转化流量" tabindex="-1"><a class="header-anchor" href="#_9-7-使用桥接网络来转化流量"><span>9.7.使用桥接网络来转化流量</span></a></h3><p>之前我们只是简单验证了下网络的一些配置文件，还没有做过实际的通信，这里实践一下五个模式下的网络转发过程。</p><h4 id="_9-7-1-验证-bridge-网络模型" tabindex="-1"><a class="header-anchor" href="#_9-7-1-验证-bridge-网络模型"><span>9.7.1.验证 Bridge 网络模型</span></a></h4><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：这里放上之前已经提到的文本，避免您反复跳转...</p><ul><li><strong>描述</strong>：<code>bridge</code> 驱动会在 <code>Docker</code> 主机上创建一个 <code>Linux</code> 网桥。默认情况下，连接到同一网桥的容器可以相互通信</li><li><strong>应用场景</strong>：当多个容器需要在同一台 <code>Docker</code> 主机上通信时使用。是 <code>Docker</code> 容器的默认网络模式。</li><li><strong>特点</strong>：容器与宿主机隔离，容器间可以使用同一个虚拟网桥进行通信</li></ul></div>`,247)),n(a,{id:"mermaid-1959",code:"eJxLL0osyFDgKi5NgrCertv5dOaK53snPt89hyspWgnCf7Jj97M5uwyVYrmSUYWMgEIpqELGQKEkBRtd3Rf75zxf0f2yYdaT/Qt1de0UkrmSsQmnYFedwpWal8IFAAquUG8="}),s[1]||(s[1]=i(`<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Bridge 网络模型(准备阶段)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拉取镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1.23.3:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">f1f26f570256:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">84181e80d10e:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1ff0f94a8007:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d776269cad10:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">e9427fcfa864:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d4ceccbfc269:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:f4e3b6489888647ce1834b601c6c06b9f8c03dee6e097e13ed3e28c01ea3ac8c</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试使用 Docker 自己创建一个虚拟网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> create</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --driver</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bridge</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --gateway=172.28.0.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --subnet=172.28.0.0/16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 后台启动多个容器的同时接入同一张网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8085:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8086:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_3_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 8087:80</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看是否都正确启动</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">16571b8f9543</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       0.0.0.0:8087</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8087</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   test_3_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a1491841311d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> About</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   test_2_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a7353ee991b6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        0.0.0.0:8085</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :::8085</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   test_1_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查虚拟网卡配置和容器内部网络地址的配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NETWORK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d76247a506b9</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">641718df1c49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">464051de9f9b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_bridge_network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a65bf697fc48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                null</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;Config&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;Subnet&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.0/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 虚拟网卡掩码配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 虚拟网卡主机配置</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 53</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> head</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">4de877a452aa50c3999a51afa5bc121f5c1d1e439a55b7011fc7338bb7d51b4a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/4de877a452aa</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;80/tcp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8085</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">::</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8085</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            },</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;my_bridge_network&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6fb08c6d19bd5506050279e459a607fea43ef82c398858ebc6b5313c8f17a93d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 的确在子网内部</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;test_1_nginx&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;a7353ee991b6&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 53</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> head</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2c9961bbeed6b60289f2672b87372d47bad2875cacc1b0df3860b92f5c62e8e2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/2c9961bbeed6</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;80/tcp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8086</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">::</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8086</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            },</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;my_bridge_network&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:03</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">872c02e1a7ef40c71f70c2d71ea2eaf9ecc065e7ca3e9da27873ea1088f6c899</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 的确在子网内部</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;test_2_nginx&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;a1491841311d&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_3_nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 53</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> head</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">846fb2aa7584d79010271d0a84e6f87c4980ba7c07fc1377ab10426de9c4c38a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/846fb2aa7584</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;80/tcp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8087</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostIp&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">::</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;HostPort&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8087</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            },</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;my_bridge_network&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:04</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">e0c51bbb157f571890c9fd7c602ea227831d7e3e24695e2214dcb48d2499039b</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.4</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 的确在子网内部</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;test_3_nginx&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;16571b8f9543&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在通过我们的虚拟网卡 <code>my_bridge_network</code> 组建了一个容器局域网，这个网络和主机网络是隔离开的，要验证也不困难，只需要在一个容器内部使用 <code>curl -i 主机地址</code> 访问其他容器看看是否能生效返回 <code>nginx</code> 的默认网页即可。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Bridge 网络模型(实验阶段)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 您启动容器的时候可能 nginx 就已经被启动了, 如果没有您手动启动即可, 这里只演示效果</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查 Nginx 是否已经启动</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> top</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">UID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 PID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 PPID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   STIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               TTY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 TIME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                CMD</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                916565</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              916544</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   12:31</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> off</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemd+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            916617</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              916565</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   12:31</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> worker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemd+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            916618</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              916565</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">              0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   12:31</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">               ?</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            nginx:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> worker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入容器安装 curl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ... 一些输出</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试访问其他容器部署的 Nginx 默认网址, 并且访问其他两个地址进行对比</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试访问</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">curl:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (7) Failed to connect to 172.28.0.0 port 80: No route to host</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 访问容器 1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx/1.18.0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (Ubuntu)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 06:58:44</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 612</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Last-Modified:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 14:09:01</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keep-alive</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ETag:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5e9efe7d-264</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Accept-Ranges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 访问容器 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 06:58:46</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Last-Modified:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dec</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2022</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:53:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keep-alive</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ETag:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6398a011-267</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Accept-Ranges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> color-scheme:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> light</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 访问容器 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 06:58:48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Last-Modified:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dec</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2022</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:53:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keep-alive</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ETag:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6398a011-267</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Accept-Ranges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> color-scheme:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> light</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 访问容器 4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 06:58:49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Last-Modified:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dec</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2022</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:53:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keep-alive</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ETag:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6398a011-267</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Accept-Ranges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> color-scheme:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> light</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试访问</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.28.0.5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">curl:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (7) Failed to connect to 172.28.0.5 port 80: No route to host</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>成功了，由此可以看到 <code>Docker</code> 的强大之处，不过别兴奋，我们还有其他几个网络模型要研究！</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：只要虚拟网卡由分配给容器地址，那这个网卡就不会被用户误删除，您可以自己尝试一下。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：另外这里有一个比较有趣的，就是虚拟网卡分配给不同容器的同时，本身的配置信息也会发生变动，方便用户查看该网卡组建的局域网的详细信息。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 分配好容器地址后, 重新查看网卡的详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">my_bridge_network</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Created</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2024-09-19T12:29:49.966495201+08:00</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Scope</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bridge</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EnableIPv6</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPAM</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {},</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Config</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">              {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                  &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Subnet</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.0/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                  &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Gateway</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">              }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">          ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Internal</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Attachable</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Ingress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigFrom</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Network</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigOnly</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Containers</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: { </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 这里之后的信息之前是没有看到的</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">16571b8f9543f8a5ab9f594b5cc71fba19b32eab3faeef1065abcfd76bf90205</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test_3_nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EndpointID</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">e0c51bbb157f571890c9fd7c602ea227831d7e3e24695e2214dcb48d2499039b</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MacAddress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:04</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv4Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.4/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv6Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">a1491841311d729f0c6746ec36b4b153e071fe68c4aa2542c39f57950dbeb50a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test_2_nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EndpointID</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">872c02e1a7ef40c71f70c2d71ea2eaf9ecc065e7ca3e9da27873ea1088f6c899</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MacAddress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:03</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv4Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.3/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv6Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">          &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">a7353ee991b62be50107c3a18c7a0b2ad0c4e66bbafe773f28e87ce8a77cdf66</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test_1_nginx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EndpointID</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6fb08c6d19bd5506050279e459a607fea43ef82c398858ebc6b5313c8f17a93d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MacAddress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv4Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.2/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">              &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv6Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {},</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">      &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Labels</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果容器停止运行或被删除，就会导致断开和虚拟网卡的连接，类似路由器组建的子网中掉线的主机，上面网卡的详细信息也会把这个容器主机对应的信息剔除。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：其实 <code>Docker</code> 还支持 <code>DNS</code> 域名解析，不过这里的域名是指容器主机的名字，但是安装 <code>Docker</code> 时一开始创建的默认网络 <code>bridge</code> 本身却不开启这种行为（这个您验证一下即可，这里只展示自定义网络的 <code>DNS</code> 现象）。值得注意的是，<code>curl</code> 在访问 <code>http</code> 服务器时，默认访问 <code>80</code> 端口，因此我们直接访问容器名字，看看能不能得到 <code>Nginx</code> 的默认首页即可。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试直接访问其他容器的名字</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_nginx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">root@a7353ee991b6:/#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx/1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Sep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 07:47:16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 615</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Last-Modified:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dec</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2022</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:53:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> keep-alive</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ETag:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6398a011-267</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Accept-Ranges:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> color-scheme:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> light</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="_9-7-2-验证-host-网络模型" tabindex="-1"><a class="header-anchor" href="#_9-7-2-验证-host-网络模型"><span>9.7.2.验证 Host 网络模型</span></a></h4><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：这里放上之前已经提到的文本，避免您反复跳转...</p><ul><li><strong>描述</strong>：容器与 <code>Docker</code> 主机之间没有网络隔离，容器直接使用主机的网络栈（原理其实就是和宿主主机使用同一个网络命名空间）</li><li><strong>应用场景</strong>：当容器需要直接使用主机网络，避免 <code>NAT</code> 和额外的网络层时使用，通常用于高性能需求场景</li><li><strong>特点</strong>：网络与宿主机共享，但其他资源如文件系统、进程等仍被隔离</li></ul></div>`,9)),n(a,{id:"mermaid-2017",code:"eJxLL0osyFAIceEqLk2CsJWertv/ZMduIHo2Z9fTST1P1+18OnMFhPty+panrRuf7Fr9fO/E57vnvNja8mzXBI2nrSteNgPR3uezdzzZNenF/tkvFvY8m7Pm6ZwNLxtmPdm/UFOJSwEIkqKBZiMMM1SKBQsnowobQYVTUIWNocKJ1SgOVKrlSs1L4QIA/FJwSg=="}),s[2]||(s[2]=i(`<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Host 网络模型(实验阶段)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 由于 host 网络的特殊性, hsot 虚拟网卡只需要存在一个就够了, 无需用户自己创建, 只需要在 docker run 的时候指定类型就可以, Docker 已经帮我们提供了这个虚拟网卡</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看 Docker 提供的 host 网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NETWORK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d76247a506b9</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">641718df1c49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">464051de9f9b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_bridge_network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a65bf697fc48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                null</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 然后启动一个容器, 注意网络类型的选择</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4d41cf6db2ce3afdf20cd4141e0182dc1857628315b1bea4dc321ed8505e4a05</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入容器内部检查 nginx 配置并且启动</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 不过由于 Nginx 默认的端口是 80, 并且这个 80 此时因为网络类型为 host, 因此必须保证宿主主机上的 80 端口无进程使用才行, 否则容器会一直启动失败(这也侧面证明了网络资源是共用的)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx:1.23.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                  CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">81631868df4a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   nginx:1.23.3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/docker-entrypoint.…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   45</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 45</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             test_nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1:80</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 明明是在宿主本机, 并且宿主主机没有部署 Nginx, 但是却可以访问的 Nginx 的首页, 这其实就是容器 Nginx 服务的首页</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">DOCTYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> htm</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/title</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">html</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> color-scheme:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> light</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dark</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">body</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> width:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 35em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> margin:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">font-family:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tahoma,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Verdana,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arial,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sans-serif</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/style</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/head</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Welcome to nginx</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">If you see this page, the nginx web server is successfully installed and</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">working.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Further</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> required.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">For online documentation and support please refer to</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.org/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.org</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">br/</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Commercial</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> support</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">a </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://nginx.com/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx.com</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">p&gt;&lt;em</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> using nginx.</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/em&gt;&lt;/p</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/body</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/html</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-3-验证-container-网络模型" tabindex="-1"><a class="header-anchor" href="#_9-7-3-验证-container-网络模型"><span>9.7.3.验证 Container 网络模型</span></a></h4><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：这里放上之前已经提到的文本，避免您反复跳转...</p><ul><li><strong>描述</strong>：新创建的容器与指定的现有容器共享同一个网络。它们共享 <code>IP</code> 地址和端口等网络资源</li><li><strong>应用场景</strong>：当两个容器需要共享相同的网络环境时使用，但文件系统和进程仍然独立</li><li><strong>特点</strong>：两个容器通过 <code>lo</code> 回环设备通信，共享网络资源但其他资源隔离，但是会导致容器之间产生依赖性，如果启动顺序不正确就会导致部分涉及到网络的容器无法启动</li></ul></div>`,3)),n(a,{id:"mermaid-2045",code:"eJxLL0osyFAIceEqLk2CsJWertv5dOaKJzt2P5uz6+X0LU9bNz7Ztfr53onPd895sbXl2a4JGk9bV7xsBqK9z2fveLJr0ov9s18s7Hk2Z83TORteNsx6sn+hphKXAhAkRaMYZqgUCxZORhU2ggqnoAobA4VT81K4uLgAdXlZvA=="}),s[3]||(s[3]=i(`<p>那么这种网络类型需要使用 <code>create</code> 来创建么？其实也不需要，可以在新容器启动的时候，使用 <code>--network ontainer:旧容器名</code> 来让新创建的容器复用旧容器的网络。</p><p>不过我们这里就不能使用 <code>Nginx</code> 来演示了，因为镜像文件中的 <code>Nginx</code> 默认在容器启动的时候就启动 <code>Nginx</code> 导致多个容器在一套网络资源中会发生冲突，最终必有一个容器无法正常运行，因此我们换一个软件的镜像吧，我们其实只需要简单测试下网络即可。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Container 网络模型(实验阶段)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拉取 busybox 软件的镜像文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox:1.35</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1.35:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pulling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> library/busybox</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a9b82d1f2d6e:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> complete</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Digest:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sha256:98ad9d1a2be345201bb0709b0d38655eb1b370145c7d94ca1fe9c421f76e245a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Status:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Downloaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> newer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox:1.35</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker.io/library/busybox:1.35</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> image</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1.23.3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    ac232364af84</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> months</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   142MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">busybox</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      95f45f955052</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> years</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     4.27MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 尝试创建相关的容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_busybox</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox:1.35</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">165bf004b9c097f0c85e9a213fee48fb4df5a27cd01bfbc8c84b7c6e8ceb87c5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_busybox</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container:test_1_busybox</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox:1.35</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d415e72454cd06d444a839ea3624082aa4106102483d2ebdaa854c7f8617194b</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">d415e72454cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   busybox:1.35</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             test_2_busybox</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">165bf004b9c0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   busybox:1.35</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             test_1_busybox</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 Container 网络</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_busybox</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eth0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encap:Ethernet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  HWaddr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:42:AC:1C:00:02</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:172.28.0.2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Bcast:172.28.255.255</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mask:255.255.0.0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到和下面分配到地址是一样的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BROADCAST</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MULTICAST</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  MTU:1500</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          collisions:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> txqueuelen:0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:1086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">KiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  TX bytes:0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        Link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encap:Local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loopback</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mask:255.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ::1/128</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Scope:Host</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LOOPBACK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  MTU:65536</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          collisions:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> txqueuelen:1000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  TX bytes:0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_busybox</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eth0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encap:Ethernet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  HWaddr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:42:AC:1C:00:02</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:172.28.0.2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Bcast:172.28.255.255</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mask:255.255.0.0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到和上面分配到地址是一样的</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> BROADCAST</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MULTICAST</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  MTU:1500</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          collisions:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> txqueuelen:0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:1086</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">KiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  TX bytes:0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        Link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encap:Local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loopback</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mask:255.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ::1/128</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Scope:Host</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LOOPBACK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  MTU:65536</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          collisions:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> txqueuelen:1000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  TX bytes:0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 上面分配到的 id 地址相同意味着两个容器的网络资源可以理解为同一台主机上的网络资源(不过其他资源依旧是按照两个主机来进行隔离)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查询旧容器之前绑定的网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NETWORK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                DRIVER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4eb8fda8a3ac</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">641718df1c49</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">464051de9f9b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   my_bridge_network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bridge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    local</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">a65bf697fc48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   none</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                null</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      local</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my_bridge_network</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">my_bridge_network</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Created</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2024-09-19T12:29:49.966495201+08:00</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Scope</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bridge</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EnableIPv6</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPAM</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Driver</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {},</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Config</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Subnet</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.0/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Gateway</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Internal</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Attachable</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Ingress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigFrom</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Network</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ConfigOnly</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Containers</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">165bf004b9c097f0c85e9a213fee48fb4df5a27cd01bfbc8c84b7c6e8ceb87c5</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test_1_busybox</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EndpointID</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">69127132408d8c4dba7c6e2d2f5b8e6a7bf17e173797cdf8254ac0ca9f74a330</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MacAddress</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv4Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.2/16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">                &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IPv6Address</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Options</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {},</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Labels</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: {}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以再进一步验证一下</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_1_busybox</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">c2e33dc0cd635370167417840c50130e1fe2585ae52c8099c2df32ab1a0f8b1d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/run/docker/netns/c2e33dc0cd63</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {},</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        &quot;my_bridge_network&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAMConfig&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Links&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Aliases&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">02:42:ac:1c:00:02</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;DriverOpts&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;NetworkID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">464051de9f9b26ba28623406e73d8d1641be9b72652aed1238f82d3f44fb04ac</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">69127132408d8c4dba7c6e2d2f5b8e6a7bf17e173797cdf8254ac0ca9f74a330</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以看到网关地址</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">172.28.0.2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 还有和之前 ifconfig 一样的地址分配结果</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 16,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            &quot;DNSNames&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;test_1_busybox&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                &quot;165bf004b9c0&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            ]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inspect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_2_busybox</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;NetworkSettings&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Bridge&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SandboxKey&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Ports&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {},</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;HairpinMode&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;LinkLocalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPAddresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;SecondaryIPv6Addresses&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> null,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;EndpointID&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6Address&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;GlobalIPv6PrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPPrefixLen&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;IPv6Gateway&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;MacAddress&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;Networks&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {}</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 此时这里设置为空, 这意味着该新容器在地址上是依附于旧容器的(两者相同地址, 共享网络资源)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-4-验证-none-网络模型" tabindex="-1"><a class="header-anchor" href="#_9-7-4-验证-none-网络模型"><span>9.7.4.验证 None 网络模型</span></a></h4><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：这里放上之前已经提到的文本，避免您反复跳转...</p><ul><li><strong>描述</strong>：<code>Docker</code> 容器拥有自己的网络命名空间，但不进行任何网络配置，容器没有网络功能（除了本地环回）。</li><li><strong>应用场景</strong>：需要完全隔离的容器时使用，尤其是对网络安全有严格要求的场景</li><li><strong>特点</strong>：容器无网卡、无 <code>IP</code>、无路由，完全网络隔离</li></ul></div>`,5)),n(a,{id:"mermaid-2079",code:"eJxLL0osyFAIceEqLk2CsJ/vnfh895yn63qetq54OWvK82W7n/etf7qomUsBCBI1NJSertv5dOaKJzt2P5uzS0lTkys1L4WLCwAo+iOt"}),s[4]||(s[4]=i(`<p>这次是终于可以使用 <code>--network none</code> 来指定这种特殊的网络类型了，这种创建和理解都不困难，这里就不过多演示了，您自己试一试吧...</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证 None 网络模型(实验阶段)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test_busybox</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> none</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> busybox:1.35</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        Link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encap:Local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Loopback</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以发现没有类似 eth0 等网卡字眼了, 只剩下一个用于本地环回的本地网卡</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Mask:255.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          inet6</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addr:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ::1/128</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Scope:Host</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LOOPBACK</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  MTU:65536</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dropped:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          collisions:0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> txqueuelen:1000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes:0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)  TX bytes:0 (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> B</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # exit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-7-5-验证-overlay-网络模型" tabindex="-1"><a class="header-anchor" href="#_9-7-5-验证-overlay-网络模型"><span>9.7.5.验证 Overlay 网络模型</span></a></h4><blockquote><p>[!WARNING]</p><p>注意：这里放上之前已经提到的文本，避免您反复跳转...</p><ul><li><strong>描述</strong>：用于跨多台 <code>Docker</code> 主机的容器通信，适用于 <code>Docker Swarm</code> 集群中，将多个 <code>Docker</code> 守护进程连接在一起（前提是宿主主机们需要都能相互通信）</li><li><strong>应用场景</strong>：当需要多个 <code>Docker</code> 主机上的容器协同工作时使用，如分布式集群服务</li><li><strong>特点</strong>：跨主机的容器通信，集群内的服务可以相互通信</li></ul></blockquote>`,4)),n(a,{id:"mermaid-2112",code:"eJxLL0osyFDwCeJSAILEaqWn6/Y/2bEbiJ7N2aVUCxZNwiqajCHKlahgo6v7tK31ZfOKp+t2Pp254sX+Oc9XdL9smPVk/0JdXTuFJK4kQkqSuZIJKUnkAgCVXF8T"}),s[5]||(s[5]=i(`<p>不过由于现代的 <code>k8s</code> 才是当下的主流，并且本系列文章不打算解说关于集群架构的知识，只是聚焦于一台主机上的容器，因此这部分知识我会在 <code>k8s</code> 中进行解说。</p><h3 id="_9-8-用编排技术做多容器管理" tabindex="-1"><a class="header-anchor" href="#_9-8-用编排技术做多容器管理"><span>9.8.用编排技术做多容器管理</span></a></h3><p>接下来我们 <a href="https://docs.docker.com/compose/gettingstarted/" target="_blank" rel="noopener noreferrer">根据 Docker Compose 官方文档来实操</a> 一下，这里使用 <code>Python</code> 的 <code>Flask</code> 框架，该应用程序在 <code>Redis</code> 中具有一个访问计数器。</p><ol><li><p>确保 <a href="https://docs.docker.com/compose/install/linux/#install-the-plugin-manually" target="_blank" rel="noopener noreferrer">安装好 Docker Compose</a> 我这里是用插件的方式安装</p></li><li><p>创建以下文件 <code>app.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># app.py</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> time</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> redis</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> flask </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Flask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">app </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Flask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">__name__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cache </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">6379</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">():</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    retries </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> True</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 没有出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">incr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hits</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 使用 incr() 方法对 hits 键的值进行自增</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 如果出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        except</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">exceptions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ConnectionError </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">as</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> exc</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 如果异常超过 5 次就终止请求</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> retries </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                raise</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> exc</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 出现异常就让程序停滞 0.5 s</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            retries </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            time</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sleep</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">@</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">app</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">route</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> hello</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">():</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    count </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello World! I have been seen </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">{}</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>安装 <code>Python</code> 相关依赖，编辑 <code>requirements.txt</code> 依赖文件</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># requirements.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Flask</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>这个时候可以简单尝试运行代码作为测试，直接在本地部署并且在本地访问即可，不过需要把 <code>app.py</code> 中的 <code>&#39;redis&#39;</code> 暂时改为 <code>&#39;127.0.0.1&#39;</code> 进行本地测试，并且手动使用 <code>sudo apt update &amp;&amp; sudo apt install redis-server &amp;&amp; sudo systemctl start redis-server</code> 安装本地 <code>Redis</code>，使用 <code>pip install -r requirements.txt</code> 安装 <code>Flask</code> 应用的依赖。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 测试代码</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 第一个终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 直接安装依赖方便测试</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 以调试模式运行 Flask 应用</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --debug</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debug</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mode:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">WARNING:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> development</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> production</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> deployment.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> production</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WSGI</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> instead.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Press</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CTRL+C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> quit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Restarting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> active!</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PIN:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 144-689-084</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [24/Oct/2024 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">19:18:39]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [24/Oct/2024 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">19:18:42]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [24/Oct/2024 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">19:18:43]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [24/Oct/2024 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">19:18:44]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GET / HTTP/1.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 第二个终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.12.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 11:18:39</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> World!</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> have</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.12.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 11:18:42</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> World!</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> have</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.12.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 11:18:43</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> World!</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> have</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.12.3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Thu,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 11:18:44</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 39</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> World!</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> have</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：如果是容器集群，可以使用 <code>&#39;redis&#39;</code> 作为域名进行访问，因此上面的 <code>app.py</code> 中没有写出具体的 <code>ip</code> 地址，还请您在本地测试结束后改回 <code>&#39;redis&#39;</code></p></div></li><li><p>编写 <code>Dockerfile</code> 文件</p><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># syntax=docker/dockerfile:1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 从 Python 3.10 镜像开始构建镜像(Alpine 是轻量级 Linux 发行版)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> python:3.10-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置工作目录</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WORKDIR</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置 Flask 指令的环境变量, 指向 Flask 应用的主文件</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ENV</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FLASK_APP=app.py </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Flask 运行的地址</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ENV</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FLASK_RUN_HOST=0.0.0.0 </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装所需要的依赖</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果有防火墙限制可以使用阿里云的, 或者传递代理环境变量</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># RUN sed -i &#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39; /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">RUN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> apk add --no-cache gcc musl-dev linux-headers </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拷贝本地的 requirements.txt 到镜像中的工作目录</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COPY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> requirements.txt requirements.txt </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 指定在镜像制作时要执行的指令</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">RUN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> pip install -r requirements.txt </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 声明容器将监听 5000 端口, 但这不会自动映射端口, 只会编写到文档中供用户作为提示</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">EXPOSE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 5000 </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拷贝当前目录下的所有文件到镜像的工作目录中</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">COPY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> . . </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 指定在容器启动时要执行的指令</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CMD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;flask&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;run&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;--debug&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：如果依赖项没有变化，则分开书写 <code>COPY</code> 的写法可以使这一依赖层可以被缓存，避免每次镜像构建时都重新安装依赖，从而加快构建速度。</p></div></li><li><p>编写 <code>compose.yaml</code> 文件</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  web</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8000:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:alpine</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此 <code>Compose</code> 文件定义了两个服务：<code>web</code> 和 <code>redis</code> 。</p><ul><li><code>web</code> 服务使用当前目录中从 <code>Dockerfile</code> 构建的镜像。然后，它将容器和主机绑定到暴露的端口 <code>8000</code>，这个示例服务使用 <code>Flask</code> 网络服务器的默认端口 <code>5000</code></li><li><code>redis</code> 服务使用从 <code>Docker Hub</code> 注册表拉取的公共 <code>Redis</code> 镜像</li></ul></li><li><p>然后使用 <code>docker compose up</code> 开始启动多个容器（如果配置名字是自定义的，则可以使用 <code>-f</code> 指定配置路径）</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动多个容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">+</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Running 3/1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ✔</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Network</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask_test_default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                                                                          0.1s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ✔</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask_test-redis-1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                                                                          0.1s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> ✔</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Container</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask_test-web-1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Created</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                                                                          0.1s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Attaching</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis-1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> web-1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:C</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.232</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory = 1&#39; for this to take effect.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:C</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.232</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> oO0OoO0OoO0Oo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Redis</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> oO0OoO0OoO0Oo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:C</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.232</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Redis</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version=7.4.1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bits=64,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit=00000000,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> modified=0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid=1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> just</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> started</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:C</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.232</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.232</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> monotonic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clock:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POSIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clock_gettime</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.233</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mode=standalone,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port=6379.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.233</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> initialized</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">redis-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 1:M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 15:15:34.233</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ready</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> accept</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connections</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Serving</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> app</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">app.py</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debug</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mode:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> WARNING:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> development</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> production</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> deployment.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> production</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WSGI</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> instead.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> addresses</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.0.0.0)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Running</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://172.18.0.3:5000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Press</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CTRL+C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> quit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Restarting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> active!</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PIN:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 851-404-503</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果打开了其他终端则可以使用下面指令来查看</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            COMMAND</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                   SERVICE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          STATUS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          PORTS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">flask_test-redis-1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   redis:alpine</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">     &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-entrypoint.s…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   redis</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   6379/tcp</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">flask_test-web-1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     flask_test-web</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">   &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">flask run --debug</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       web</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Up</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> minutes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   0.0.0.0:8000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5000/tcp,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [::]:8000-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">5000/tcp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> logs</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看 Flask 应用的日志</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>访问网站，可以在本地访问，也可以远程访问（您可以拿您的浏览器访问您 <code>http://服务器ip地址:8000</code> 来访问）</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 命令行中本地访问</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://localhost:8000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Hello</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> World!</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> I</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> have</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> times.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>不过我们每次修改代码，按照 <code>Flask</code> 应用的特性，只要修改代码并且保存就会自动热重载，但是上面却丧失了这一功能，原因是因为就算我们使用 <code>--debug</code> 来启动 <code>Flask</code> 应用，也需要进入容器内部才能修改代码，在宿主主机上修改代码文件是不会自动跟踪拷贝到容器内部的。因此需要在容器编排时就对相关的代码文件进行跟踪，因此我们需要进一步修改编排配置文件。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  web</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8000:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    develop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 开发模式下</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      watch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 跟踪代码</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> action</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sync</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 这是同步操作</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 宿主主机监视路径</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /code</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 容器主机目标路径</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:alpine</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>而之前运行的容器，我们使用 <code>docker compose down</code> 卸载后 <code>docker compose up --bulid --watch</code> 重新制作镜像，启动新的容器。然后尝试修改宿主主机上的代码即可观察现象。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 开发模式下同步更新</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 1 号终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> app.py</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># app.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">app</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">__name__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis.Redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6379</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">def</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    retries</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> True:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 没有出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        try:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cache.incr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;hits&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 使用 incr() 方法对 hits 键的值进行自增</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 如果出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        except</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis.exceptions.ConnectionError</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exc:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 如果异常超过 5 次就终止请求</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> retries</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ==</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                raise</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exc</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 出现异常就让程序停滞 0.5 s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            retries</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            time.sleep(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.5</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">@app.route(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;/&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">def</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    count</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello World! I have been seen {} times.\\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> down</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --bulid</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --watch</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 2 号终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> app.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> app.py</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># app.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">app</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Flask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">__name__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis.Redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6379</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">def</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    retries</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> True:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 没有出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        try:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            return</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cache.incr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;hits&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 使用 incr() 方法对 hits 键的值进行自增</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 如果出现异常的话</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        except</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> redis.exceptions.ConnectionError</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exc:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 如果异常超过 5 次就终止请求</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            if</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> retries</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ==</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                raise</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exc</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 出现异常就让程序停滞 0.5 s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            retries</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            time.sleep(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0.5</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">@app.route(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;/&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">def</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hello</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    count</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get_hit_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # return &#39;{}\\n&#39;.format(count)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello World! I have been seen {} times.\\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.format</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 1 号终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在上述修改被保存后立刻就出现了以下输出</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">⦿</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Syncing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> service</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">web</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> after</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> changes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> were</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> detected</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Detected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> change</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/code/app.py</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reloading</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Restarting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> active!</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">web-1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Debugger</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PIN:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 779-253-463</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; ed &lt;&lt;&lt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &gt;&gt;&gt; begin: 2 号终端 &gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.10.15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Fri,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:33:42</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># &lt;&lt;&lt; end &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>实际上两个服务我们可以拆分为两个文件，新创建一个名为 <code>infra.yaml</code> 的新 <code>Compose</code> 文件。将 <code>Redis</code> 服务从原本的 <code>compose.yaml</code> 文件中剪切并粘贴到新的 <code>infra.yaml</code> 文件中。确保在文件顶部添加 <code>services</code> 顶级属性。您的 <code>infra.yaml</code> 文件现在应该如下所示：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:alpine</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在你的 <code>compose.yaml</code> 文件中，添加 <code>include</code> 顶级属性以及 <code>infra.yaml</code> 文件的路径。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">include</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  web</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8000:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    develop</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      watch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> action</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sync</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">          target</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /code</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行 <code>docker compose down &amp;&amp; docker compose up --build --watch</code> 以使用更新的 <code>Compose</code> 文件构建应用程序并运行它。您应该在浏览器中看到输出消息。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拆分服务</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 拆分配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose.yaml</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">include:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">services:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  web:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    build:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8000:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    develop:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      watch:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> action:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sync</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">          target:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /code</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">          </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># infra.yaml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">services:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  redis:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    image:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:alpine</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重新构建和启动</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> down</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --bulid</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --watch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Werkzeug/3.0.4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Python/3.10.15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Fri,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Oct</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:57:41</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> text/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> charset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">utf-8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Content-Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> close</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>到这里最基本的使用您已了解，只需要继续查看官方文档即可，不过涉及到跨主机的容器编排，我们推荐使用 <code>k8s</code>，并且也不推荐使用前面的 <code>Overlay</code> 网络。</p><p>这里再给出一个例子，这次的例子会尽可能编写较多的配置，旨在得到一个万用配置，以运行多个 <code>Linux</code> 为例，这次的需求是使用 <code>Docker Compose</code> 来编排多个容器租借给他人使用。</p><p>不过我们来重新整理下关于 <code>yml</code> 文件的常见配置顶级元素（也就是配置文件中没有任何缩进的字段）以及旗下的子元素（子字段），相关的资源可以 <a href="https://docs.docker.com/reference/compose-file/" target="_blank" rel="noopener noreferrer">在官方文档中学习详细的配置</a>。</p><ul><li><strong>[version]:</strong> <code>Compose</code> 不再使用 <code>version</code> 来选择一个确切的模式来验证 <code>Compose</code> 文件，本系列用的是当前（2024.10.25）的最新版本 <code>Docker Compose</code> 工具，因此这个顶级元素已经不再需要</li><li><strong>name:</strong> 定义项目名称，默认是配置文件的父目录作为项目名称，可以使用 <code>docker compose ls</code> 来验证，并且会作为环境变量 <code>COMPOSE_PROJECT_NAME</code> 被暴露以进行插值和环境变量解析（就是定义完成就可以使用这个环境变量了）</li><li><strong>services:</strong> 定义所有的服务，所有的服务构成一个项目 <ul><li><strong>&lt;service_name&gt;:</strong> 用户自定义的服务</li><li><strong>build:/image:</strong> 指定构建镜像，如果没有自己的镜像文件，就只需要使用 <code>image</code> 后指定 <code>镜像名:版本号</code> 即可 <ul><li><strong>context:</strong> 上下文路径，通常填写目录，指定构建镜像的构建目录</li><li><strong>dockerfile:</strong> 指定镜像文件名称，通常填写镜像文件名称，可以是默认名称也可以是自定义名称</li><li><strong>args:</strong> 将参数传递给 <code>Dockerfile</code> 中对应的 <code>ARG</code> 指令，这样可以编写出更加通用的镜像文件</li><li><strong>target:</strong> 构建目标阶段（这和 <code>Dockerfile</code> 的构建阶段编写有关，允许只运行到某一个阶段）</li></ul></li><li><strong>container_name:</strong> 镜像运行后对应的容器名称，可以使用 <code>docker container ls -a</code> 来验证</li><li><strong>command:</strong> 用于覆盖 <code>Dockerfile</code> 中的 <code>CMD</code> 指令，也是在容器启动时执行，在容器运行时执行</li><li><strong>mem_limit:</strong> 内存限制</li><li><strong>cpus:</strong> 处理器数量限制</li><li><strong>cpuset:</strong> 处理器对象限制</li><li><strong>devices:</strong> 驱动映射</li><li><strong>ports:</strong> 端口映射</li><li><strong>volumes:</strong> 存储映射</li><li><strong>restart:</strong> 选项可以使用以下几种策略： <ul><li><code>no</code> 默认值，不重启容器。</li><li><code>always</code> 总是重启容器，即使容器手动停止，系统重启后也会自动启动。</li><li><code>on-failure</code> 仅在容器非正常退出时重启，例如崩溃退出。</li><li><code>unless-stopped</code> 容器会自动重启，除非手动停止它。</li></ul></li></ul></li></ul><p>另外，可以通过配置 <code>.env</code> 文件来让 <code>docker compose</code> 来读取变量，下面我们来完成使用 <code>Docker Compose</code> 来编排多个容器租借给他人使用的需求（这种行为其实就是在模拟云服务器厂商的行为）。</p><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写镜像文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># vim gzs_linux_learn_container_dockerfile </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># cat gzs_linux_learn_container_dockerfile </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 默认使用 Ubuntu 20.04 作为基础镜像</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ARG</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> UBUNTU_VERSION=20.04</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ubuntu:\${UBUNTU_VERSION}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置时区和避免交互模式</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ENV</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DEBIAN_FRONTEND=noninteractive</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ENV</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> container=docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 更新软件包并安装常用工具, 包括 OpenSSH 服务</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">RUN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> apt update &amp;&amp; apt install -y \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    sudo \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    htop \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    openssh-server \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    vim \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    curl \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    net-tools \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    wget \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    git \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    gcc \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    python3 \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    &amp;&amp; apt clean</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建 SSH 配置目录并生成 SSH 密钥</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">RUN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> mkdir /var/run/sshd &amp;&amp; ssh-keygen -A</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 配置 SSH 服务允许使用密码登录，设置 root 密码为 rootubuntu</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">RUN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> echo </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&#39;root:rootubuntu&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | chpasswd &amp;&amp; \\</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    sed -i </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&#39;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /etc/ssh/sshd_config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动 ssh 服务并保持容器在前台运行</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CMD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;/usr/sbin/sshd&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;-D&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写编排文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># vim gzs_linux_learn_container_compose.yml</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># cat gzs_linux_learn_container_compose.yml </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gzs-linux-learn-container</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置顶级元素 name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置顶级元素 service</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  container1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 镜像构建路径</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gzs_linux_learn_container_dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        UBUNTU_VERSION</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\${UBUNTU_VERSION}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 从 config.env 文件中获取变量</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Gzs-Ubuntu2004-1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 生成的容器名</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/sbin/sshd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-D</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 为避免意外还是覆盖了启动指令, 默认启动 sshd 服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    mem_limit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 4G</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大内存限制    </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大处理核数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpuset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定处理核心</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    devices</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 管理设备</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null:/dev/nvidia0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置 gpu 资源, 禁止 gpu 使用</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9000:22</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9000 端口到容器的 22 端口 (SSH)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9001:80</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9001 端口到容器的 80 端口 (HTTP)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9002:443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 映射主机的 9002 端口到容器的 443 端口 (HTTPS)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9003:3306</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9003 端口到容器的 3306 端口 (MySQL)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9004:8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 显示备用 HTTP 端口</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9005:6379</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9005 端口到容器的 6379 端口 (Redis)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9006:5432</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9006 端口到容器的 5432 端口 (PostgreSQL)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 挂载目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/ljp/data/docker-compose/docker1:/home:rw</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> always</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置自动重启策略</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  container2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 第二个服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gzs_linux_learn_container_dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        UBUNTU_VERSION</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\${UBUNTU_VERSION}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Gzs-Ubuntu2004-2</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 生成的容器名</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/sbin/sshd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-D</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 启动 sshd 服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    mem_limit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 4G</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大内存限制    </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大处理核数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpuset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定处理核心</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    devices</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null:/dev/nvidia0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置 gpu 资源, 禁止 gpu 使用</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9100:22</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9100 端口到容器的 22 端口 (SSH)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9101:80</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9101 端口到容器的 80 端口 (HTTP)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9102:443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 映射主机的 9102 端口到容器的 443 端口 (HTTPS)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9103:3306</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9103 端口到容器的 3306 端口 (MySQL)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9104:8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 显示备用 HTTP 端口</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9105:6379</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9105 端口到容器的 6379 端口 (Redis)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9106:5432</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9106 端口到容器的 5432 端口 (PostgreSQL)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 挂载目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/ljp/data/docker-compose/docker2:/home:rw</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> always</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置自动重启策略</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  container3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 第三个服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> .</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gzs_linux_learn_container_dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        UBUNTU_VERSION</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\${UBUNTU_VERSION}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Gzs-Ubuntu2004-3</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 生成的容器名</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/sbin/sshd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-D</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 启动 sshd 服务</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    mem_limit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 4G</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大内存限制    </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 最大处理核数</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpuset</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 指定处理核心</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    devices</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null:/dev/nvidia0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置 gpu 资源, 禁止 gpu 使用</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9200:22</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9200 端口到容器的 22 端口 (SSH)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9201:80</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 映射主机的 9201 端口到容器的 80 端口 (HTTP)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9202:443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 映射主机的 9202 端口到容器的 443 端口 (HTTPS)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9203:3306</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9203 端口到容器的 3306 端口 (MySQL)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9204:8080</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 显示备用 HTTP 端口</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9205:6379</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9205 端口到容器的 6379 端口 (Redis)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9206:5432</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 映射主机的 9206 端口到容器的 5432 端口 (PostgreSQL)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 挂载目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /home/ljp/data/docker-compose/docker3:/home:rw</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> always</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置自动重启策略</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编写变量文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config.env</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">UBUNTU_VERSION</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20.04</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 运行编排工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gzs_linux_learn_container_compose.yml</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --env-file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config.env</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --build</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意：有看不懂的地方查询一下即可。</p></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>补充：以下三个字段的区别。</p><ul><li><code>RUN</code> 用于在构建镜像时执行命令，通常用于安装软件包、设置环境等</li><li><code>CMD</code> 用于设置容器启动时的默认命令和参数，可以被 <code>docker run</code> 命令行参数覆盖</li><li><code>command</code> 用于覆盖 <code>Dockerfile</code> 中的 <code>CMD</code> 指令，也是在容器启动时执行，在容器运行时执行</li></ul><p>如果镜像文件默认的启动指令正确，则可以不设置设个覆盖指令。</p></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>警告：上述配置文件的写法其实不太现代（尤其是在资源限制这里），如果需要现代写法最好直接查询官方文档...</p></div><h2 id="_10-docker-的软件" tabindex="-1"><a class="header-anchor" href="#_10-docker-的软件"><span>10.Docker 的软件</span></a></h2><p>这一小节主要是讲解一些常见的基于 <code>Docker</code> 的软件配置问题，旨在提高我们初始项目、部署项目的速度，这里会讲解到一些常见软件的相关配置。不过首先有一个前提条件：下面的组件在项目源代码中，都拥有一个单独的目录做一些持久化操作，我推荐每个目录都存在 <code>./docker/&lt;组件名&gt;</code> 下，并且统一使用 <code>docker-compose</code> 来进行快速部署。</p><h3 id="_10-1-nginx" tabindex="-1"><a class="header-anchor" href="#_10-1-nginx"><span>10.1.Nginx</span></a></h3><p>待补充...</p><h3 id="_10-2-mysql" tabindex="-1"><a class="header-anchor" href="#_10-2-mysql"><span>10.2.MySQL</span></a></h3><p>部署的时候，最头疼的其实就是 <code>MySQL</code> 的初始化过程，安装 <code>MySQL</code> 后总是会遇到各种问题阻碍我们的开发进度（例如关于用户和密码的配置）。首先我建议，既然您都使用 <code>Docker</code> 进行数据库快速部署了，那么用户名干脆直接使用 <code>root</code>，保持 <code>Linux</code> 的习惯，除非您需要将多个项目的数据存储到统一的地方，不然这个数据库容器只需要一个账户就够用了（开发阶段就不要给自己受限了）。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ./docker-compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 存储</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  &lt;项目名称&gt;-mysql</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:latest</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> work-creative-space-mysql</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    mem_limit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 400m</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cpus</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.5</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">       -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3306:3306</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> always</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    privileged</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      TZ</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Qwe54188_</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./docker/mysql/data/:/var/lib/mysql/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 持久化目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./docker/mysql/init/:/docker-entrypoint-initdb.d/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 初始化目录</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;项目名称&gt;-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  &lt;项目名称&gt;-network</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &lt;项目名称&gt;-network</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-3-redis" tabindex="-1"><a class="header-anchor" href="#_10-3-redis"><span>10.3.Redis</span></a></h3><p>待补充...</p><h3 id="_10-4-elasticsearch" tabindex="-1"><a class="header-anchor" href="#_10-4-elasticsearch"><span>10.4.Elasticsearch</span></a></h3><p>待补充...</p><h3 id="_10-5-minio" tabindex="-1"><a class="header-anchor" href="#_10-5-minio"><span>10.5.Minio</span></a></h3><p>待补充...</p>`,29))])}const _=l(q,[["render",f]]),I=JSON.parse('{"path":"/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/ukh43e1q/","title":"容器隔离软件","lang":"zh-CN","frontmatter":{"createTime":"2025/04/09 23:31:30","permalink":"/1.编码修养/3.系统网络/ukh43e1q/","title":"容器隔离软件","description":"1.Docker 的历史 容器技术的快速发展改变了现代软件开发和部署的方式，但是这种技术并不新颖，从很久开始就发展起来了，下面历史是收集而来，简单看一看即可... 1.1.监狱时期 早期的贝尔实验室发明了 chroot，主要是为了避免在一个系统软件编译和安装完成后，需要重写配置环境的情况。因此就考虑能否创建出一个隔离环境，专门用于构建和搭建测试环境，进...","head":[["meta",{"property":"og:url","content":"https://limou3434.github.io/work-blog-website/work-blog-website/1.%E7%BC%96%E7%A0%81%E4%BF%AE%E5%85%BB/3.%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C/ukh43e1q/"}],["meta",{"property":"og:site_name","content":"缡墨"}],["meta",{"property":"og:title","content":"容器隔离软件"}],["meta",{"property":"og:description","content":"1.Docker 的历史 容器技术的快速发展改变了现代软件开发和部署的方式，但是这种技术并不新颖，从很久开始就发展起来了，下面历史是收集而来，简单看一看即可... 1.1.监狱时期 早期的贝尔实验室发明了 chroot，主要是为了避免在一个系统软件编译和安装完成后，需要重写配置环境的情况。因此就考虑能否创建出一个隔离环境，专门用于构建和搭建测试环境，进..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://kube-portal.oss-cn-shenzhen.aliyuncs.com/uploads/20220314/241032c5a4e41328a4a8bacc9c4307e9.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-19T14:21:17.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-19T14:21:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"容器隔离软件\\",\\"image\\":[\\"http://kube-portal.oss-cn-shenzhen.aliyuncs.com/uploads/20220314/241032c5a4e41328a4a8bacc9c4307e9.png\\"],\\"dateModified\\":\\"2025-04-19T14:21:17.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":122.61,"words":36782},"git":{"updatedTime":1745072477000,"contributors":[{"name":"limou3434","username":"limou3434","email":"898738804@qq.com","commits":7,"avatar":"https://avatars.githubusercontent.com/limou3434?v=4","url":"https://github.com/limou3434"},{"name":"898738804@qq.com","username":"","email":"898738804@qq.com","commits":1,"avatar":"https://gravatar.com/avatar/99b785fec2313bb0333d61afc154ec6ac172fa3627c64cb57445ad6fcffd491b?d=retro"}]},"autoDesc":true,"filePathRelative":"notes/1.编码修养/3.系统网络/038_ljp_2024_08_06_容器隔离软件.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"557f7c","sort":1,"name":"编码修养"},{"id":"7ab59a","sort":3,"name":"系统网络"}],"bulletin":true}');export{_ as comp,I as data};
